<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>手写Promise.all</title>
      <link href="/2023/02/02/%E6%89%8B%E5%86%99Promise-all/"/>
      <url>/2023/02/02/%E6%89%8B%E5%86%99Promise-all/</url>
      
        <content type="html"><![CDATA[<ol><li>知道Promise上写而不是在原型上写</li><li>知道all的参数（Promise数组）和返回值（新Promise对象）</li><li>知道用数组来记录结果</li><li>知道只要一个reject就整体reject</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">Promise.myAll = <span class="hljs-keyword">function</span> (list) &#123;<br>    const results = []<br>    <span class="hljs-built_in">let</span> count = 0<br>    <span class="hljs-built_in">return</span> new Promise((resolve, reject) =&gt; &#123;<br>        list.map((promise, index) =&gt; &#123;<br>            promise.then((r) =&gt; &#123;<br>                results[index] = r<br>                count += 1<br>                <span class="hljs-keyword">if</span> (count === list.length) &#123;<br>                    resolve(results)<br>                &#125;<br>            &#125;,<br>                (reason) =&gt; &#123;<br>                    reject(reason)<br>                &#125;<br>            )<br>        &#125;)<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvas和SVG区别</title>
      <link href="/2023/02/02/Canvas%E5%92%8CSVG%E5%8C%BA%E5%88%AB/"/>
      <url>/2023/02/02/Canvas%E5%92%8CSVG%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<ol><li>Canvas主要是用笔刷来绘制2D图形。</li><li>SVG主要是用标签来绘制不规则矢量图。</li><li>相同点:都是主要用来画2D图形。</li><li>不同点：Canvas画的是位图，SVG画的是矢量图。</li><li>不同点：SVG节点过时渲染慢，Canvas性能更好，但写起来复杂。</li><li>SVG支持分层和事件，Canvas不支持，但可以用库实现。</li></ol>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见排序算法</title>
      <link href="/2020/02/12/%E5%B8%B8%E8%A7%81%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
      <url>/2020/02/12/%E5%B8%B8%E8%A7%81%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<ol><li><p>冒泡排序</p><ol><li>按顺序依次两两对比,把大的放到后面,直到最后的数最大.</li><li>将最后的数固定,再重新对比n-1的数.</li></ol></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">const arr = [1,20,30,10,50,100,999]<br><br><span class="hljs-keyword">function</span> bubbleSort(arr)&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> i = 0;i&lt;arr.length - 1;i++)&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> j = 0;j &lt; arr.length - i -1;j++)&#123;<br>            <span class="hljs-keyword">if</span>(arr[j] &gt; arr[j+1])&#123;<br>                swap(arr,j,j+1)<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> swap(arr,n,m)&#123;<br>    <span class="hljs-built_in">let</span> temp = arr[n]<br>    arr[n] = arr[m]<br>    arr[m] = temp<br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li><p>选择排序</p><ol><li>找出数列里最小的数,将其移到第一位.</li><li>再从n+1开始,依次排序.</li></ol></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> selectionSort(arr)&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> i = 0;i &lt; arr.length - 1;i++)&#123;<br>        <span class="hljs-built_in">let</span> index = i;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> j = i+1;j &lt; arr.length;j++)&#123;<br>            <span class="hljs-keyword">if</span>(arr[index] &gt; arr[j])&#123;<br>                index = j<br>            &#125;<br>        &#125;<br>        swap(arr,i,index)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>插入排序<br> 1.建立一个空数组,从原数组中抽出一个数插入到空数组,形成有序数组<br> 2.每次将原的一个数插入到有序的数组中去</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> insertSort(arr)&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> i= 0;i &lt; arr.length;i++)&#123;<br>        <span class="hljs-built_in">let</span> temp = arr[i]<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> j = 0;j &lt; i;j++)&#123;<br>            <span class="hljs-keyword">if</span>(temp &lt; arr[j] &amp;&amp; j === 0)&#123;<br>                arr.splice(i,1)<br>                arr.unshift(temp)<br>                <span class="hljs-built_in">break</span><br>            &#125;<span class="hljs-keyword">else</span>  <span class="hljs-keyword">if</span>(temp &gt; arr[j] &amp;&amp; temp &lt; arr[j+1] &amp;&amp; j &lt; i - 1)&#123;<br>                arr.splice(i,1)<br>                arr.splice(j+1,0,temp)<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="4"><li><p>快排</p><ol><li>先随机取一个数,将比这个数小的放左边,大的放右边.</li><li>左边和右边的数都用上面的步骤,继续分.</li><li>不断重复.</li></ol></li><li><p>归并排序</p><ol><li>将相邻的两个数进行排序，形成n/2对，然后在每对合并，不断重复</li></ol></li><li><p>基数排序</p><ol><li>比较个位大小，将数组的顺序变成按个位一次递增，之后比较十位，最后到最后一位.</li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TS声明</title>
      <link href="/2020/01/17/TS%E5%A3%B0%E6%98%8E/"/>
      <url>/2020/01/17/TS%E5%A3%B0%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<h4 id="如何写一个TS声明文件"><a href="#如何写一个TS声明文件" class="headerlink" title="如何写一个TS声明文件"></a>如何写一个TS声明文件</h4><p>test.ts</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> interface Person &#123;<br>    name: string<br>    age: number<br>&#125;<br><br>const a = <span class="hljs-keyword">function</span> (p: Person) &#123;<br>    console.log(p)<br>&#125;<br><br><span class="hljs-built_in">export</span> default a<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tsc test.ts -d<br></code></pre></td></tr></table></figure><p>生成test.d.ts文件,就是声明文件<br>-d的全称是declaration(声明)</p><h4 id="如何提供给别人使用-d-ts"><a href="#如何提供给别人使用-d-ts" class="headerlink" title="如何提供给别人使用 *.d.ts"></a>如何提供给别人使用 *.d.ts</h4><p>库:在package.json添加types字段</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<br>  <span class="hljs-string">"name"</span>: <span class="hljs-string">"ts"</span>,<br>  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,<br>  <span class="hljs-string">"description"</span>: <span class="hljs-string">""</span>,<br>  <span class="hljs-string">"main"</span>: <span class="hljs-string">"main.js"</span>,<br>  <span class="hljs-string">"type"</span>:<span class="hljs-string">"main.d.ts"</span>,//添加这里<br>&#125;<br></code></pre></td></tr></table></figure><p>社区:上传到DefinitelyTyped</p><h4 id="如何给任意JS添加声明"><a href="#如何给任意JS添加声明" class="headerlink" title="如何给任意JS添加声明"></a>如何给任意JS添加声明</h4><h5 id="require方式"><a href="#require方式" class="headerlink" title="require方式"></a>require方式</h5><p>v.js<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> add(a, b) &#123;<br>    <span class="hljs-built_in">return</span> a + b<br>&#125;<br><br><span class="hljs-built_in">export</span> default add<br></code></pre></td></tr></table></figure></p><p>tsconfig.json</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<br>    <span class="hljs-string">"compilerOptions"</span>: &#123;<br>        <span class="hljs-string">"types"</span>: [<br>            <span class="hljs-string">"node"</span><br>        ],<br>        <span class="hljs-string">"typeRoots"</span>: [<br>            <span class="hljs-string">"node_modules/@types"</span><br>        ]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>test.ts<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<br>    interface V &#123;<br>        (a: number, b: number): number<br>    &#125;<br><br>    const add: V = require(<span class="hljs-string">'./v.js'</span>)<br><br>    add(1, 2)<br>&#125;<br></code></pre></td></tr></table></figure></p><h4 id="import-方式"><a href="#import-方式" class="headerlink" title="import 方式"></a>import 方式</h4><p>test.ts</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">import add from <span class="hljs-string">'./v.js'</span><br><br>add(1, 2)<br></code></pre></td></tr></table></figure><p>test.d.ts<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">declare</span> <span class="hljs-keyword">function</span> y(a: number, b: number): number<br><span class="hljs-built_in">export</span> default y<br></code></pre></td></tr></table></figure></p><h4 id="如何修改window全局变量"><a href="#如何修改window全局变量" class="headerlink" title="如何修改window全局变量"></a>如何修改window全局变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">declare</span> global &#123;<br>    interface Window&#123;<br>        server:&#123;<br>            host:string<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TS类型</title>
      <link href="/2020/01/16/TS%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%9E%8B/"/>
      <url>/2020/01/16/TS%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">type</span> Name = String<br><span class="hljs-built_in">type</span> FasleLike = <span class="hljs-string">''</span> | 0 | <span class="hljs-literal">false</span> | null | undefined<br><span class="hljs-built_in">type</span> Ponit = &#123;x: number,y: number&#125;<br><span class="hljs-built_in">type</span> Ponits = Ponit[]//数组<br><span class="hljs-built_in">type</span> Line = [Ponit, Ponit]//元祖<br><span class="hljs-built_in">type</span> Circle = &#123; center: Ponit, radius: number &#125;<br><span class="hljs-built_in">type</span> Fn = (a: number, b: number) =&gt; number<br><span class="hljs-built_in">type</span> FnWithProps = &#123;<br>    (a: number, b: number): number<br>    prop: number<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="类型别名type"><a href="#类型别名type" class="headerlink" title="类型别名type"></a>类型别名type</h3><p>给类型取别名,跟接口很像</p><p>区别</p><pre><code>1. interface只描述对象，type则描述所有数据2. type只是别名，interface则是类型声明3. 对外API尽量用interface，方便扩展，对内API尽量用type，防止代码分散</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">type</span> Age = number<br>const age: Age = 18<br><br><span class="hljs-built_in">type</span> Name = string<br>const name: Name = <span class="hljs-string">'tom'</span><br><br><span class="hljs-built_in">type</span> A = &#123;<br>    name: string<br>&#125;<br><br>interface B &#123;<br>    name: string<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="字面量类型"><a href="#字面量类型" class="headerlink" title="字面量类型"></a>字面量类型</h3><p>通常用来作可选项</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface Course &#123;<br>    category: <span class="hljs-string">'task'</span> | <span class="hljs-string">'live'</span><br>&#125;<br><br>const course: Course = &#123;<br>    category: <span class="hljs-string">'task'</span><br>&#125;<br><br><span class="hljs-built_in">type</span> Dir = <span class="hljs-string">'east'</span> | <span class="hljs-string">'west'</span> | <span class="hljs-string">'north'</span> | <span class="hljs-string">'south'</span><br><br>const dir: Dir = <span class="hljs-string">'east'</span><br><br><span class="hljs-built_in">type</span> A = 1 | 2 | 3 | 4 | 5 | 6<br>const a: A = 1<br></code></pre></td></tr></table></figure><h3 id="索引签名"><a href="#索引签名" class="headerlink" title="索引签名"></a>索引签名</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">type</span> Hash = &#123;<br>    [k:string]:unknown<br>    length:number<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="映射类型"><a href="#映射类型" class="headerlink" title="映射类型"></a>映射类型</h3><p>多用于泛型<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">type</span> Hash = &#123;<br>    [k <span class="hljs-keyword">in</span> string]:unknown<br>&#125;<br></code></pre></td></tr></table></figure></p><h3 id="且类型-交叉类型"><a href="#且类型-交叉类型" class="headerlink" title="且类型(交叉类型)"></a>且类型(交叉类型)</h3><p>两种类型都需满足</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface human &#123;<br>    name: string<br>    age: number<br>&#125;<br><br>interface student &#123;<br>    name: string<br>    id: number<br>&#125;<br><br><span class="hljs-built_in">let</span> tom: human &amp; student = &#123;<br>    name: <span class="hljs-string">'tom'</span>,<br>    age: 18,<br>    id: 123<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="或类型-联合类型"><a href="#或类型-联合类型" class="headerlink" title="或类型(联合类型)"></a>或类型(联合类型)</h3><p>满足一种类型即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface human &#123;<br>    name: string<br>    age: number<br>&#125;<br><br>interface student &#123;<br>    name: string<br>    id: number<br>&#125;<br><br><span class="hljs-built_in">let</span> tom: human | student = &#123;//满足两种<br>    name: <span class="hljs-string">'tom'</span>,<br>    age: 18,<br>    id: 123<br>&#125;<br><br><span class="hljs-built_in">let</span> jack: human | student = &#123;//满足一种<br>    name: <span class="hljs-string">'jack'</span>,<br>    age: 19<br>&#125;<br><span class="hljs-built_in">type</span> A1 = number<br><span class="hljs-built_in">type</span> B1 = string<br><span class="hljs-built_in">type</span> C1 = A1 | B1<br><br><span class="hljs-built_in">type</span> A2 = &#123;name:string&#125;<br><span class="hljs-built_in">type</span> B2 = &#123;age:number&#125;<br><span class="hljs-built_in">type</span> C2 = A2 | B2<br>const c2:C2 = &#123;<br>    name:<span class="hljs-string">'John'</span>,<br>    age:18<br>&#125;<br>const c3:c2 = &#123;<br>    name:<span class="hljs-string">'John'</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="类型收窄"><a href="#类型收窄" class="headerlink" title="类型收窄"></a>类型收窄</h4><ol><li>js方法：type of instanceof</li><li>Ts方法：is</li><li><p>Ts方法（可辨别联合）：x.kind</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface Circle &#123; kind: <span class="hljs-string">'circle'</span>, radius: number &#125;<br>interface Square &#123; kind: <span class="hljs-string">'square'</span>, sideLength: number &#125;<br><span class="hljs-built_in">type</span> Shape = Circle | Square;<br>const f1 = (shape: Shape) =&gt; &#123;<br>    <span class="hljs-keyword">if</span> (shape.kind === <span class="hljs-string">'circle'</span>) &#123;<br>        shape //Circle<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (shape.kind === <span class="hljs-string">'square'</span>) &#123;<br>        shape //Square<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        shape //Never<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>Ts方法：断言</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> b :unknown = await axios(...)<br>(b as number).toFixed();<br></code></pre></td></tr></table></figure></li></ol><h3 id="this类型"><a href="#this类型" class="headerlink" title="this类型"></a>this类型</h3><p>自动判断this类型(多态)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">class Calc &#123;<br>    public n: number<br>    constructor(n: number) &#123;<br>        this.n = n<br>    &#125;<br>    add(n: number) &#123;<br>        this.n += n<br>        <span class="hljs-built_in">return</span> this<br>    &#125;<br>&#125;<br><br><span class="hljs-built_in">let</span> calc = new Calc(1)<br>calc.add(2).add(4) //自动判断this是number,可以用add<br><br>console.log(calc) //7<br></code></pre></td></tr></table></figure><p>ts的this可以推断类型<br>下面的this返回的是BiggerCalc的this,而不是Calc的this,因为他有sin方法</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">class Calc &#123;<br>    public n: number<br>    constructor(n: number) &#123;<br>        this.n = n<br>    &#125;<br>    add(n: number) &#123;<br>        this.n += n<br>        <span class="hljs-built_in">return</span> this<br>    &#125;<br>&#125;<br><br>class BiggerCalc extends Calc &#123;<br>    <span class="hljs-function"><span class="hljs-title">sin</span></span>() &#123;<br>        this.n = Math.sin(this.n)<br>        <span class="hljs-built_in">return</span> this<br>    &#125;<br>&#125;<br><br><span class="hljs-built_in">let</span> calc = new BiggerCalc(1)<br>calc.add(2).add(4).sin().add<br><br>console.log(calc) //0.6569865987187891<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用vue-ts写一个toDoList</title>
      <link href="/2020/01/14/%E7%94%A8vue-ts%E5%86%99%E4%B8%80%E4%B8%AAtoDoList/"/>
      <url>/2020/01/14/%E7%94%A8vue-ts%E5%86%99%E4%B8%80%E4%B8%AAtoDoList/</url>
      
        <content type="html"><![CDATA[<ol><li>app.vue</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;template&gt;<br>  &lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;newToDo @add=<span class="hljs-string">"addNewItem"</span> /&gt;<br>    &lt;toDoList :list=<span class="hljs-string">"list"</span> /&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=<span class="hljs-string">"ts"</span>&gt;<br>import &#123; Component, Vue &#125; from <span class="hljs-string">"vue-property-decorator"</span>;<br>// import HelloWorld from <span class="hljs-string">'./components/HelloWorld.vue'</span>;<br>import newToDo from <span class="hljs-string">"./components/newToDo.vue"</span>;<br>import toDoList from <span class="hljs-string">"./components/toDoList.vue"</span>;<br><br>interface List &#123;<br>  name: string;<br>  status: <span class="hljs-string">"done"</span> | <span class="hljs-string">"todo"</span> | <span class="hljs-string">"deleted"</span>;<br>&#125;<br><br>@Component(&#123;<br>  components: &#123;<br>    newToDo,<br>    toDoList<br>  &#125;,<br>  watch: &#123;<br>    list(newValue: List) &#123;<br>      localStorage.setItem(<span class="hljs-string">"list"</span>, JSON.stringify(newValue));<br>    &#125;<br>  &#125;<br>&#125;)<br><span class="hljs-built_in">export</span> default class App extends Vue &#123;<br>  list: Array&lt;List&gt; = localStorage.getItem(<span class="hljs-string">"list"</span>)<br>    ? JSON.parse(&lt;string&gt;localStorage.getItem(<span class="hljs-string">"list"</span>))<br>    : [];<br>  addNewItem(value: string) &#123;<br>    this.list.push(&#123;<br>      name: value,<br>      status: <span class="hljs-string">"todo"</span><br>    &#125;);<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=<span class="hljs-string">"scss"</span>&gt;<br>* &#123;<br>  margin: 0;<br>  padding: 0;<br>  box-sizing: content-box;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><ol start="2"><li>newToDo.vue</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"text"</span> v-model=<span class="hljs-string">"context"</span> /&gt;<br>    &lt;button @click=<span class="hljs-string">"add"</span>&gt;+&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=<span class="hljs-string">"ts"</span>&gt;<br>import &#123; Component, Vue &#125; from <span class="hljs-string">"vue-property-decorator"</span>;<br><br>@Component(&#123;&#125;)<br><span class="hljs-built_in">export</span> default class newToDo extends Vue &#123;<br>  context = <span class="hljs-string">""</span>;<br>  <span class="hljs-function"><span class="hljs-title">add</span></span>() &#123;<br>    this.<span class="hljs-variable">$emit</span>(<span class="hljs-string">"add"</span>, this.context);<br>    this.context = <span class="hljs-string">""</span>;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><ol start="3"><li>toDoList.vue</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;ul&gt;<br>      &lt;li v-for=<span class="hljs-string">"(item,index) in list"</span> :key=<span class="hljs-string">"index"</span>&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt;<br>    &lt;/ul&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=<span class="hljs-string">"ts"</span>&gt;<br>import &#123; Component, Vue &#125; from <span class="hljs-string">"vue-property-decorator"</span>;<br><br>@Component(&#123;<br>  props: &#123;<br>    list: Array<br>  &#125;<br>&#125;)<br><span class="hljs-built_in">export</span> default class toDoList extends Vue &#123;&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=<span class="hljs-string">"scss"</span>&gt;<br>ul,<br>li &#123;<br>  list-style: none;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack4搭建vue-ts项目</title>
      <link href="/2020/01/13/webpack4%E6%90%AD%E5%BB%BAvue-ts%E9%A1%B9%E7%9B%AE/"/>
      <url>/2020/01/13/webpack4%E6%90%AD%E5%BB%BAvue-ts%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<ol><li>创建根目录</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">mkdir webpack-demo<br><span class="hljs-built_in">cd</span> webpack-demo<br>npm init -y<br>npm install webpack webpack-cli --save-dev<br></code></pre></td></tr></table></figure><ol start="2"><li>创建index.js</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">|- /src<br>   |- index.js<br></code></pre></td></tr></table></figure><p>index.js</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">var div = document.createElement(<span class="hljs-string">'div'</span>)<br>div.id = <span class="hljs-string">'app'</span><br>document.body.appendChild(div)<br></code></pre></td></tr></table></figure><ol start="3"><li>创建webpack.config.js</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">|- webpack.config.js<br>|- /src<br>    |- index.js<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">//webpack.config.js<br>const path = require(<span class="hljs-string">'path'</span>);<br><br>module.exports = &#123;<br>  entry: <span class="hljs-string">'./src/index.js'</span>,<br>  mode:<span class="hljs-string">'development'</span>,<br>  output: &#123;<br>    filename: <span class="hljs-string">'main.js'</span>,<br>    path: path.resolve(__dirname, <span class="hljs-string">'dist'</span>),<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><ol start="4"><li>运行打包项目</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npx webpack --config webpack.config.js<br></code></pre></td></tr></table></figure><ol start="5"><li>安装sever<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i  -D webpack-dev-server<br></code></pre></td></tr></table></figure></li></ol><p>在package.json添加</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-string">"scripts"</span>: &#123;<br>    <span class="hljs-string">"dev"</span>: <span class="hljs-string">"webpack-dev-server --open"</span>,<br>&#125;<br><br>//在终端中输入<br>npm run dev<br>启动项目<br></code></pre></td></tr></table></figure><ol start="6"><li>安装HtmlWebpackPlugin</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i --save-dev html-webpack-plugin<br></code></pre></td></tr></table></figure><p>webpack.config.js<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">const HtmlWebpackPlugin = require(<span class="hljs-string">'html-webpack-plugin'</span>)<br><br>module.exports = &#123;<br>    entry: <span class="hljs-string">'./src/index.js'</span>,<br>    mode: <span class="hljs-string">'development'</span>,<br>    output: &#123;<br>        filename: <span class="hljs-string">'main.js'</span>,<br>        path: path.resolve(__dirname, <span class="hljs-string">'dist'</span>),<br>    &#125;,<br>    plugins: [<br>        new HtmlWebpackPlugin()<br>    ]<br>&#125;;<br></code></pre></td></tr></table></figure></p><p>至此项目已经可以正常运行了</p><ol start="7"><li>安装vue</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i vue<br>npm i -D vue-loader<br>npm i -D vue-template-compiler<br></code></pre></td></tr></table></figure><p>创建一个组件main.vue,这个很简单就不说了.</p><p>index.js</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">import Vue from <span class="hljs-string">'vue'</span><br>import main from <span class="hljs-string">'./main.vue'</span><br><br>new Vue(&#123;<br>    render: h =&gt; h(main)<br>&#125;).<span class="hljs-variable">$mount</span>(<span class="hljs-string">'#app'</span>)<br></code></pre></td></tr></table></figure><p>webpack.config.js</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">const path = require(<span class="hljs-string">'path'</span>);<br>const HtmlWebpackPlugin = require(<span class="hljs-string">'html-webpack-plugin'</span>)<br>const VueLoaderPlugin = require(<span class="hljs-string">'vue-loader/lib/plugin'</span>)<br><br>module.exports = &#123;<br>    entry: <span class="hljs-string">'./src/index.js'</span>,<br>    mode: <span class="hljs-string">'development'</span>,<br>    resolve: &#123;<br>        extensions: [<span class="hljs-string">".ts"</span>, <span class="hljs-string">".tsx"</span>, <span class="hljs-string">".js"</span>]<br>    &#125;,<br>    module: &#123;<br>        rules: [<br>            &#123;<br>                <span class="hljs-built_in">test</span>: /\.vue$/,<br>                loader: <span class="hljs-string">'vue-loader'</span><br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        new HtmlWebpackPlugin(), new VueLoaderPlugin()<br>    ]<br>&#125;;<br></code></pre></td></tr></table></figure><p>至此,可以运行vue了.</p><ol start="8"><li>安装TS</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i typescript<br>npm install ts-loader --save-dev<br></code></pre></td></tr></table></figure><p>创建tsconfig.json<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<br>    <span class="hljs-string">"compilerOptions"</span>: &#123;<br>        <span class="hljs-string">"sourceMap"</span>: <span class="hljs-literal">true</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>修改webpack.config.js<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs bash">const path = require(<span class="hljs-string">'path'</span>);<br>const HtmlWebpackPlugin = require(<span class="hljs-string">'html-webpack-plugin'</span>)<br>const VueLoaderPlugin = require(<span class="hljs-string">'vue-loader/lib/plugin'</span>)<br><br>module.exports = &#123;<br>    entry: <span class="hljs-string">'./src/index.ts'</span>,   //这里改成ts<br>    mode: <span class="hljs-string">'development'</span>,<br>    output: &#123;<br>        filename: <span class="hljs-string">'main.js'</span>,<br>        path: path.resolve(__dirname, <span class="hljs-string">'dist'</span>),<br>    &#125;,<br>    resolve: &#123;<br>        extensions: [<span class="hljs-string">".ts"</span>, <span class="hljs-string">".tsx"</span>, <span class="hljs-string">".js"</span>] //读取ts文件<br>    &#125;,<br>    module: &#123;<br>        rules: [<br>            &#123;<br>                <span class="hljs-built_in">test</span>: /\.vue$/,<br>                loader: <span class="hljs-string">'vue-loader'</span><br>            &#125;,<br>            &#123;<br>                <span class="hljs-built_in">test</span>: /\.tsx?$/, //新增规则<br>                loader: <span class="hljs-string">"ts-loader"</span><br>            &#125;<br>        ]<br>    &#125;,<br>    plugins: [<br>        new HtmlWebpackPlugin(), new VueLoaderPlugin()<br>    ]<br>&#125;;<br></code></pre></td></tr></table></figure></p><p>此时index.ts引入vue文件会报错</p><ol start="9"><li>在TS里引入vue</li></ol><p>创建shims-vue.d.ts</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">declare</span> module <span class="hljs-string">'*.vue'</span> &#123;<br>    import Vue from <span class="hljs-string">'vue'</span><br>    <span class="hljs-built_in">export</span> default Vue<br>&#125;<br></code></pre></td></tr></table></figure><ol start="10"><li>在vue里使用ts</li></ol><p>修改webpack.config.js<br>新增两个loader的options<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">module: &#123;<br>    rules: [<br>        &#123;<br>            <span class="hljs-built_in">test</span>: /\.vue$/,<br>            loader: <span class="hljs-string">'vue-loader'</span>,<br>            options: &#123;<br>                esModule: <span class="hljs-literal">true</span><br>            &#125;<br>        &#125;,<br>        &#123;<br>            <span class="hljs-built_in">test</span>: /\.tsx?$/,<br>            loader: <span class="hljs-string">"ts-loader"</span>,<br>            options: &#123;<br>                appendTsSuffixTo: [/\.vue$/]<br>            &#125;<br>        &#125;<br>    ]<br>&#125;,<br></code></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> TS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TS函数</title>
      <link href="/2020/01/10/TS%E5%87%BD%E6%95%B0/"/>
      <url>/2020/01/10/TS%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>函数:可以被调用的对象</p><h4 id="函数的几种写法"><a href="#函数的几种写法" class="headerlink" title="函数的几种写法"></a>函数的几种写法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs bash">//先写类型再赋值<br> <span class="hljs-built_in">type</span> F = &#123;<br>    (a: number, b: number): number<br>&#125;<br><span class="hljs-built_in">let</span> f: F = (a, b) =&gt; a + b<br><br><span class="hljs-built_in">type</span> F1 = (a: number, b: number) =&gt; number<br><span class="hljs-built_in">let</span> f1: F1 = (a, b) =&gt; a + b<br><br>interface F2 &#123;<br>    (a: number, b: number): number<br>&#125;<br><span class="hljs-built_in">let</span> f2: F2 = (a, b) =&gt; a + b<br><br><br>//先写函数，再获取类型<br>const f1 = <span class="hljs-keyword">function</span> (a: number, b: number): number &#123;<br>    <span class="hljs-built_in">return</span> a + b<br>&#125;<br><span class="hljs-built_in">type</span> F1 = typeof f1<br><br><span class="hljs-keyword">function</span> f2(a: number, b: number): number &#123;<br>    <span class="hljs-built_in">return</span> a + b<br>&#125;<br><span class="hljs-built_in">type</span> F2 = typeof f2<br><br>const f3 = (a: number, b: number): number =&gt; &#123;<br>    <span class="hljs-built_in">return</span> a + b<br>&#125;<br><span class="hljs-built_in">type</span> F3 = typeof f3<br></code></pre></td></tr></table></figure><h4 id="类型谓词"><a href="#类型谓词" class="headerlink" title="类型谓词"></a>类型谓词</h4><p>类型收窄</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">type</span> Person = &#123;<br>    name: string<br>&#125;<br><span class="hljs-built_in">type</span> Animal = &#123;<br><br>&#125;<br><span class="hljs-keyword">function</span> f1(a: Person | Animal) &#123;<br>    <span class="hljs-keyword">if</span> (isPerson(a)) &#123;<br>        a//类型是Person<br>    &#125;<br>&#125;<br><span class="hljs-keyword">function</span> isPerson(x: Person | Animal): x is Person &#123;<br>    <span class="hljs-built_in">return</span> <span class="hljs-string">'name'</span> <span class="hljs-keyword">in</span> x<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="可选参数"><a href="#可选参数" class="headerlink" title="可选参数"></a>可选参数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> addEventListener(<br>    eventType: string, fn: (e: Event, el: Element) =&gt; void, useCaptrue?: boolean<br>) &#123;<br>    <span class="hljs-keyword">if</span> (useCaptrue === undefined) &#123;<br>        useCaptrue = <span class="hljs-literal">false</span><br>    &#125;<br>    const element = &#123;&#125; as Element<br>    const event = &#123;&#125; as Event<br>    fn(event, element)<br>    console.log(event, fn, useCaptrue)<br><br>&#125;<br>addEventListener(<span class="hljs-string">'click'</span>, (e, el) =&gt; &#123; &#125;)<br></code></pre></td></tr></table></figure><h4 id="珂里化"><a href="#珂里化" class="headerlink" title="珂里化"></a>珂里化</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">const add = (a: number, b: number) =&gt; a + b<br><br>const createAdd = (a: number) =&gt; (b: number) =&gt; a + b<br><br>createAdd(1)(2)<br></code></pre></td></tr></table></figure><h4 id="重载-overload"><a href="#重载-overload" class="headerlink" title="重载(overload)"></a>重载(overload)</h4><p>同名的函数，参数不同（类型不同或者参数个数不同）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> add(n1: number, n2: number): number<br><span class="hljs-keyword">function</span> add(n1: string, n2: string): string<br><span class="hljs-keyword">function</span> add(n1, n2) &#123;<br>    <span class="hljs-built_in">return</span> n1 + n2<br>&#125;<br><br>add(1, 2)<br>add(<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>)<br>add(1, <span class="hljs-string">'2'</span>) //报错<br><br><span class="hljs-keyword">function</span> createDate(n: number): Date;<br><span class="hljs-keyword">function</span> createDate(y: number, m: number, d: number): Date;<br><span class="hljs-keyword">function</span> createDate(a: number, b?: number, c?: number): Date &#123;<br>    <span class="hljs-keyword">if</span> (a !== undefined &amp;&amp; b !== undefined &amp;&amp; c !== undefined) &#123;<br>        <span class="hljs-built_in">return</span> new Date(a, b, c)<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a !== undefined &amp;&amp; b === undefined &amp;&amp; c === undefined) &#123;<br>        <span class="hljs-built_in">return</span> new Date(a)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        throw new Error(<span class="hljs-string">'error'</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="指定函数的this"><a href="#指定函数的this" class="headerlink" title="指定函数的this"></a>指定函数的this</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface Human &#123;<br>    name: string<br>    age: number<br>&#125;<br><br><span class="hljs-keyword">function</span> fn(this: Human) &#123;<br>    console.log(this)<br>&#125;<br><br>fn.call(&#123; name: <span class="hljs-string">'tom'</span>, age: 18 &#125;) //需要call<br><br>fn() //报错<br></code></pre></td></tr></table></figure><h4 id="剩余参数"><a href="#剩余参数" class="headerlink" title="剩余参数"></a>剩余参数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> sum(...array: number[]) &#123;<br>    <span class="hljs-built_in">return</span> array.reduce((n, p) =&gt; n + p, 0)<br>&#125;<br>sum(1)<br>sum(1, 2)<br>sum(1, 2, 3)<br></code></pre></td></tr></table></figure><h4 id="展开参数"><a href="#展开参数" class="headerlink" title="展开参数"></a>展开参数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> sum(name: number, ...array: number[]) &#123;<br>    f(...array)<br>&#125;<br><span class="hljs-keyword">function</span> f(...array: number[]) &#123;<br>    console.log(array)<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="参数析构"><a href="#参数析构" class="headerlink" title="参数析构"></a>参数析构</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">type</span> Config = &#123;<br>    url: string,<br>    method: <span class="hljs-string">'GET'</span> | <span class="hljs-string">'POST'</span><br>    data: unknown,<br>    headers: unknown<br>&#125;<br><span class="hljs-keyword">function</span> ajax(&#123; url, method, ...rest &#125;: Config) &#123;<br>    console.log(url, method)<br>&#125;<br>//加默认值<br><span class="hljs-keyword">function</span> ajax(&#123; url, method, ...rest &#125;: Config = &#123; url: <span class="hljs-string">''</span>, method: <span class="hljs-string">'GET'</span> &#125; as Config) &#123;<br>    console.log(url, method)<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="类型推断"><a href="#类型推断" class="headerlink" title="类型推断"></a>类型推断</h4><p>TS会自己猜类型</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> add(n1: string, n2: string) &#123;<br>    <span class="hljs-built_in">return</span> n1 + n2<br>&#125;<br><br><span class="hljs-built_in">let</span> result = add(<span class="hljs-string">'tom'</span>, <span class="hljs-string">'jack'</span>).split(<span class="hljs-string">''</span>) //由于两个规定类型为string的参数相加为string,所以ts推断结果为string,拥有split方法<br></code></pre></td></tr></table></figure><h4 id="类型兼容"><a href="#类型兼容" class="headerlink" title="类型兼容"></a>类型兼容</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface Human &#123;<br>    name: string<br>    age: number<br>&#125;<br><br><span class="hljs-built_in">let</span> tom: Human = &#123; name: <span class="hljs-string">'tom'</span>, age: 18, gender: <span class="hljs-string">'f'</span> &#125;//直接赋值会报错<br>-----------------------<br><span class="hljs-built_in">let</span> temp = &#123; name: <span class="hljs-string">'tom'</span>, age: 18, gender: <span class="hljs-string">'f'</span> &#125; //使用中间变量,会触发TS的类型兼容<br><span class="hljs-built_in">let</span> tom: Human = temp<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TS类</title>
      <link href="/2020/01/09/TS%E7%B1%BB/"/>
      <url>/2020/01/09/TS%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<ol><li><p>写一个ts的类</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">class Human &#123;<br>    name: string<br>    age: number<br>    constructor(name: string, age: number) &#123;<br>        this.name = name<br>        this.age = age<br>    &#125;<br>    move(): void &#123;<br>        console.log(<span class="hljs-string">'run'</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-built_in">let</span> tom = new Human(<span class="hljs-string">'tom'</span>, 18)<br></code></pre></td></tr></table></figure></li><li><p>与interface的比较</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface People &#123;<br>    name: string<br>    age: number<br>    move(): void<br>&#125;<br><br><span class="hljs-built_in">let</span> jack:People = &#123;<br>    name: <span class="hljs-string">'jack'</span>,<br>    age: 18,<br>    move(): void &#123;<br>        console.log(<span class="hljs-string">'run'</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>类的属性(static)</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">class Human &#123;<br>    name: string<br>    age: number<br>    static xxx = 1 //在这里定义<br>    constructor(name: string, age: number) &#123;<br>        this.name = name<br>        this.age = age<br>    &#125;<br>    move(): void &#123;<br>        console.log(<span class="hljs-string">'run'</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-built_in">let</span> tom = new Human(<span class="hljs-string">'tom'</span>, 18)<br>console.log(Human.xxx) //应该这样使用<br></code></pre></td></tr></table></figure><ol start="4"><li>类的继承</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">class Animal &#123;<br>    kind: string<br>    constructor(kind: string) &#123;<br>        this.kind = kind<br>    &#125;<br>&#125;<br><br>class Human extends Animal &#123;<br>    name: string<br>    age: number<br>    static xxx = 1<br>    constructor(name: string, age: number, kind: string) &#123;<br>        super(kind) //执行super实际上是执行被父类的constructor<br>        this.name = name<br>        this.age = age<br>    &#125;<br>    move(): void &#123;<br>        console.log(<span class="hljs-string">'run'</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-built_in">let</span> tom = new Human(<span class="hljs-string">'tom'</span>, 18, <span class="hljs-string">'哺乳类'</span>)<br></code></pre></td></tr></table></figure><ol start="5"><li>私用属性private,共有属性public</li></ol><p>private不能外部调用,只能在类自身使用,可以想象成局部变量<br>public外部可以调用.(默认就是public,可以不加)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">class Human &#123;<br>    public name: string<br>    age: number<br>    private secret: string<br>    constructor(name: string, age: number) &#123;<br>        this.name = name<br>        this.age = age<br>        this.secret = <span class="hljs-string">'self'</span><br>    &#125;<br>    move(): void &#123;<br>        console.log(<span class="hljs-string">'run'</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-built_in">let</span> tom = new Human(<span class="hljs-string">'tom'</span>, 18)<br>console.log(tom.secret) //报错<br></code></pre></td></tr></table></figure><ol start="6"><li>protected保护</li></ol><p>只能在子类内使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs bash">class Animal &#123;<br>    kind: string<br>    protected both: string //定义<br>    constructor(kind: string) &#123;<br>        this.kind = kind<br>        <span class="hljs-keyword">if</span> (this.kind === <span class="hljs-string">'哺乳类'</span>) &#123;<br>            this.both = <span class="hljs-string">'胎生'</span><br>        &#125;<br>    &#125;<br>&#125;<br><br>class Human extends Animal &#123;<br>    name: string<br>    age: number<br>    static xxx = 1<br>    constructor(name: string, age: number, kind: string) &#123;<br>        super(kind) //执行super实际上是执行被父类的constructor<br>        this.name = name<br>        this.age = age<br>    &#125;<br>    move(): void &#123;<br>        console.log(<span class="hljs-string">'run'</span>)<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">say</span></span>() &#123;<br>        console.log(this.both) //在子类使用<br>    &#125;<br>&#125;<br><br><span class="hljs-built_in">let</span> tom = new Human(<span class="hljs-string">'tom'</span>, 18, <span class="hljs-string">'哺乳类'</span>)<br>tom.say()<br></code></pre></td></tr></table></figure><ol start="7"><li>访问器 get set</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">  class Human &#123;<br>    name: string<br>    private _age: number //首先把age变为私有属性<br>    get <span class="hljs-function"><span class="hljs-title">age</span></span>() &#123;//获取值,注意不能跟_age重名<br>        <span class="hljs-built_in">return</span> this._age<br>    &#125;<br>    <span class="hljs-built_in">set</span> age(value: number) &#123;//赋值,按照条件赋值<br>        <span class="hljs-keyword">if</span> (value &lt; 0) &#123;<br>            this._age = 0<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            this._age = value<br>        &#125;<br>    &#125;<br>    constructor(name: string, age = 18) &#123;<br>        this.name = name<br>        this.age = age<br>    &#125;<br>&#125;<br><br><span class="hljs-built_in">let</span> tom = new Human(<span class="hljs-string">'tom'</span>)<br>tom.age = -2<br>console.log(tom.age) //0<br></code></pre></td></tr></table></figure><ol start="8"><li>抽象类</li></ol><p>抽象类是子类的父类,但方法没有写完,不能直接实例化</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">abstract class Animal &#123;<br>       kind: string<br>       abstract say(): void //方法没有写完<br>   &#125;<br><br>   class Human extends Animal &#123;<br>       name: string<br>       age: number<br>       static xxx = 1<br>       constructor(name: string, age: number) &#123;<br>           super()<br>           this.name = name<br>           this.age = age<br>       &#125;<br>       say(): void &#123;//补充完整方法<br>           console.log(<span class="hljs-string">'hello'</span>)<br>       &#125;<br>   &#125;<br><br>   <span class="hljs-built_in">let</span> tom = new Human(<span class="hljs-string">'tom'</span>, 18)<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TS变量,枚举,接口</title>
      <link href="/2020/01/08/TS%E5%8F%98%E9%87%8F,%E6%9E%9A%E4%B8%BE,%E6%8E%A5%E5%8F%A3/"/>
      <url>/2020/01/08/TS%E5%8F%98%E9%87%8F,%E6%9E%9A%E4%B8%BE,%E6%8E%A5%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><p>跟JS一样</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> a:string = <span class="hljs-string">'s'</span><br><span class="hljs-built_in">let</span> b:number = 1<br><span class="hljs-built_in">let</span> c:boolean = <span class="hljs-literal">true</span><br><span class="hljs-built_in">let</span> d:object = &#123;&#125;<br><span class="hljs-built_in">let</span> e:null = null<br><span class="hljs-built_in">let</span> f:undefined = undefined<br><br>//any(任何类型)<br><br><span class="hljs-built_in">let</span> any1:any = 1<br><span class="hljs-built_in">let</span> any2:any = <span class="hljs-string">'b'</span><br>any1 = &#123;&#125;<br>any2 = <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h4 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h4><ol><li><p>不赋值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">enum Gender &#123;<br>        Man,<br>        Woman<br>    &#125;<br><br><span class="hljs-built_in">let</span> gender: Gender = Gender.Woman<br>console.log(gender) //1<br>gender = Gender.Man<br>console.log(gender) //0<br></code></pre></td></tr></table></figure></li><li><p>赋值</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">enum Gender &#123;<br>        Man = <span class="hljs-string">'Man'</span>,<br>        Woman = <span class="hljs-string">'Woman'</span><br>    &#125;<br><br><span class="hljs-built_in">let</span> gender: Gender = Gender.Woman<br>console.log(gender) //Woman<br>gender = Gender.Man<br>console.log(gender) //Man<br></code></pre></td></tr></table></figure><h4 id="void"><a href="#void" class="headerlink" title="void"></a>void</h4><p>函数没有返回值<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-keyword">function</span> <span class="hljs-built_in">test</span>():void&#123;<br>    console.log(1)<br>&#125;<br><br><span class="hljs-built_in">let</span> a:number = <span class="hljs-built_in">test</span>() //会报错<br></code></pre></td></tr></table></figure></p><h4 id="never"><a href="#never" class="headerlink" title="never"></a>never</h4><p>默认情况下null和undefined是所有类型的子类型.例如,null可以赋值给number类型的变量.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">type</span> A = string &amp; number<br>//报错never<br></code></pre></td></tr></table></figure><h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><p>描述一个对象必须有什么属性(方法)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface Shape &#123;<br>    head: string,<br>    body: string<br>&#125;<br><br>interface Human &#123;<br>    name: string<br>    age: number,<br>    shape: Shape,<br>    say(word: string): void<br>&#125;<br><br><span class="hljs-built_in">let</span> tom: Human = &#123;<br>    name: <span class="hljs-string">'tom'</span>,<br>    age: 28,<br>    shape: &#123;<br>        head: <span class="hljs-string">'头'</span>,<br>        body: <span class="hljs-string">'身体'</span><br>    &#125;,<br>    say(word: string) &#123;<br>        console.log(word)<br>    &#125;<br><br>&#125;<br>tom.say(<span class="hljs-string">'hello'</span>)<br></code></pre></td></tr></table></figure><ol><li>readonly </li></ol><p>只读</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface Human &#123;<br>    <span class="hljs-built_in">readonly</span> name: string<br>    age: number<br></code></pre></td></tr></table></figure><ol start="2"><li>可选属性</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface Human &#123;<br>    <span class="hljs-built_in">readonly</span> name: string<br>    age: number,<br>    like?:Array&lt;string&gt;<br></code></pre></td></tr></table></figure><ol start="3"><li>假如额外传入参数</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface Config &#123;<br>      color?: string,<br>      width?: number<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> created(config: Config): void &#123;<br>      console.log(config)<br>  &#125;<br><br>  created(&#123;<br>      age: <span class="hljs-string">'red'</span><br>  &#125;)<br><br>  //会报错<br></code></pre></td></tr></table></figure><p>要使用字符串索引签名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface Config &#123;<br>        color?: string,<br>        width?: number,<br>        [key: string]: any  //添加这一行,意思是key为字符串类型,value为any类型,key<br>    &#125;<br><br>    <span class="hljs-keyword">function</span> created(config: Config): void &#123;<br>        console.log(config)<br>    &#125;<br><br>    created(&#123;<br>        age: <span class="hljs-string">'red'</span><br>    &#125;)<br></code></pre></td></tr></table></figure><ol start="4"><li>使用接口描述一个函数</li></ol><p>注意,接口定义参数名只是一个顺序,跟实际函数变量名没有关系</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface Operation &#123;<br>    (number1: number, number2: number): number<br>&#125;<br><br><span class="hljs-built_in">let</span> add: Operation = <span class="hljs-keyword">function</span> (n1: number, n2: number): number &#123;<br>    <span class="hljs-built_in">return</span> n1 + n2<br>&#125;<br><span class="hljs-built_in">let</span> result: number = add(1, 2)<br>console.log(result)<br></code></pre></td></tr></table></figure><ol start="5"><li>接口继承</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface Animal &#123;<br>    move(): void<br>&#125;<br><br>interface Human extends Animal &#123;<br>    name: string<br>    age: number<br>&#125;<br><br><span class="hljs-built_in">let</span> tom: Human = &#123;<br>    age: 18,<br>    name: <span class="hljs-string">'tom'</span>,<br>    <span class="hljs-function"><span class="hljs-title">move</span></span>() &#123;<br>        console.log(<span class="hljs-string">'move'</span>)<br>    &#125;<br>&#125;<br><br>tom.move()<br></code></pre></td></tr></table></figure><p>一个接口可以继承多个接口<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface Animal &#123;<br>    move(): void<br>&#125;<br><br>interface 有机物 &#123;<br>    c: <span class="hljs-literal">true</span><br>    h: <span class="hljs-literal">true</span><br>    o: <span class="hljs-literal">true</span><br>&#125;<br><br>interface Human extends Animal, 有机物 &#123;<br>    name: string<br>    age: number<br>&#125;<br><br><span class="hljs-built_in">let</span> tom: Human = &#123;<br>    c: <span class="hljs-literal">true</span>,<br>    h: <span class="hljs-literal">true</span>,<br>    o: <span class="hljs-literal">true</span>,<br>    age: 18,<br>    name: <span class="hljs-string">'tom'</span>,<br>    <span class="hljs-function"><span class="hljs-title">move</span></span>() &#123;<br>        console.log(<span class="hljs-string">'move'</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> TS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用TS写一个计算器</title>
      <link href="/2020/01/07/%E4%BD%BF%E7%94%A8TS%E6%93%8D%E4%BD%9CDOM/"/>
      <url>/2020/01/07/%E4%BD%BF%E7%94%A8TS%E6%93%8D%E4%BD%9CDOM/</url>
      
        <content type="html"><![CDATA[<ol><li>将TS热更新为JS</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">tsc -w demo.ts<br></code></pre></td></tr></table></figure><p>在html里引入demo.js</p><ol start="2"><li>主要代码</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<br><br>    class Calculator &#123;<br>        public container: HTMLDivElement<br>        private output: HTMLDivElement<br>        private span: HTMLSpanElement<br>        public n1: string = null<br>        public n2: string = null<br>        public result: string = null<br>        public operator: string;<br>        public keys: Array&lt;Array&lt;string&gt;&gt; = [<br>            [<span class="hljs-string">'clear'</span>, <span class="hljs-string">'÷'</span>],<br>            [<span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'X'</span>],<br>            [<span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'-'</span>],<br>            [<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'+'</span>],<br>            [<span class="hljs-string">'0'</span>, <span class="hljs-string">'.'</span>, <span class="hljs-string">'='</span>]<br>        ]<br>        <span class="hljs-function"><span class="hljs-title">constructor</span></span>() &#123;<br>            this.createContainer()<br>            this.createOutput()<br>            this.createButtons()<br>            this.bindEvents()<br>        &#125;<br>        createButton(text: string, container: HTMLElement, className: string) &#123;<br>            const button: HTMLButtonElement = document.createElement(<span class="hljs-string">'button'</span>)<br>            button.textContent = text<br>            button.classList.add(<span class="hljs-string">'button'</span>)<br>            <span class="hljs-keyword">if</span> (className) &#123;<br>                button.classList.add(className)<br>            &#125;<br>            container.appendChild(button)<br>            <span class="hljs-built_in">return</span> button<br>        &#125;<br>        <span class="hljs-function"><span class="hljs-title">createButtons</span></span>() &#123;<br>            this.keys.forEach((textList: Array&lt;string&gt;) =&gt; &#123;<br>                const div: HTMLDivElement = document.createElement(<span class="hljs-string">'div'</span>)<br>                div.classList.add(<span class="hljs-string">'row'</span>)<br>                textList.forEach((text: string) =&gt; &#123;<br>                    this.createButton(text, div, `text-<span class="hljs-variable">$&#123;text&#125;</span>`)<br>                &#125;)<br>                this.container.appendChild(div)<br>            &#125;)<br>        &#125;<br>        <span class="hljs-function"><span class="hljs-title">createContainer</span></span>() &#123;<br>            const container: HTMLDivElement = document.createElement(<span class="hljs-string">'div'</span>)<br>            container.classList.add(<span class="hljs-string">'calculator'</span>)<br>            document.body.appendChild(container)<br>            this.container = container<br>        &#125;<br>        <span class="hljs-function"><span class="hljs-title">createOutput</span></span>() &#123;<br>            const output: HTMLDivElement = document.createElement(<span class="hljs-string">'div'</span>)<br>            output.classList.add(<span class="hljs-string">'output'</span>)<br>            const span: HTMLSpanElement = document.createElement(<span class="hljs-string">'span'</span>)<br>            span.textContent = <span class="hljs-string">'0'</span><br>            output.appendChild(span)<br>            this.container.appendChild(output)<br>            this.output = output<br>            this.span = span<br>        &#125;<br>        <span class="hljs-function"><span class="hljs-title">bindEvents</span></span>() &#123;<br>            this.container.addEventListener(<span class="hljs-string">'click'</span>, (e) =&gt; &#123;<br>                <span class="hljs-keyword">if</span> (e.target instanceof HTMLButtonElement) &#123;<br>                    const button: HTMLButtonElement = e.target<br>                    const text: string = button.textContent<br>                    this.update(text)<br>                &#125;<br>            &#125;)<br>        &#125;<br>        update(text: string) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-string">'0123456789.'</span>.indexOf(text) &gt;= 0) &#123;<br>                this.updateNumbers(text)<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'+-X÷'</span>.indexOf(text) &gt;= 0) &#123;<br>                <span class="hljs-keyword">if</span> (this.n1 === null) &#123;<br>                    this.n1 = this.result<br>                &#125;<br>                this.operator = text<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (text === <span class="hljs-string">'='</span>) &#123;<br>                this.updateResult()<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (text === <span class="hljs-string">'clear'</span>) &#123;<br>                this.n1 = null<br>                this.n2 = null<br>                this.result = null<br>                this.operator = null<br>                this.span.textContent = <span class="hljs-string">'0'</span><br>            &#125;<br>        &#125;<br>        updateNumbers(text: string) &#123;<br>            <span class="hljs-keyword">if</span> (this.operator) &#123;<br>                this.updateNumber(<span class="hljs-string">'n2'</span>, text)<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                this.updateNumber(<span class="hljs-string">'n1'</span>, text)<br>            &#125;<br>        &#125;<br>        updateNumber(name: string, text: string) &#123;<br>            <span class="hljs-keyword">if</span> (this[name]) &#123;<br>                this[name] += text<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                this[name] = text<br>            &#125;<br>            this.span.textContent = this[name].toString()<br>        &#125;<br>        <span class="hljs-function"><span class="hljs-title">updateResult</span></span>() &#123;<br>            <span class="hljs-built_in">let</span> result: any;<br>            <span class="hljs-built_in">let</span> n1: number = parseFloat(this.n1)<br>            <span class="hljs-built_in">let</span> n2: number = parseFloat(this.n2)<br>            switch (this.operator) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">'+'</span>:<br>                    result = n1 + n2<br>                    <span class="hljs-built_in">break</span><br>                <span class="hljs-keyword">case</span> <span class="hljs-string">'-'</span>:<br>                    result = n1 - n2<br>                    <span class="hljs-built_in">break</span><br>                <span class="hljs-keyword">case</span> <span class="hljs-string">'X'</span>:<br>                    result = n1 * n2<br>                    <span class="hljs-built_in">break</span><br>                <span class="hljs-keyword">case</span> <span class="hljs-string">'÷'</span>:<br>                    result = n1 / n2<br>                    <span class="hljs-built_in">break</span><br>            &#125;<br>            <span class="hljs-keyword">if</span> (n2 === 0) &#123;<br>                result = <span class="hljs-string">'不是数字'</span><br>            &#125;<br>            this.span.textContent = result<br>            this.n1 = null<br>            this.n2 = null<br>            this.result = result<br>        &#125;<br>    &#125;<br><br>    new Calculator()<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScript基础</title>
      <link href="/2019/12/17/TS/"/>
      <url>/2019/12/17/TS/</url>
      
        <content type="html"><![CDATA[<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install typescript -g //安装ts<br>npm install ts-node@7.0.0 -g //ts-node,让node可以运行ts<br></code></pre></td></tr></table></figure><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><ol start="0"><li>先创建好ts文件</li><li>根目录下创建文件 .vscode</li><li><p>.vscode下创建文件launch.json</p></li><li><p>复制如下代码:</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<br>    <span class="hljs-string">"configurations"</span>: [<br>        &#123;<br>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"ts-node"</span>,<br>        <span class="hljs-string">"type"</span>: <span class="hljs-string">"node"</span>,<br>        <span class="hljs-string">"request"</span>: <span class="hljs-string">"launch"</span>,<br>        <span class="hljs-string">"program"</span>: <span class="hljs-string">"C:/Users/Administrator/AppData/Roaming/npm/node_modules/ts-node/dist/bin.js"</span>,//这个是ts-node的安装路径<br>        <span class="hljs-string">"args"</span>: [<span class="hljs-string">"<span class="hljs-variable">$&#123;relativeFile&#125;</span>"</span>],<br>        <span class="hljs-string">"cwd"</span>: <span class="hljs-string">"<span class="hljs-variable">$&#123;workspaceRoot&#125;</span>"</span>,<br>        <span class="hljs-string">"protocol"</span>: <span class="hljs-string">"inspector"</span><br>        &#125;<br>    ]<br>&#125;<br></code></pre></td></tr></table></figure><ol start="4"><li>点击vscode工具栏调试(ctrl+shift+D)</li><li>选择ts-node</li><li>选好之前创建的ts文件,开启调试</li></ol><h4 id="尝试用接口和类写一个简单的函数"><a href="#尝试用接口和类写一个简单的函数" class="headerlink" title="尝试用接口和类写一个简单的函数"></a>尝试用接口和类写一个简单的函数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">class Student &#123;//类<br>    fullName: string;<br>    constructor(public firstName, public middleInitial, public lastName) &#123;<br>        this.fullName = firstName + <span class="hljs-string">" "</span> + middleInitial + <span class="hljs-string">" "</span> + lastName;<br>    &#125;<br>&#125;<br><br>interface Person &#123;//接口<br>    firstName: string;<br>    lastName: string;<br>&#125;<br><br><span class="hljs-keyword">function</span> greeter(person: Person) &#123;<br>    <span class="hljs-built_in">return</span> <span class="hljs-string">"Hello, "</span> + person.firstName + <span class="hljs-string">" "</span> + person.lastName;<br>&#125;<br><br>const user = new Student(<span class="hljs-string">"Jane"</span>, <span class="hljs-string">"M."</span>, <span class="hljs-string">"User"</span>);<br><br>console.log(greeter(user))<br></code></pre></td></tr></table></figure><p>编译之后</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">var Student = /** @class */ (<span class="hljs-function"><span class="hljs-title">function</span></span> () &#123;<br>    <span class="hljs-keyword">function</span> Student(firstName, middleInitial, lastName) &#123;<br>        this.firstName = firstName;<br>        this.middleInitial = middleInitial;<br>        this.lastName = lastName;<br>        this.fullName = firstName + <span class="hljs-string">" "</span> + middleInitial + <span class="hljs-string">" "</span> + lastName;<br>    &#125;<br>    <span class="hljs-built_in">return</span> Student;<br>&#125;());<br><span class="hljs-keyword">function</span> greeter(person) &#123;<br>    <span class="hljs-built_in">return</span> <span class="hljs-string">"Hello, "</span> + person.firstName + <span class="hljs-string">" "</span> + person.lastName;<br>&#125;<br>var user = new Student(<span class="hljs-string">"Jane"</span>, <span class="hljs-string">"M."</span>, <span class="hljs-string">"User"</span>);<br>console.log(greeter(user));<br></code></pre></td></tr></table></figure><h4 id="写一个简单的加法命令行"><a href="#写一个简单的加法命令行" class="headerlink" title="写一个简单的加法命令行"></a>写一个简单的加法命令行</h4><ol><li><p>在根目录下创建package.json</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm init -y<br></code></pre></td></tr></table></figure></li><li><p>安装所需npm包</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install @types/node<br></code></pre></td></tr></table></figure><ol start="3"><li><p>输入代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#!/usr/bin/env ts-node //这句话在写命令行的时候一定要加上</span><br>const a: number = Number(process.argv[2])<br>const b: number = Number(process.argv[3])<br><br><span class="hljs-keyword">if</span> (Number.isNaN(a) || Number.isNaN(b)) &#123;<br>    console.log(<span class="hljs-string">'只接受整数类型'</span>)<br>    process.exit(1)<br>&#125;<br>console.log(a + b)<br>process.exit(0)<br></code></pre></td></tr></table></figure></li><li><p>运行命令行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">./add.ts 1 2<br><br>/////////////输出<br></code></pre></td></tr></table></figure></li></ol><h4 id="写一个族谱"><a href="#写一个族谱" class="headerlink" title="写一个族谱"></a>写一个族谱</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<br>    class Person &#123;<br>        public children: Person[] = []<br>        constructor(public name: string) &#123; &#125;<br>        addChild(child: Person): void &#123;<br>            this.children.push(child)<br>        &#125;<br>        introduceFamily(n?: number): void &#123;<br>            n = n ? n : 1<br>            <span class="hljs-built_in">let</span> prefix = <span class="hljs-string">'----'</span>.repeat(n - 1)<br>            console.log(`<span class="hljs-variable">$&#123;prefix&#125;</span><span class="hljs-variable">$&#123;this.name&#125;</span>`)<br>            this.children.forEach((child) =&gt; &#123;<br>                child.introduceFamily(n + 1)<br>            &#125;)<br>        &#125;<br>    &#125;<br><br>    const grandpa = new Person(<span class="hljs-string">'爷爷'</span>)<br>    const child1 = new Person(<span class="hljs-string">'大儿子'</span>)<br>    const child2 = new Person(<span class="hljs-string">'二儿子'</span>)<br>    const person11 = new Person(<span class="hljs-string">'大孙子'</span>)<br>    const person12 = new Person(<span class="hljs-string">'二孙子'</span>)<br>    const person21 = new Person(<span class="hljs-string">'三孙子'</span>)<br>    const person22 = new Person(<span class="hljs-string">'四孙子'</span>)<br>    grandpa.addChild(child1)<br>    grandpa.addChild(child2)<br>    child1.addChild(person11)<br>    child1.addChild(person12)<br>    child2.addChild(person21)<br>    child2.addChild(person22)<br><br>    grandpa.introduceFamily()<br>&#125;<br><br><br>///输出<br>爷爷<br>----大儿子<br>--------大孙子<br>--------二孙子<br>----二儿子<br>--------三孙子<br>--------四孙子<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>css继承</title>
      <link href="/2019/07/31/css%E7%BB%A7%E6%89%BF/"/>
      <url>/2019/07/31/css%E7%BB%A7%E6%89%BF/</url>
      
        <content type="html"><![CDATA[<h3 id="无继承性的属性"><a href="#无继承性的属性" class="headerlink" title="无继承性的属性"></a>无继承性的属性</h3><ol><li><p>display：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">规定元素应该生成的框的类型<br></code></pre></td></tr></table></figure></li><li><p>文本属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">vertical-align：垂直文本对齐<br><br>text-decoration：规定添加到文本的装饰<br><br>text-shadow：文本阴影效果<br><br>white-space：空白符的处理<br><br>unicode-bidi：设置文本的方向<br></code></pre></td></tr></table></figure></li><li><p>盒子模型的属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">width、height、margin 、margin-top、margin-right、margin-bottom、margin-left、border、border-style、border-top-style、border-right-style、border-bottom-style、border-left-style、border-width、border-top-width、border-right-right、border-bottom-width、border-left-width、border-color、border-top-color、border-right-color、border-bottom-color、border-left-color、border-top、border-right、border-bottom、border-left、padding、padding-top、padding-right、padding-bottom、padding-left<br></code></pre></td></tr></table></figure></li><li><p>背景属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">background、background-color、background-image、background-repeat、background-position、background-attachment<br></code></pre></td></tr></table></figure></li><li><p>定位属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">float</span>、clear、position、top、right、bottom、left、min-width、min-height、max-width、max-height、overflow、clip、z-index<br></code></pre></td></tr></table></figure></li><li><p>生成内容属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">content、counter-reset、counter-increment<br></code></pre></td></tr></table></figure></li><li><p>轮廓样式属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">outline-style、outline-width、outline-color、outline<br></code></pre></td></tr></table></figure></li><li><p>页面样式属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">size、page-break-before、page-break-after<br></code></pre></td></tr></table></figure></li><li><p>声音样式属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pause-before、pause-after、pause、cue-before、cue-after、cue、play-during<br></code></pre></td></tr></table></figure></li></ol><h3 id="有继承性的属性"><a href="#有继承性的属性" class="headerlink" title="有继承性的属性"></a>有继承性的属性</h3><ol><li><p>字体系列属性</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">font：组合字体<br><br>font-family：规定元素的字体系列<br><br>font-weight：设置字体的粗细<br><br>font-size：设置字体的尺寸<br><br>font-style：定义字体的风格<br><br>font-variant：设置小型大写字母的字体显示文本，这意味着所有的小写字母均会被转换为大写，但是所有使用小型大写字体的字母与其余文本相比，其字体尺寸更小。<br><br>font-stretch：对当前的 font-family 进行伸缩变形。所有主流浏览器都不支持。<br><br>font-size-adjust：为某个元素规定一个 aspect 值，这样就可以保持首选字体的 x-height。<br></code></pre></td></tr></table></figure></li><li><p>文本系列属性</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">text-indent：文本缩进<br><br>text-align：文本水平对齐<br><br>line-height：行高<br><br>word-spacing：增加或减少单词间的空白（即字间隔）<br><br>letter-spacing：增加或减少字符间的空白（字符间距）<br><br>text-transform：控制文本大小写<br><br>direction：规定文本的书写方向<br><br>color：文本颜色<br></code></pre></td></tr></table></figure></li><li><p>元素可见性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">visibility<br></code></pre></td></tr></table></figure></li><li><p>表格布局属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">caption-side、border-collapse、border-spacing、empty-cells、table-layout<br></code></pre></td></tr></table></figure></li><li><p>列表布局属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">list-style-type、list-style-image、list-style-position、list-style<br></code></pre></td></tr></table></figure></li><li><p>生成内容属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">quotes<br></code></pre></td></tr></table></figure></li><li><p>光标属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cursor<br></code></pre></td></tr></table></figure></li><li><p>页面样式属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">page、page-break-inside、windows、orphans<br></code></pre></td></tr></table></figure></li><li><p>声音样式属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">speak、speak-punctuation、speak-numeral、speak-header、speech-rate、volume、voice-family、pitch、pitch-range、stress、richness、、azimuth、elevation<br></code></pre></td></tr></table></figure></li></ol><h3 id="所有元素可以继承的属性"><a href="#所有元素可以继承的属性" class="headerlink" title="所有元素可以继承的属性"></a>所有元素可以继承的属性</h3><ol><li><p>元素可见性：visibility</p></li><li><p>光标属性：cursor</p></li></ol><h3 id="内联元素可以继承的属性"><a href="#内联元素可以继承的属性" class="headerlink" title="内联元素可以继承的属性"></a>内联元素可以继承的属性</h3><ol><li><p>字体系列属性</p></li><li><p>除text-indent、text-align之外的文本系列属性</p></li></ol><h3 id="块级元素可以继承的属性"><a href="#块级元素可以继承的属性" class="headerlink" title="块级元素可以继承的属性"></a>块级元素可以继承的属性</h3><ol><li>text-indent、text-align</li></ol>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>css3伪类</title>
      <link href="/2019/07/31/css3%E4%BC%AA%E7%B1%BB/"/>
      <url>/2019/07/31/css3%E4%BC%AA%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h3 id="target-选择页面局部"><a href="#target-选择页面局部" class="headerlink" title=":target 选择页面局部"></a>:target 选择页面局部</h3><p>假如锚点与页面的hash匹配(#),那么对应元素可用:target定义样式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;h2 id=<span class="hljs-string">"rotnruin"</span>&gt;Rot &amp;amp; Ruin&lt;/h2&gt;<br>&lt;h2 id=<span class="hljs-string">"romero"</span>&gt;Romero Zombies&lt;/h2&gt;<br>&lt;ul&gt;<br>    &lt;li&gt;&lt;a href=<span class="hljs-string">"#rotnruin"</span>&gt;Rot &amp;amp; Ruin&lt;/a&gt;&lt;/li&gt;<br>    &lt;li&gt;&lt;a href=<span class="hljs-string">"#romero"</span>&gt;Romero Zombies&lt;/a&gt;&lt;/li&gt;<br>    ...<br>&lt;/ul&gt;<br><br>h2:target &#123;<br>    background: rgb(125,104,99);<br>    border: 0;<br>    color: rgb(255, 255, 255);<br>    padding-left: 10px;<br>&#125;<br><br>//如果此时点击href=<span class="hljs-string">"#romero"</span>的a标签,那么对应的h2会高亮.<br></code></pre></td></tr></table></figure><h3 id="not-过滤掉不符合的元素"><a href="#not-过滤掉不符合的元素" class="headerlink" title=":not 过滤掉不符合的元素"></a>:not 过滤掉不符合的元素</h3><p>:not(x) x可以应用几乎所有选择器的语法<br>:not可搭配其他伪类使用,如p:not(:empty)选择非空元素<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;p id=<span class="hljs-string">"p1"</span>&gt;aaa&lt;/p&gt;<br>&lt;p id=<span class="hljs-string">"p2"</span>&gt;bbbb&lt;/p&gt;<br>&lt;p id=<span class="hljs-string">"p3"</span>&gt;ccccc&lt;/p&gt;<br>&lt;p id=<span class="hljs-string">"p4"</span>&gt;dddddd&lt;/p&gt;<br><br>p:not(<span class="hljs-comment">#p1):not(#p3) &#123;color: red;&#125;</span><br></code></pre></td></tr></table></figure></p><h3 id="根据索引选择元素"><a href="#根据索引选择元素" class="headerlink" title="根据索引选择元素"></a>根据索引选择元素</h3><p>索引相对所有同级兄弟元素计算的,而非特定类型</p><h4 id="first-child-和-last-child"><a href="#first-child-和-last-child" class="headerlink" title=":first-child 和 :last-child"></a>:first-child 和 :last-child</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div&gt;<br>    &lt;h1&gt;Hi&lt;/h1&gt;<br>    &lt;h2&gt;Apple&lt;/h2&gt;<br>    &lt;h2&gt;Banana&lt;/h2&gt;<br>    &lt;h2&gt;ApplePen&lt;/h2&gt;<br>    &lt;h2&gt;Pen&lt;/h2&gt;<br>&lt;/div&gt;<br><br>h1:first-child &#123;&#125; /*Hi*/<br>h2:first-child &#123;&#125; /*匹配不到*/<br>h2:last-child &#123;&#125; /*Pen*/<br></code></pre></td></tr></table></figure><h4 id="nth-child"><a href="#nth-child" class="headerlink" title=":nth-child()"></a>:nth-child()</h4><p>接收单一参数,可以是以下值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">odd 奇数<br>even 偶数<br>n 第n个<br>An+B A为整数,n从0开始算,B为整数,计算结果小于1的忽略<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">li:nth-child(3n) //3 6 9 12<br>li:nth-child(3n+1) //4 7 10 13<br>li:nth-child(-3n+1) //1<br>li:nth-child(-n+5) //5 4 3 2 1<br></code></pre></td></tr></table></figure><h4 id="nth-last-child"><a href="#nth-last-child" class="headerlink" title=":nth-last-child()"></a>:nth-last-child()</h4><p>同上,但从最后一个元素开始反向计算</p><h4 id="only-child"><a href="#only-child" class="headerlink" title=":only-child"></a>:only-child</h4><p>匹配相对于父元素类型唯一的子元素</p><h4 id="empty"><a href="#empty" class="headerlink" title=":empty"></a>:empty</h4><p>匹配空的元素,假如有空格,则不匹配.</p><h3 id="根据索引选择特殊类型的元素"><a href="#根据索引选择特殊类型的元素" class="headerlink" title="根据索引选择特殊类型的元素"></a>根据索引选择特殊类型的元素</h3><p>:first-of-type<br>:last-of-type<br>:only-of-type<br>:nth-of-type()<br>:nth-last-of-type()</p><p>基本用法和 *-child 一样</p><p>和 *-child 不同的是， 索引只针对选择器指定的类型，而非同级的所有兄弟元素</p><h3 id="表单元素"><a href="#表单元素" class="headerlink" title="表单元素"></a>表单元素</h3><h4 id="enabled-和-disabled"><a href="#enabled-和-disabled" class="headerlink" title=":enabled 和 :disabled"></a>:enabled 和 :disabled</h4><p>匹配元素是否有disabled属性</p><h4 id="required-和-optional"><a href="#required-和-optional" class="headerlink" title=":required 和 :optional"></a>:required 和 :optional</h4><p>匹配元素是否有required属性</p><h4 id="checkd"><a href="#checkd" class="headerlink" title=":checkd"></a>:checkd</h4><p>只作用于radio 和 checkbox</p><h4 id="in-range-和-out-of-range"><a href="#in-range-和-out-of-range" class="headerlink" title=":in-range 和 :out-of-range"></a>:in-range 和 :out-of-range</h4><p>作用于type = range/number/date的input</p><h4 id="valid-和-invalid"><a href="#valid-和-invalid" class="headerlink" title=":valid 和 :invalid"></a>:valid 和 :invalid</h4><p>依赖于 input 的 type类型 和 pattern约束,判断是否校验通过<br>可以组合使用,如 input:focus:invalid</p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>移动端开发的几个常见问题</title>
      <link href="/2019/07/29/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91%E7%9A%84%E5%87%A0%E4%B8%AA%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
      <url>/2019/07/29/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91%E7%9A%84%E5%87%A0%E4%B8%AA%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h3 id="移动端适配"><a href="#移动端适配" class="headerlink" title="移动端适配"></a>移动端适配</h3><p>原理: 动态 rem,淘宝 flexilble<br>设备像素比(dpr) ＝ 物理像素 / 设备独立像素<br>window.devicePixelRatio 获取到当前设备的 dpr<br>在 html 上加上 data-dpr 值,通过 css 媒体查询<br>flexible 实际上就是能过 JS 来动态改写 meta 标签,动态改变 html data-dpr 属性,动态改变 rem<br>使用 px2rem 把设计搞的 px 改成 rem<br><a href="https://github.com/amfe/article/issues/17" target="_blank" rel="noopener">可查看官方文档</a><br>解决方案:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;meta name=<span class="hljs-string">"flexible"</span> content=<span class="hljs-string">"initial-dpr=2"</span> /&gt;<br>&lt;script src=<span class="hljs-string">"http://g.tbcdn.cn/mtb/lib-flexible/0.3.4/??flexible_css.js,flexible.js"</span>&gt;&lt;/script&gt;<br></code></pre></td></tr></table></figure><p><a href="https://www.w3cplus.com/mobile/vw-layout-in-vue.html" target="_blank" rel="noopener">在 vue 使用 vw 实现适配</a></p><h3 id="0-5px-的-border"><a href="#0-5px-的-border" class="headerlink" title="0.5px 的 border"></a>0.5px 的 border</h3><p>原因: 部分浏览器不支持低于 1px 的 border</p><p>解决方案 1 : 使用 css3 box-shadow</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">.box-shadow-1px &#123;<br>box-shadow: inset 0px -1px 1px -1px <span class="hljs-comment">#c8c7cc;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>解决方案 2: 利用 css3 transform scale(0.5)</p><p>创建伪元素,然后相对定位,transform scale(0.5)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">.div&#123;<br>    position:relative;<br>&#125;<br><br>&amp;::before&#123;<br>    content: <span class="hljs-string">' '</span>;<br>    display:blocl;<br>    transform:scale(0.5);<br>    position:absolute;<br>    border:1px solid <span class="hljs-comment">#333;</span><br>    top:-50%;<br>    right:-50%;<br>    bottom:-50%;<br>    left:-50%;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="300ms-延迟"><a href="#300ms-延迟" class="headerlink" title="300ms 延迟"></a>300ms 延迟</h3><p>原因:300ms 延迟主要是因为双击缩放/双击滚动,浏览器双击会缩放到原始比例,当进行正常点击的时候,浏览器会延迟 300ms,判断用户是否再次点击屏幕.</p><p>解决方案 1: 通过 meta vp,设置用户不可缩放<br>缺点:禁用缩放会损害移动端网页的可用性和可访问性,safari 也不支持.例如:可能无法放大网页中的一张图片或一段字体较小的文字.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>&lt;meta name=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"</span> /&gt;<br></code></pre></td></tr></table></figure><p>解决方案 2:视窗设置为设备宽度<br>原理:原始尺寸时禁用双击缩放,但是用户可自行放大.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>&lt;meta name=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width"</span>&gt;<br></code></pre></td></tr></table></figure><p>解决方案 3 :<a href="https://github.com/ftlabs/fastclick" target="_blank" rel="noopener">FastClick</a><br>移动端事件触发顺序,当用户点击一个元素,会经过 touch start,touch move,touch end,click.<br>原理:fastclick 当检测到 touch end 时,通过 dom 自定义事件模拟一个 click 事件,并把浏览器自身的 300ms 之后的 click 事件屏蔽.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">window.addEventListener( <span class="hljs-string">"load"</span>, <span class="hljs-function"><span class="hljs-title">function</span></span>() &#123;<br>    FastClick.attach( document.body ); // 直接绑定到 &lt;body&gt; 上可以确保整个应用都能受益<br>&#125;, <span class="hljs-literal">false</span> );<br></code></pre></td></tr></table></figure><p>解决方案 4 :touch-action 对 mouse,touch,stylus 进行统一处理.但是现阶段兼容性不好.<br>原理:CCS3 属性,默认是 auto,当设置成 none 时,关闭用户代理的行为(包括但不限于双击缩放)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">.div&#123;<br>    touch-action :none<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="点透现象"><a href="#点透现象" class="headerlink" title="点透现象"></a>点透现象</h3><p>当 A 的 z-index 大于 B,A 在 B 之上,A 触发 touch,后立即消失,B 绑定 click 事件.</p><p>原因:当用户触碰屏幕时,生成两个事件,touch 与 click,A 在 touch 后消失,但有 300ms 的延迟,所以在 B 上会触发 clck 事件.</p><p>解决方案 1: 隐藏蒙层的执行 300ms 延迟的方法</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">$(<span class="hljs-string">"#id"</span>).on(<span class="hljs-string">'tap'</span>,<span class="hljs-keyword">function</span>(ev)&#123;<br>setTimeout(<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>$(<span class="hljs-string">"#id"</span>).hide();<br>&#125;,320)<br>&#125;)<br></code></pre></td></tr></table></figure><p>解决方案 2: FastClick</p><p>解决方案 3: 使用 touchend 并阻止默认行为</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">$(<span class="hljs-string">"#id"</span>).on(<span class="hljs-string">"touchend"</span>, <span class="hljs-keyword">function</span> (event) &#123;<br>    //很多处理比如隐藏什么的<br>    event.preventDefault();<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="移动端-meta-标签"><a href="#移动端-meta-标签" class="headerlink" title="移动端 meta 标签"></a>移动端 meta 标签</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;meta name=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"</span> &gt;<br><br>&lt;!--2:忽略将数字变为电话号码--&gt;<br>&lt;meta  name=<span class="hljs-string">"format-detection"</span> content=<span class="hljs-string">"telephone=no"</span>&gt;<br><br>&lt;!--3:忽略识别邮箱--&gt;<br>&lt;meta name=<span class="hljs-string">"format-detection"</span> content=<span class="hljs-string">"email=no"</span> /&gt;<br><br>&lt;!--4:IOS中Safari允许全屏浏览--&gt;<br>&lt;meta name=<span class="hljs-string">"apple-mobile-web-app-capable"</span> content=<span class="hljs-string">"yes"</span> &gt;<br></code></pre></td></tr></table></figure><h3 id="固定定位布局-键盘挡住输入框内容"><a href="#固定定位布局-键盘挡住输入框内容" class="headerlink" title="固定定位布局 键盘挡住输入框内容"></a>固定定位布局 键盘挡住输入框内容</h3><ol><li>通过绑定窗口改变事件,监听键盘的弹出。然后去改变固定定位元素的位置。默认键盘的宽度应该是页面的 2 分之一,所以我们位移的距离改成键盘的二分之一就可以</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">window.onresize = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    //$(<span class="hljs-string">".mian"</span>)就是固定定位的元素<br><span class="hljs-keyword">if</span>($(<span class="hljs-string">".mian"</span>).css(<span class="hljs-string">'top'</span>).replace(<span class="hljs-string">'px'</span>,<span class="hljs-string">''</span>) != 0)&#123;<br>$(<span class="hljs-string">".mian"</span>).css(<span class="hljs-string">'top'</span>,0);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>var winHeight = $(window).height();<br>$(<span class="hljs-string">".mian"</span>).css(<span class="hljs-string">'top'</span>,-(winHeight/4));<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li>通过定时器实时监听是否触发 input。如果触发 input 框 就把固定定位，改变成静态定位。这样就会浏览器会总动把内容顶上去。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> fixedWatch(el) &#123;<br>    //activeElement 获取焦点元素<br><span class="hljs-keyword">if</span>(document.activeElement.nodeName == <span class="hljs-string">'INPUT'</span>) &#123;<br>el.css(<span class="hljs-string">'position'</span>, <span class="hljs-string">'static'</span>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>el.css(<span class="hljs-string">'position'</span>, <span class="hljs-string">'fixed'</span>);<br>&#125;<br>&#125;<br><br>setInterval(<span class="hljs-function"><span class="hljs-title">function</span></span>() &#123;<br>fixedWatch($(<span class="hljs-string">'.mian'</span>));<br>&#125;, 500);<br></code></pre></td></tr></table></figure><h3 id="移动端兼容问题"><a href="#移动端兼容问题" class="headerlink" title="移动端兼容问题"></a>移动端兼容问题</h3><ol><li>移动端 button/input 不一样,需要去除默认样式</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs bash">//去掉webkit的滚动条——display: none;<br>//其他参数<br>::-webkit-scrollba //滚动条整体部分<br>::-webkit-scrollbar-thumb   //滚动条内的小方块<br>::-webkit-scrollbar-track   //滚动条轨道<br>::-webkit-scrollbar-button  //滚动条轨道两端按钮<br>::-webkit-scrollbar-track-piece  //滚动条中间部分，内置轨道<br>::-webkit-scrollbar-corner       //边角，两个滚动条交汇处<br>::-webkit-resizer            //两个滚动条的交汇处上用于通过拖动调整元素大小的小控件<br><br>// 禁止长按链接与图片弹出菜单<br>a,img &#123; -webkit-touch-callout: none &#125;<br><br>// 禁止ios和android用户选中文字<br>html,body &#123;-webkit-user-select:none; user-select: none; &#125;<br><br>// 改变输入框placeholder的颜色值<br>::-webkit-input-placeholder &#123; /* WebKit browsers */<br>color: <span class="hljs-comment">#999; &#125;</span><br>:-moz-placeholder &#123; /* Mozilla Firefox 4 to 18 */<br>color: <span class="hljs-comment">#999; &#125;</span><br>::-moz-placeholder &#123; /* Mozilla Firefox 19+ */<br>color: <span class="hljs-comment">#999; &#125;</span><br>:-ms-input-placeholder &#123; /* Internet Explorer 10+ */<br>color: <span class="hljs-comment">#999; &#125;</span><br>input:focus::-webkit-input-placeholder&#123; color:<span class="hljs-comment">#999; &#125;</span><br><br>// android上去掉语音输入按钮<br>input::-webkit-input-speech-button &#123;display: none&#125;<br><br>// 阻止windows Phone的默认触摸事件<br>/*说明：winphone下默认触摸事件事件使用e.preventDefault是无效的，可通过样式来禁用，如：*/<br>html &#123; -ms-touch-action:none; &#125; //禁止winphone默认触摸事件<br><br><br><br><br>//ios用户点击一个链接，会出现一个半透明灰色遮罩, 如果想要禁用，可设置-webkit-tap-highlight-color的alpha值为0去除灰色半透明遮罩；<br>//android用户点击一个链接，会出现一个边框或者半透明灰色遮罩, 不同生产商定义出来额效果不一样，可设置-webkit-tap-highlight-color的alpha值为0去除部分机器自带的效果；<br>//winphone系统,点击标签产生的灰色半透明背景，能通过设置&lt;meta name=<span class="hljs-string">"msapplication-tap-highlight"</span> content=<span class="hljs-string">"no"</span>&gt;去掉；<br>//特殊说明：有些机型去除不了，如小米2。对于按钮类还有个办法，不使用a或者input标签，直接用div标签<br>a,button,input,textarea &#123;<br>    -webkit-tap-highlight-color: rgba(0,0,0,0);<br>    -webkit-user-modify:<span class="hljs-built_in">read</span>-write-plaintext-only; //-webkit-user-modify有个副作用，就是输入法不再能够输入多个字符<br>&#125;<br>// 也可以<br>* &#123; -webkit-tap-highlight-color: rgba(0,0,0,0); &#125;<br>//winphone下<br>&lt;meta name=<span class="hljs-string">"msapplication-tap-highlight"</span> content=<span class="hljs-string">"no"</span>&gt;<br></code></pre></td></tr></table></figure><ol start="2"><li>手机拍照上传图片</li></ol><p>IOS 有拍照,录像,选区本地图片功能,安卓只有选择本地图片功能</p>]]></content>
      
      
      <categories>
          
          <category> 面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>面试题</title>
      <link href="/2019/07/28/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
      <url>/2019/07/28/%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><ol><li><p>html语义化</p></li><li><p>meta viewport<br> github head</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;meta name=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1"</span>&gt;<br></code></pre></td></tr></table></figure></li><li><p>用过什么html5标签</p><p> header footer main article<br> canvas video audio<br> 搜索mdn</p></li><li><p>H5是什么?<br> 移动端页面</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">1. 页面素材预加载,createJS的preloadJS<br>2. 音乐加载播放技术,createJS的soundJS或H5的audio<br>3. 可滑动页面,swiper.js<br>4. 可涂抹擦除,canvas叠层<br>5. 动态文字和图片,css3动画与js动画<br>6. 填报报名 html表单<br>7. 支持分享自定义的文案和图片 微信jssdk<br><br>炫酷效果:egret/cocos2d/<br></code></pre></td></tr></table></figure></li></ol><h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h3><ol><li><p>盒模型<br>content-box 内容区宽度<br>border-box content+padding+border</p></li><li><p>实现垂直居中</p><ol><li><p>table自带功能</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;table&gt;<br>    &lt;tr&gt;<br>        &lt;td&gt;内容&lt;/td&gt;<br>    &lt;/tr&gt;<br>&lt;/table&gt;<br></code></pre></td></tr></table></figure><p>2 100%高度的after before 加上inline block</p><p>2.1 方案一</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div class=<span class="hljs-string">"parent"</span>&gt;<br>    &lt;span class=<span class="hljs-string">"before"</span>&gt;&lt;/span&gt;<br>    &lt;div class=<span class="hljs-string">"child"</span>&gt;内容&lt;/div&gt;<br>    &lt;span class=<span class="hljs-string">"after"</span>&gt;&lt;/span&gt;<br>&lt;/div&gt;<br><br>&lt;style&gt;<br>    .parent&#123;<br>        text-align:center;//水平居中<br>        padding:10px 0;//让父元素有高度,但不必要<br>    &#125;<br>    .child&#123;<br>            display: inline-block;<br>            vertical-align: middle;<br>        &#125;<br>    .before,.after&#123;<br>            display: inline-block;<br>            hegiht:100%;<br>            vertical-align: middle;<br>        &#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>2.2 方案一优化版</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div class=<span class="hljs-string">"parent"</span>&gt;<br>    &lt;div class=<span class="hljs-string">"child"</span>&gt;内容&lt;/div&gt;<br>&lt;/div&gt;<br><br>&lt;style&gt;<br>    .parent&#123;<br>        text-align:center;//水平居中<br>        padding:10px 0;//让父元素有高度,但不必要<br>    &#125;<br>    .child&#123;<br>            display: inline-block;<br>            vertical-align: middle;<br>        &#125;<br>    parent::before,parent::after&#123;<br>            cotent:<span class="hljs-string">''</span>;<br>            display: inline-block;<br>            hegiht:100%;<br>            vertical-align: middle;<br>        &#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>3 postion+负margin子元素宽高的一半</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div class=<span class="hljs-string">"parent"</span>&gt;<br>    &lt;div class=<span class="hljs-string">"child&gt;内容&lt;/div&gt;<br>&lt;/div&gt;<br>&lt;style&gt;<br>    .parent &#123;<br>        position: relative;<br>    &#125;<br><br>    .child &#123;<br>        position: absolute;<br>        width: 300px;<br>        height: 100px;<br>        top: 50%;<br>        left: 50%;<br>        margin-top: -150px;<br>        margin-left: -50px;<br>    &#125;<br>&lt;/style&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>transform: translate(-50%,-50%)</p></li><li><p>flex</p></li><li><p>absolute top/bottom/left/right:0;margin:auto</p></li></ol></li><li><p>flex属性</p></li><li><p>BFC是什么<br> 块级格式化上下文，常见的例子有：</p><ol><li>overflow:hidden</li><li>浮动元素</li><li>绝对定位元素</li><li>inline-block</li><li><p>flex或者inline-flex</p><p>解决了什么问题：</p></li><li>清除浮动</li><li>防止margin合并</li></ol></li><li><p>CSS选择器优先级</p><ol><li>越具体优先级越高</li><li>写在后面的,覆盖写在前面的</li><li>importan!最高 少用</li></ol></li><li><p>清除浮动<br> .clearfix{</p><pre><code>content:&apos;&apos;;display:block;clear:both;</code></pre><p> }<br> 加到容器上,里面子元素浮动被清除.</p></li><li><p>重绘重排</p><ol><li>重绘：元素外观发生改变，如元素填充颜色</li><li>重排：布局发生改变，需要重新生成布局，重新排列元素<br> 减少重排 <pre><code>i. 脱离文档流ii. 避免频繁操作样式iii. 减少重排范围，尽量将样式加载具体元素上，而不是它的父级 </code></pre><h3 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h3></li></ol></li><li><p>ES6属性</p></li><li><p>Promise.all Promise.race</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">//Promise<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">xxx</span></span>()&#123;<br>    <span class="hljs-built_in">return</span> new Promise(<span class="hljs-keyword">function</span>(resolve,reject)&#123;<br>        setTimeout(()=&gt;&#123;<br>            <span class="hljs-keyword">if</span>(xxx)&#123;<br>                resolve(<span class="hljs-string">'data'</span>)<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                reject(new Error(<span class="hljs-string">'error'</span>))<br>            &#125;<br>        &#125;)<br>    &#125;<br>&#125;<br><br>//Promise.all([fn,fn2,fn3]).<span class="hljs-keyword">then</span>(res1,res2,res3) <br>//Promise.race([fn,fn2,fn3]).<span class="hljs-keyword">then</span>(res)<br></code></pre></td></tr></table></figure></li><li><p>函数防抖,函数节流<br> 防抖:事件触发,假如事件在一定时间内不再触发,则调用函数</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> 防抖(fn,time)&#123;<br>    <span class="hljs-built_in">let</span> timer = null;<br>    <span class="hljs-built_in">return</span> ()=&gt;&#123;<br>        <span class="hljs-keyword">if</span>(timer)&#123;<br>            clearTimeout()<br>        &#125;<br>        timer = setTimeout(()=&gt;&#123;<br>            fn()<br>            timer = null<br>        &#125;,time)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p> 节流:一段时间内只能调用一次函数</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> 节流(fn, time) &#123;<br>    <span class="hljs-built_in">let</span> doing = <span class="hljs-literal">false</span>;<br>    <span class="hljs-built_in">return</span> () =&gt; &#123;<br>        <span class="hljs-keyword">if</span> (doing === <span class="hljs-literal">false</span>) &#123;<br>            doing = <span class="hljs-literal">true</span>;<br>            fn()<br>            setTimeout(() =&gt; &#123;<br>                doing = <span class="hljs-literal">false</span>;<br>            &#125;, time)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>手写ajax</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">var request = new XMLHttpRequest();<br>request.open(<span class="hljs-string">'GET'</span>,<span class="hljs-string">'url'</span>)<br>request.onreadystatechange = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    <span class="hljs-keyword">if</span>(request.readyState === 4)&#123;<br>        <span class="hljs-keyword">if</span>(request.status &gt;= 200 &amp;&amp; request.status &lt; 300 || request.status === 304)&#123;<br>            console.log(request.responseText)<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            console.log(<span class="hljs-string">'error'</span>)<br>        &#125;<br>    &#125;<br>&#125;<br>request.send()<br></code></pre></td></tr></table></figure><p> 用promise写ajax</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> ajax(method,data,url)&#123;<br>    <span class="hljs-built_in">return</span> new Promise(<span class="hljs-keyword">function</span>(resolve,reject)&#123;<br>        <span class="hljs-built_in">let</span> request = new XMLHttpRequest()<br>        request.open(method,url)<br>        request.onreadystatechange = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            <span class="hljs-keyword">if</span>(request.readyState === 4)&#123;<br>                <span class="hljs-keyword">if</span>(request.status &gt;= 200 &amp;&amp; request.status &lt; 300 || request.status === 304)&#123;<br>                    resolve(request.responseText)<br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    reject(<span class="hljs-string">'error'</span>)<br>                &#125;<br>            &#125;<br>        &#125;<br>        request.send(data)<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>this</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">1. fn()<br><br>    this =&gt; window<br>2. obj.fn()<br>    this =&gt; obj<br>3. fn.call(x)<br>4. fn.apply(x)<br>5. fn.apply(x)<br>    this =&gt; x<br>6. new Fn()<br>    this =&gt; 新的对象<br><br>7. fn = ()=&gt;&#123;&#125;<br>    this =&gt; 外面的this<br></code></pre></td></tr></table></figure></li><li><p>闭包/立即执行函数</p><p> 声名一个匿名函数，然后立即执行它。在Es6之前，只能通过它来[创建局部作用域]。<br> 闭包：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">const add2 = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    var count<br>    <span class="hljs-built_in">return</span> <span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">add</span></span>()&#123;<br>        count +1 = 1 //访问了外部变量的函数<br>    &#125;<br>&#125;()<br></code></pre></td></tr></table></figure><p> 闭包优点： </p><ol><li>避免污染全局环境。</li><li>提供对局部变量的间接访问。</li><li>维持变量，使其不被垃圾回收。</li></ol></li><li><p>jsonp/cors/跨域</p><p> jsonp,动态创建script标签,src指向请求地址,把callback函数名当做参数传给服务器,服务器把数据包装在callback内,传回来,然后script执行callback.</p><p> cors:跨域资源共享</p><ol><li>对于简单请求，乙站点在响应头添加Access-Control-Allow-Origin:http：//甲站点</li><li><p>对于复杂请求，如POST，乙站点需要：</p><ol><li><p>响应OPTIONS请求，响应中添加如下的响应头</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">Access-Control-Allow-Origin:http：//甲站点<br>Access-Control-Allow-Mthods:POST,GET,OPTIONS<br>Access-Control-Allow-Headers:Contet-type<br></code></pre></td></tr></table></figure></li><li><p>响应POST请求，在响应中添加Access-Control-Allow-Origin头</p></li></ol></li><li>如果需要附带Cookie，JS中需要在AJAX里设置xhr.withCredentials = true</li></ol></li></ol><ol start="8"><li><p>async await 捕获异常</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">async <span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn</span></span>()&#123;<br>    try&#123;<br>        <span class="hljs-built_in">let</span> a = await Promise.reject(<span class="hljs-string">'error'</span>)<br>    &#125;catch(error)&#123;<br>        console.log(error)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>深拷贝</p><ol><li>递归</li><li>判断类型</li><li>检测循环引用(环)</li><li><p>不可能拷贝 <strong>proto</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs bash">const cache = new Map()//缓存已拷贝部分<br><span class="hljs-keyword">function</span> <span class="hljs-built_in">clone</span>(object)&#123;<br>    <span class="hljs-keyword">if</span>(cache.get(object))&#123;//假如已缓存，直接返回<br>        <span class="hljs-built_in">return</span> cache.get(object)<br>    &#125;<br>    <span class="hljs-built_in">let</span> result<br>    <span class="hljs-keyword">if</span>(! (object instanceof Object) )&#123;//基础类型直接返回<br>        <span class="hljs-built_in">return</span> object<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(object instanceof Array)&#123;<br>        result = []<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(object instanceof Function)&#123;<br>       result = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<span class="hljs-built_in">return</span> object.apply(this,arguments)&#125;<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(object instanceof Date)&#123;<br>        result = new Date(object-0)<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(object instanceof RegExp)&#123;<br>        result = new RegExp(a)<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        result = &#123;&#125;<br>    &#125;<br>    cache.set(object,result)//插入缓存<br>    <span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> key <span class="hljs-keyword">in</span> object)&#123;<br>        <span class="hljs-keyword">if</span>(object.hasOwnProperty(key))&#123;//非继承属性<br>            result[key] = <span class="hljs-built_in">clone</span>(object[key])<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">return</span> result<br>&#125;<br></code></pre></td></tr></table></figure></li></ol></li><li><p>正则实现trim</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> trim(string)&#123;<br>    <span class="hljs-built_in">return</span> string.replace(/^\s+|\s+$/g,<span class="hljs-string">''</span>)<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>继承</p><p>es5</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> Animal(name)&#123;<br>    this.name = name<br>&#125;<br><br>Animal.prototype.move = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    console.log(<span class="hljs-string">'move'</span>)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">Dog</span></span>()&#123;<br>    Animal.apply(this,arguments)<br>    this.foot = 4<br>&#125;<br><br><span class="hljs-built_in">let</span> f = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;&#125;<br>f.prototype = Animal.prototype;<br>Dog.prototype = new f()<br><br>Dog.prototype.constructor = Dog<br><br>Dog.prototype.say = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    console.log(<span class="hljs-string">'汪汪汪'</span>)<br>&#125;<br><br><span class="hljs-built_in">let</span> a = new Dog(<span class="hljs-string">'aaa'</span>) //&#123;name:<span class="hljs-string">'aaa'</span>,foot:4&#125;<br>a.name<br>a.move()<br>a.foot<br>a.say()<br></code></pre></td></tr></table></figure><p>es6</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">class Animal&#123;<br>    constructor(name)&#123;<br>        this.name = name<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">move</span></span>()&#123;<br>        console.log(<span class="hljs-string">'move'</span>)<br>    &#125;<br>&#125;<br><br>class Dog extends Animal &#123;<br>    constructor(name)&#123;<br>        super(name)<br>        this.foot = 4<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">say</span></span>()&#123;<br>        console.log(<span class="hljs-string">'汪汪汪'</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>JS的new做了什么</p><ol><li>创建临时对象/新对象</li><li>绑定原型</li><li>指定this = 临时对象</li><li>执行构造函数</li><li>返回临时对象</li></ol></li><li><p>去重</p><ol><li><p>hash（计数排序的思路）</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">var uniq = <span class="hljs-keyword">function</span>(a)&#123;<br>    var map = &#123;&#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> i =0;i&lt;a.length;i++)&#123;<br>        <span class="hljs-built_in">let</span> number = a[i]<br>        <span class="hljs-keyword">if</span>(number === undefined)&#123;<span class="hljs-built_in">continue</span>&#125;<br>        <span class="hljs-keyword">if</span>(number <span class="hljs-keyword">in</span> map)&#123;//已重复<br>            <span class="hljs-built_in">continue</span><br>        &#125;<br>        map[number] = <span class="hljs-literal">true</span> //map里第一次出现<br>    &#125;<br>    const result = []<br>    <span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> key <span class="hljs-keyword">in</span> map)&#123;<br>        result.push(key)<br>    &#125;<br>    <span class="hljs-built_in">return</span> result<br>&#125;<br></code></pre></td></tr></table></figure><p> 缺点：数字只能是字符串，同时有数字跟字符串无法分出（’1’,1）</p></li><li><p>set</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">Array.form(new Set(a))<br></code></pre></td></tr></table></figure></li><li><p>Weekmap</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">var uniq = <span class="hljs-keyword">function</span>(a)&#123;<br>    var map = new Map()<br>    <span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> i =0;i&lt;a.length;i++)&#123;<br>        <span class="hljs-built_in">let</span> number = a[i]<br>        <span class="hljs-keyword">if</span>(number === undefined)&#123;<span class="hljs-built_in">continue</span>&#125;<br>        <span class="hljs-keyword">if</span>(map.has(number))&#123;//已重复<br>            <span class="hljs-built_in">continue</span><br>        &#125;<br>      map.set(number,<span class="hljs-literal">true</span>) //map里第一次出现<br>    &#125;<br>   <span class="hljs-built_in">return</span> [...map.keys()]<br>&#125;<br></code></pre></td></tr></table></figure><p> 缺点：兼容性差了一些</p></li></ol></li><li><p>手写Promise</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs bash">class Promises2 &#123;<br>    <span class="hljs-comment">#status = 'pending'</span><br>    constructor(fn) &#123;<br>        this.q = []//创建一个队列<br>        const resolve = (data) =&gt; &#123;<br>            this.<span class="hljs-comment">#status = 'fulfilled'</span><br>            const f1f2 = this.q.shift()//出列，返回第一个<br>            const x = f1f2[0].call(undefined, data)<br>            <span class="hljs-keyword">if</span> (x instanceof Promise2) &#123;<br>                x.then(data =&gt; &#123;<br>                    resolve(data)<br>                &#125;, (reason) =&gt; &#123;<br>                    reject(reason)<br>                &#125;)<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                resolve(x)<br>            &#125;<br>        &#125;;<br>        const reject = (reason) =&gt; &#123;<br>            this.<span class="hljs-comment">#status = 'rejected'</span><br>            const f1f2 = this.q.shift()<br>            const x = f1f2[1].call(undefined, data)<br>            <span class="hljs-keyword">if</span> (x instanceof Promise2) &#123;<br>                x.then(data =&gt; &#123;<br>                    resolve(data)<br>                &#125;, (reason) =&gt; &#123;<br>                    reject(reason)<br>                &#125;)<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                resolve(x)<br>            &#125;<br>        &#125;<br>        fn.call(undefined, resolve, reject)<br>    &#125;<br>    <span class="hljs-keyword">then</span>(f1, f2) &#123;<br>        this.q.push([f1, f2])//入列<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>手写Promise.all</p><ol><li>知道Promise上写而不是在原型上写</li><li>知道all的参数（Promise数组）和返回值（新Promise对象）</li><li>知道用数组来记录结果</li><li>知道只要一个reject就整体reject</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">Promise.myAll = <span class="hljs-keyword">function</span> (list) &#123;<br>    const results = []<br>    <span class="hljs-built_in">let</span> count = 0<br>    <span class="hljs-built_in">return</span> new Promise((resolve,reject) =&gt; &#123;<br>        list.map((promise,index) =&gt; &#123;<br>            promise.then((r) =&gt; &#123;<br>                results[index] = r<br>                count += 1<br>                <span class="hljs-keyword">if</span> (count === list.length) &#123;<br>                    resolve(results)<br>                &#125;<br>            &#125;,<br>                (reason) =&gt; &#123;<br>                    reject(reason)<br>                &#125;<br>            )<br>        &#125;)<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>JS垃圾回收机制</p><ol><li>什么是垃圾<ol><li>没有引用的就是垃圾</li><li>如果是对象互相引用，形成环也是垃圾</li></ol></li><li>如何捡垃圾<br> 遍历和计数，如有引用则进行标记，最后把没有标记的删除</li><li>前端又有其特殊性（JS进程和DOM进程）</li></ol></li></ol><h3 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h3><ol><li><p>事件委托<br>好处：</p><ol><li>节省监听器</li><li>动态监听<br>坏处：</li><li><p>调试比较复杂，不容易发现监听者。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">ul.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(e)&#123;<br>    <span class="hljs-keyword">if</span>(e.target.tagName.toLowerCase() === <span class="hljs-string">'li'</span>)&#123;<br>        fn() // 执行某个函数<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure></li></ol></li><li><p>mouse事件写一个可拖动的div</p><ol><li>记录鼠标按下的坐标</li><li>记录当前拖动坐标</li><li>移动距离=拖动坐标-拖动坐标</li><li>元素的style.left/top+移动距离<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">var position = null<br>var drag = <span class="hljs-literal">false</span><br>xxx.addEventListener(<span class="hljs-string">'mousedown'</span>,<span class="hljs-keyword">function</span>(e)&#123;<br>        drag = <span class="hljs-literal">true</span>;<br>        position = [e.clientX,e.clientY]<br>&#125;)<br>document.addEventListener(<span class="hljs-string">'mousemove'</span>,<span class="hljs-keyword">function</span>(e)&#123;<br>    <span class="hljs-keyword">if</span>(!drag) <span class="hljs-built_in">return</span> //没有移动就别拖<br>        <span class="hljs-built_in">let</span> X = e.clientX<br>        <span class="hljs-built_in">let</span> Y = e.clientY<br>        <span class="hljs-built_in">let</span> left = parseInt(xxx.style.left || 0 )<br>        <span class="hljs-built_in">let</span> top = parseInt(xxx.style.top || 0 )<br>        moveX = X - position[0]<br>        moveY = Y - position[1]<br>        xxx.style.left = left + moveX + <span class="hljs-string">'px'</span><br>        xxx.style.top = top + moveY + <span class="hljs-string">'px'</span><br>        position = [X,Y]<br>&#125;)<br>document.addEventListener(<span class="hljs-string">'mouseup'</span>,<span class="hljs-keyword">function</span>(e)&#123;<br>    drag = <span class="hljs-literal">false</span><br>&#125;)<br></code></pre></td></tr></table></figure></li></ol></li></ol><h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><ol><li><p>HTTP状态码</p><p> HTTP status cat</p></li><li><p>HTTP缓存有哪几种<br> http1.1：</p><p> Cache-control（强缓存）: max-age 多少秒内过期 是相对时间 无请求 在本地<br> Etag（协商缓存）:MD5 在服务器 有请求 304<br> http1.0：服务器最后修改时间，只能存到秒 有请求 304<br> Expire（强缓存）:日期 什么时候过期 Bug:本地时间用户可以调 无请求 在本地<br> Last-Modified（协商缓存）：</p></li><li><p>GET 和 POST</p><p> 错:(背)</p><ol><li>POST安全 GET不安全</li><li>GET URL有长度限制 POST没有</li><li>GET 参数放在URL POST 放在消息体</li><li>GET  只需要一个报文 POST 需要两个以上</li><li>GET 幂等(不改变数据) POST 不幂等(改变数据库)</li><li>GET结果会被缓存，POST结果不会被缓存<br>对: 只语义上的区别 get 获取数据 post 提交数据</li></ol></li><li><p>Cookie Session Localstrage Sessionstrage 区别</p><ol><li>Cookie与Localstrage，cookie会被发送到服务器，4k，Localstrage不带请求，在本地，5M</li><li>Localstrage与Sessionstrage，前者不会过期，后者会话结束后过期</li><li>Cookie与Session，cookie存在浏览器，Session存在服务器，Session基于Cooike实现，具体做法就是把SessionId存在Cookie里</li></ol></li><li><p>HTTP2 HTTP1区别</p><ol><li>HTTP/2使用了二进制传输，而且将head和body分成帧来传输；HTTP/1.1是字符串传输。</li><li>HTTP/2使用多路复用，HTTP/1.1不支持。多路复用简单来说就是一个TCP连接从单车道（不是单行道）变成了几百个双向通行的车道。</li><li>HTTP/2可以压缩header，但是HTTP/1.1不行。</li><li>HTTP/2支持服务器推送，但是HTTP/1.1不行。</li></ol></li><li><p>HTTP和HTTPS区别</p><ol><li>HTTP是明文传输的，不安全；HTTPS是加密传输的，非常安全。</li><li>HTTP使用80端口，HTTPS使用443端口。</li><li>HTTP较快，HTTPS较慢。</li><li>HTPS的证书一般需要购买，HTTP不需要证书。</li></ol></li><li><p>TCP三次握手和四次挥手<br>建立TCP连接时sever和client会经历三次握手</p><ol><li>浏览器向服务器发送TCP数据,SYN(X)//请求数据</li><li>服务器向浏览器发送TCP数据,ACK(X+1),SYN(y)//表示同意</li><li>浏览器向服务器发送TCP数据,ACK(y)//表示同意</li></ol><p>关闭TCP连接时sever和client会经历四次挥手</p><ol start="4"><li>浏览器向服务器发送TCP数据,FIN(X)//表示已完成</li><li>服务器向浏览器发送TCP数据,ACK(X+1)/表示同意</li><li>服务器向浏览器发送TCP数据,FIN(y)/表示已完成</li><li><p>浏览器向服务器发送TCP数据,ACK(y)//表示同意</p><p>为什么2，3步骤不合并？因为2，3中间服务器很可能还有数据要发送，不能提前发送FIN</p></li></ol></li></ol><h3 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h3><ol><li><p>watch computed 区别</p><p> watch是属性监听无缓存<br> computed是计算属性,有缓存</p></li><li><p>生命周期</p><p> created:初始化<br> mouted:数据请求<br> updated:更新时做<br> destory:销毁时</p></li><li><p>组件通信</p><ol><li>父子 props $emit(‘事件’,data) $on(‘事件’,function(){})</li><li>eventBus eventBus = new Vue();eventBus.$emit() eventBus.$on</li><li>Vuex</li></ol></li><li><p>Vuex</p><p> 状态管理工具</p><p> state<br> getter<br> mutatiion<br> action</p><p> …map</p></li><li><p>vue2如何实现双向绑定的？</p><ol><li>v-model是v-bind：value和v-on:input的语法糖<br> a: v-bind:value实现了data=&gt;ui的单向绑定<br> b： v-on:input实现了ui=&gt;data的单向绑定</li><li>如何实现<br> a： Object.defineProperty 给data创建getter/setter，用于监听data的改变，data一变就会安排改变ui<br> b：后者通过template compiler给DOM添加事件监听，DOM input的值改变了就会去修改data</li></ol></li><li><p>vue.set</p><p> vm.$set(‘目标对象’,key,value)</p></li><li><p>vue-router</p></li></ol><p>vue的官方管理器</p><p>重定向<br>histroy模式<br>懒加载 improt(‘./文件路径’)</p><ol start="8"><li>路由守卫</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">router.beforeEach((to, from, next) =&gt; &#123;<br>  // ...<br>&#125;)<br><br>next() //去to<br>next(<span class="hljs-literal">false</span>) //去from<br>next(<span class="hljs-string">'/login'</span>) //去login <br><br>组件内<br> beforeRouteEnter (to, from, next) &#123;<br>    // 在渲染该组件的对应路由被 confirm 前调用<br>    // 不！能！获取组件实例 `this`<br>    // 因为当守卫执行前，组件实例还没被创建<br>  &#125;,<br><br>全局<br>router.beforeResolve<br></code></pre></td></tr></table></figure><ol start="9"><li><p>拦截</p></li><li><p>混用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">//登录成功后将token存到seesionStorage<br><br>seesionstorage.setItem(<span class="hljs-string">'token'</span>,data.token)<br><br>//路由守卫<br>router.beforeEach((to,from,next)=&gt;&#123;<br>    <span class="hljs-keyword">if</span>(to.patch === <span class="hljs-string">'/login'</span>) <span class="hljs-built_in">return</span> next()<br>    <span class="hljs-keyword">if</span>(!sessionStorage.getItem(<span class="hljs-string">'token'</span>)) <span class="hljs-built_in">return</span> next(<span class="hljs-string">'/login'</span>)<br>    next()<br>&#125;)<br><br>//请求拦截<br>axios.interceptors.request.use(<span class="hljs-keyword">function</span>(config)&#123;<br>    config.headers.Authorization = seesionStorage.getItem(<span class="hljs-string">'token'</span>)<br>    <span class="hljs-built_in">return</span> config<br>&#125;)<br><br>//响应拦截<br>axios.interceptors.response.ues(<span class="hljs-keyword">function</span>(response)&#123;<br>    <span class="hljs-keyword">if</span>(response.data.meta.status === 401)&#123;<br>        location.href = <span class="hljs-string">'#/login'</span><br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-built_in">return</span> response<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure></li></ol><h3 id="vue3"><a href="#vue3" class="headerlink" title="vue3"></a>vue3</h3><ol><li><p>vue3为什么使用proxy？</p><ol><li>弥补Object.defineProperty的两个不足<br>a：动态创建的data属性需要Vue.set来赋值，vue3用了proxy就不需要了。<br>b：基于性能考虑，vue2篡改数组的7个API（push等），vue3用了proxy就不需要了。</li><li>defineProperty需要提前递归遍历data做到响应式，而proxy可以在真正用到深层数据的时候再做响应式（惰性）</li></ol></li><li><p>vue3为什么使用composition API？</p><ol><li><p>composition api比mixins、高阶组件、extends、Renderless Components等更好，原因有三：<br>a:模板中的数据来源不清晰。<br>b：命名空间冲突。<br>c：性能</p><ol start="2"><li>更适合TypeScript</li></ol></li></ol></li><li><p>vue3对比vue2做了哪些改动？</p><ol><li>createApp()代替了new Vue()</li><li>v-model代替了以前的v-model和sync</li><li>根元素可以不止一个元素了</li><li>新增teleport传送门</li><li>destory被改名为unmounted了</li><li>ref属性支持函数了</li></ol></li></ol><h3 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h3><ol><li><p>用过什么loader plugin</p><ol><li><p>loader 转换器</p><ol><li>babel-loader 把 JS/TS 变成 JS</li><li>ts-loader 把 TS 变成 JS，并提示类型错误</li><li>markdown-loader 把 markdown 变成 html</li><li>html-loader 把 html 变成 JS 字符串</li><li>sass-loader 把 SASS/SCSS 变成 CSS</li><li>css-loader 把 CSS 变成 JS 字符串</li><li>style-loader 把 JS 字符串变成 style 标签</li><li>postcss-loader 把 CSS 变成更优化的 CSS</li><li>vue-loader 把单文件组件（SFC）变成 JS 模块</li><li>thread-loader 用于多进程打包</li></ol></li><li><p>plugin 扩展器</p><ol><li>html-webpack-plugin 用于创建 HTML 页面并自动引入 JS 和 CSS</li><li>clean-webpack-plugin 用于清理之前打包的残余文件</li><li>mini-css-extract-plugin 用于将 JS 中的 CSS 抽离成单独的 CSS 文件</li><li>SplitChunksPlugin 用于代码分包（Code Split）</li><li>DllPlugin + DllReferencePlugin 用于避免大依赖被频繁重新打包，大幅降低打<br>包时间</li><li>eslint-webpack-plugin 用于检查代码中的错误</li><li>DefinePlugin 用于在 webpack config 里添加全局变量</li><li>copy-webpack-plugin 用于拷贝静态文件到 dist</li></ol><p>二者的区别</p></li><li>loader 是文件加载器（这句废话很重要）<br> 功能：能够对文件进行编译、优化、混淆（压缩）等，比如 babel-loader /</li><li>plugin 是 webpack 插件（这句废话也很重要）<br> 功能：能实现更多功能，比如定义全局变量、Code Split、加速编译等<br> 运行时机：在整个打包过程（以及前后）都能运行</li></ol></li><li><p>webpack 如何解决开发时的跨域问题？<br> 在开发时，我们的页面在 localhost:8080 ，JS 直接访问后端接口（如<br> <a href="https://xiedaimala.com" target="_blank" rel="noopener">https://xiedaimala.com</a> 或 <a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> ）会报跨域错误。<br> 为了解决这个问题，可以在 webpack.config.js 中添加如下配置：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">module.exports = &#123;<br>//...<br>devServer: &#123;<br>    proxy: &#123;<br>    <span class="hljs-string">'/api'</span>: &#123;<br>            target: <span class="hljs-string">'http://xiedaimala.com'</span>,<br>            changeOrigin: <span class="hljs-literal">true</span>,<br>            &#125;,<br>        &#125;,<br>    &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><p> 此时，在 JS 中请求 /api/users 就会自动被代理到<br> <a href="http://xiedaimala.com/api/users" target="_blank" rel="noopener">http://xiedaimala.com/api/users</a> 。<br> 如果希望请求中的 Origin 从 8080 修改为 xiedaimala.com，可以添加 changeOrigin:<br> true 。<br> 如果要访问的是 HTTPS API，那么就需要配置 HTTPS 证书，否则会报错。<br> 不过，如果在 target 下面添加 secure: false ，就可以不配置证书且忽略 HTTPS 报<br> 错。<br> 总之，记住常用选项就行了。</p></li><li><p>如何实现 tree-shaking？<br>是什么<br> tree-shaking 就是让没有用到的 JS 代码不打包，以减小包的体积。<br> 怎么做<br> 背下文档说的这几点：</p><ol><li>怎么删<br>   a. 使用 ES Modules 语法（即 ES6 的 import 和 export 关键字）<br>   b. CommonJS 语法无法 tree-shaking（即 require 和 exports 语法）<br>   c. 引入的时候只引用需要的模块<pre><code>i. 要写 import {cloneDeep} from &apos;lodash-es&apos; 因为方便 tree-shakingii. 不要写 import _ from &apos;lodash&apos; 因为会导致无法 tree-shaking 无用模块</code></pre></li><li>怎么不删：在 package.json 中配置 sideEffects，防止某些文件被删掉<br>   a. 比如我 import 了 x.js，而 x.js 只是添加了 window.x 属性，那么 x.js 就要放到<br>   sideEffects 里<br>   b. 比如所有被 import 的 CSS 都要放在 sideEffects 里</li><li>怎么开启：在 webpack config 中将 mode 设置为 production（开发环境没必要tree-shaking）<br>   a. mode: production 给 webpack 加了非常多优化</li></ol></li><li><p>如何提高 webpack 构建速度？</p><ol><li>使用 DllPlugin 将不常变化的代码提前打包，并复用，如 vue、react</li><li>使用 thread-loader 或 HappyPack（过时）进行多线程打包</li><li>处于开发环境时，在 webpack config 中将 cache 设为 true，也可用 cacheloader（过时）</li><li>处于生产环境时，关闭不必要的环节，比如可以关闭 source map</li><li>网传的 HardSourceWebpackPlugin 已经一年多没更新了，谨慎使用</li></ol></li><li><p>webpack 与 vite 的区别是什么？</p><ol><li>开发环境区别<br>a. vite 自己实现 server，不对代码打包，充分利用浏览器对 <script type="module"> 的支持<br>  i. 假设 main.js 引入了 vue<br>  ii. 该 server 会把 import { createApp } from ‘vue’ 改为 import {<br>  createApp } from “/node_modules/.vite/vue.js” 这样浏览器就知道去哪<br>  里找 vue.js 了<br>b. webpack-dev-server 常使用 babel-loader 基于内存打包，比 vite 慢很多很多很多<br>  i. 该 server 会把 vue.js 的代码（递归地）打包进 main.js</li><li>生产环境区别<br>a. vite 使用 rollup + esbuild 来打包 JS 代码<br>b. webpack 使用 babel 来打包 JS 代码，比 esbuild 慢很多很多很多<pre><code>i. webpack 能使用 esbuild 吗？可以，你要自己配置（很麻烦）。</code></pre></li><li>文件处理时机<br>a. vite 只会在你请求某个文件的时候处理该文件<br>b. webpack 会提前打包好 main.js，等你请求的时候直接输出打包好的 JS 给你<br>目前已知 vite 的缺点有：</li><li>热更新常常失败，原因不清楚</li><li>有些功能 rollup 不支持，需要自己写 rollup 插件</li><li>不支持非现代浏览器</li></ol></li></ol><h3 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h3><pre><code>XSS-Cross-Site Scripting（跨站脚本攻击）    i. 反射型XSS         防御：对url的查询参数进行转义后再输出到页面。          <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">app.get(<span class="hljs-string">'/welcome'</span>, <span class="hljs-keyword">function</span>(req, res) &#123;<br>    //对查询参数进行编码，避免反射型 XSS攻击<br>    res.send(`<span class="hljs-variable">$&#123;encodeURIComponent(req.query.type)&#125;</span>`); <br>&#125;);<br></code></pre></td></tr></table></figure>    ii. DOM型XSS        防御： 对html进行转义        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> encodeHtml(str) &#123;<br>    <span class="hljs-built_in">return</span> str.replace(/<span class="hljs-string">"/g, '&amp;quot;')<br>            .replace(/'/g, '&amp;apos;')<br>            .replace(/&lt;/g, '&amp;lt;')<br>            .replace(/&gt;/g, '&amp;gt;');<br>&#125;</span><br></code></pre></td></tr></table></figure>CSRF-Cross-site request forgery（跨站请求伪造）    防御：        i. Token验证        ii.  Cookie添加SameSite属性，在跨站请求时不会被发送区别一：CSRF：需要用户先登录网站A，获取 cookie。XSS：不需要登录。区别二：（原理的区别）CSRF：是利用网站A本身的漏洞，去请求网站A的api。XSS：是向网站 A 注入 JS代码，然后执行 JS 里的代码，篡改网站A的内容。</code></pre><h3 id="代码题"><a href="#代码题" class="headerlink" title="代码题"></a>代码题</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">var a = &#123;name:<span class="hljs-string">'a'</span>&#125;<br>a.x = a = &#123;&#125;<br>a.x ? //undefined<br><br>解:<br>1.确定a是什么<br>2执行从右往左<br><br><br>var a = &#123;name:<span class="hljs-string">'a'</span>&#125; //指向内存124<br>a.x = a = &#123;&#125;<br><br>先确定a.x的a是124<br>a = &#123;&#125; //将a指向126空对象,所以新的变量a是空对象<br>a.x = a //124对象的x等于空对象<br>&#123;   //124<br>    name:<span class="hljs-string">'a'</span>,<br>    x:&#123;&#125;<br>&#125;<br><br>a.x 是什么?<br>因为现在的a是空对象126,所以x是undefined<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(a == 1 &amp;&amp; a==2 &amp;&amp; a==3)<br></code></pre></td></tr></table></figure><h3 id="Eventloop"><a href="#Eventloop" class="headerlink" title="Eventloop"></a>Eventloop</h3><h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br></pre></td><td class="code"><pre><code class="hljs bash">var name = <span class="hljs-string">'window'</span>;<br><br>var person1 = &#123;<br>    name:<span class="hljs-string">'person1'</span>,<br>    show1:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        console.log(this.name)<br>    &#125;,<br>    show2:()=&gt;console.log(this.name),<br>    show3:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        <span class="hljs-built_in">return</span> <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            console.log(this.name)<br>        &#125;<br>    &#125;,<br>    show4:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        <span class="hljs-built_in">return</span> ()=&gt;console.log(this.name)<br>    &#125;<br>&#125;<br><br>var person2 = &#123;name:<span class="hljs-string">'person2'</span>&#125;<br><br>person1.show1() //person1<br>person1.show1.call(person2) //person2<br><br>person1.show2() // window 作用域是window,指向window<br>person1.show2.call(person2) //window call不能改变箭头函数指向,作用域是window<br><br><br><br>person1.show3()() //window var fn = person1.show3()  fn() <br>person1.show3().call(person2) //p2  <br>person1.show3.call(person2)() //window 同1 <br><br>person1.show4() //p1 作用域是p1<br>person1.show4().call(person2) //p1 作用域是p1<br>person1.show4.call(person2)() //p2 作用域是p2<br><br><br>//////////////////////////////////////<br><br>var name = <span class="hljs-string">'window'</span><br><br><span class="hljs-keyword">function</span> Person(name)&#123;<br>    this.name = name;<br>    this.show1 = <span class="hljs-function"><span class="hljs-title">function</span></span> () &#123;<br>        console.log(this.name)<br>    &#125;<br>    this.show2 = () =&gt; console.log(this.name)<br>    this.show3 = <span class="hljs-function"><span class="hljs-title">function</span></span> () &#123;<br>        <span class="hljs-built_in">return</span> <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            console.log(this.name)<br>        &#125;<br>    &#125;<br>    this.show4 = <span class="hljs-function"><span class="hljs-title">function</span></span> () &#123;<br>        <span class="hljs-built_in">return</span> () =&gt; console.log(this.name)<br>    &#125;<br>&#125;<br><br>var personA = new Person(<span class="hljs-string">'personA'</span>)<br>var personB = new Person(<span class="hljs-string">'personB'</span>)<br><br>personA.show1() //PA<br>personA.show1.call(personB) //pB<br><br>personA.show2() //PA <br>personA.show2.call(personB) //PA<br><br>personA.show3()() //window<br>personA.show3().call(personB) //Pb <br>personA.show3.call(personB)() //window <br><br>personA.show4()() //PA <br>personA.show4().call(personB) //pA<br>personA.show4.call(personB)() //Pb<br><br>///////////////////////////<br><br><span class="hljs-keyword">function</span> $()&#123;<br>    this.count = 1;<br>    <span class="hljs-built_in">return</span> this;<br>&#125;<br>window.onload = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    console.info($()); //window<br>&#125;<br><br>//////////////<br><br>var point = &#123;<br>    x: 0,<br>    y: 0,<br>    moveTo: <span class="hljs-keyword">function</span>(x, y) &#123;<br>        var fn1 = <span class="hljs-keyword">function</span>(x) &#123;<br>            this.x = this.x + x; <br>            <span class="hljs-built_in">return</span> this.x;<br>        &#125;;<br>        var fn2 = <span class="hljs-keyword">function</span>(y) &#123;<br>            this.y = this.y + y;<br>        &#125;;<br>        <span class="hljs-built_in">return</span> fn1();<br>    &#125;<br>&#125;<br>console.log(point.moveTo()); //fn1() =&gt; fn1().call() NaN+0=NaN<br><br>////////<br><br>var point = &#123;<br>    x: 0,<br>    y: 0,<br>    moveTo: <span class="hljs-keyword">function</span>(x, y) &#123;<br>        var that = this;<br>        var x = x;<br>        var y = y;<br>        var fn1 = <span class="hljs-keyword">function</span>(x) &#123;<br>            that.x = that.x + x;<br>            <span class="hljs-built_in">return</span> that;<br>        &#125;;<br>        var fn2 = <span class="hljs-keyword">function</span>(y) &#123;<br>            that.y = that.y + y;<br>        &#125;;<br>        <span class="hljs-built_in">return</span> fn1(x);<br>    &#125;<br>&#125;<br><br>console.log(point.moveTo(1,1)); //fn1(x) =&gt; fn1(x).call() 1+0<br><br>//////////////<br><br>var length = 10;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn</span></span>() &#123;<br>  console.log(this.length);<br>&#125;<br><br>var obj = &#123;<br>  length: 5,<br>  method: <span class="hljs-keyword">function</span>(fn) &#123;<br>    fn();<br>    arguments[0]();<br>  &#125;<br>&#125;;<br><br>obj.method(fn, 1);<br><br>fn.call() //10 2<br><br><br><br><br>//////////////////////////////<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">foo</span></span>()&#123;<br>    console.log(this.a)<br>&#125;<br><br>var a = 3;<br><br>var obj = &#123;<br>    a: 2,<br>    foo: foo<br>&#125;;<br><br>obj.foo();  //this = obj obj.a=2<br><br>/////////////////////////////////<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">foo</span></span>() &#123;<br>    console.log( this.a )<br>&#125;<br><br>var obj2 = &#123; <br>    a: 42,<br>    foo: foo<br>&#125;<br><br>var obj1 = &#123;<br>    a: 2,<br>    obj2: obj2<br>&#125;<br><br>obj1.obj2.foo(); //this=obj2 obj2.a =42<br><br>//////////////////////////////<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">foo</span></span>() &#123;<br>    console.log( this.a )<br>&#125;<br><br>var obj1 = &#123;<br>    a: 2,<br>    foo: foo<br>&#125;<br><br>var bar = obj1.foo; <br><br>var a = <span class="hljs-string">"oops, global"</span>; <br><br>bar(); //this=window window.a <br><br>//////////////////////////<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">foo</span></span>() &#123;<br>    console.log( this.a )<br>&#125;<br><br><span class="hljs-keyword">function</span> doFoo( fn )&#123;<br>    fn();<br>&#125;<br><br>var obj = &#123;<br>    a: 2,<br>    foo: foo<br>&#125;<br><br>var a = <span class="hljs-string">"oops, global"</span>; <br><br>doFoo( obj.foo );  //this=window window.a<br><br>//////////////////////////////<br><br><span class="hljs-keyword">function</span> foo( something ) &#123;<br>    console.log( this.a, something)<br>    <span class="hljs-built_in">return</span> this.a + something<br>&#125;<br><br>var obj = &#123;<br>    a: 2<br>&#125;<br><br>var bar = <span class="hljs-function"><span class="hljs-title">function</span></span>() &#123;<br>    <span class="hljs-built_in">return</span> foo.apply( obj, arguments)<br>&#125;<br><br>var b = bar(3);  //foo.apply(obj,3) obj.a + 3 =5<br>console.log(b);  //5<br><br><br>//////////////////////////////<br><br><span class="hljs-keyword">function</span> foo( something ) &#123;<br>    console.log( this.a, something)<br>    <span class="hljs-built_in">return</span> this.a + something<br>&#125;<br><br>var obj = &#123;<br>    a: 2<br>&#125;<br><br>var bar = foo.bind(obj)<br><br>var b = bar(3); //同上<br>console.log(b); <br><br><br>///////////////////////////<br><br><span class="hljs-keyword">function</span> foo(a)&#123;<br>    this.a = a<br>&#125;<br><br>var bar = new foo(2); <br>console.log(bar.a);  //2<br><br>///////////////////////////<br><br><span class="hljs-keyword">function</span> foo(a)&#123;<br>    console.log(this.a)<br>&#125;<br><br>var obj1 = &#123;<br>    a: 2,<br>    foo: foo<br>&#125;<br><br>var obj2 = &#123;<br>    a: 3,<br>    foo: foo<br>&#125;<br><br>obj1.foo();  //2<br>obj2.foo();  //3<br><br>obj1.foo.call(obj2); //3 <br>obj2.foo.call(obj1); //2<br><br><br>////////////////////////////<br><br><span class="hljs-keyword">function</span> foo(something)&#123;<br>    this.a = something<br>&#125;<br><br>var obj1 = &#123;<br>    foo: foo<br>&#125;<br><br>var obj2 = &#123;&#125;<br><br>obj1.foo(2);  //2<br>console.log(obj1.a); //2 <br><br>obj1.foo.call(obj2,3);  //3<br>console.log(obj2.a); //3<br><br>var bar = new obj1.foo(4) <br>console.log(obj1.a); //2,因为上面obj1.foo(2)已赋值<br>console.log(bar.a);//4<br><br>///////////////////////////<br><br><span class="hljs-keyword">function</span> foo(something)&#123;<br>    this.a = something<br>&#125;<br><br>var obj1 = &#123;&#125;<br><br>var bar = foo.bind(obj1);<br>bar(2); //obj1 = &#123;a:2&#125;<br>console.log(obj1.a); //2 <br><br>var baz = new bar(3); <br>console.log(obj1.a); //2<br>console.log(baz.a); //3<br><br>/////////////////////////<br><br><span class="hljs-keyword">function</span> foo(p1,p2)&#123;<br>    this.val = p1 + p2;<br>&#125;<br><br>var bar = foo.bind(null,<span class="hljs-string">'p1'</span>); <br><br>var baz = new bar(<span class="hljs-string">'p2'</span>);<br><br>baz.val; //<br>&#125;<br><br>//////////////////////////<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">foo</span></span>() &#123;<br>    <span class="hljs-built_in">return</span> (a) =&gt; &#123;<br>        console.log(this.a)<br>    &#125;;<br>&#125;<br><br>var obj1 = &#123;<br>    a: 2<br>&#125;;<br><br>var obj2 = &#123;<br>    a: 3<br>&#125;;<br><br>var bar = foo.call(obj1);//2<br>bar.call(obj2); //2<br><br>/////////////////////////<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">foo</span></span>() &#123;<br>    getName = <span class="hljs-function"><span class="hljs-title">function</span></span> () &#123; console.log (1); &#125;;<br>    <span class="hljs-built_in">return</span> this;<br>&#125;<br>foo.getName = <span class="hljs-function"><span class="hljs-title">function</span></span> () &#123; console.log(2);&#125;;<br>foo.prototype.getName = <span class="hljs-function"><span class="hljs-title">function</span></span> () &#123; console.log(3);&#125;;<br>var getName = <span class="hljs-function"><span class="hljs-title">function</span></span> () &#123; console.log(4);&#125;;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">getName</span></span> () &#123; console.log(5);&#125;<br> <br>foo.getName ();                // 2<br>getName ();                    // 4<br>foo().getName ();              // 4 x 1 函数内覆盖了下面的<span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">genName</span></span>()&#123;&#125;<br>getName ();                    // 4 x 1 上面<br>new foo.getName ();            // 3 x 2 先执行后面的,再new<br>new foo().getName ();          // 3<br>new new foo().getName ();      // 3<br></code></pre></td></tr></table></figure></script></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> 面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>虚拟dom</title>
      <link href="/2019/07/27/%E8%99%9A%E6%8B%9Fdom/"/>
      <url>/2019/07/27/%E8%99%9A%E6%8B%9Fdom/</url>
      
        <content type="html"><![CDATA[<p>### </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>类型判断&amp;toString</title>
      <link href="/2019/07/25/%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD/"/>
      <url>/2019/07/25/%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD/</url>
      
        <content type="html"><![CDATA[<h4 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h4><p>操作符返回一个字符串，表示未经计算的操作数的类型<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">typeof undefined //unedfined<br>typeof null //object<br>typeof <span class="hljs-literal">true</span> //boolean<br>typeof <span class="hljs-string">'a'</span> //string<br>typeof Symbol(1) //symbol<br>typeof fn //<span class="hljs-keyword">function</span><br>typeof &#123;&#125; //object<br>typeof [] //object<br><br>typeof String(<span class="hljs-string">'a'</span>) //string<br>typeof new String(<span class="hljs-string">'a'</span>) //object<br></code></pre></td></tr></table></figure></p><h4 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h4><p>instanceof运算符用于测试构造函数的prototype属性是否出现在对象的原型链中的任何位置<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">A</span></span>()&#123;&#125;<br>var a = new A()<br>a instanceof A //<span class="hljs-literal">true</span><br>a instanceof Object //<span class="hljs-literal">true</span><br><br><span class="hljs-string">'a'</span> instanceof String //<span class="hljs-literal">false</span><br>String(<span class="hljs-string">'a'</span>) instanceof String //<span class="hljs-literal">false</span><br>new String(<span class="hljs-string">'a'</span>) instanceof String //<span class="hljs-literal">true</span><br><br>1 instanceof Number //<span class="hljs-literal">false</span><br>new Number(1) instanceof Number //<span class="hljs-literal">false</span><br><br><span class="hljs-literal">true</span> instanceof Boolean //<span class="hljs-literal">false</span><br><br>null instanceof Object //<span class="hljs-literal">false</span><br><br>var fn = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;&#125;<br>fn instanceof Function //<span class="hljs-literal">true</span><br>fn instanceof Object //<span class="hljs-literal">true</span><br><br>[] instanceof Array //<span class="hljs-literal">true</span><br>[] instanceof Object //<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure></p><h4 id="Object-prototype-toString-call"><a href="#Object-prototype-toString-call" class="headerlink" title="Object.prototype.toString.call"></a>Object.prototype.toString.call</h4><p>方法返回一个表示该对象的字符串<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">Object.prototype.toString.call(1) //<span class="hljs-string">"[object Number]"</span><br>Object.prototype.toString.call(<span class="hljs-string">'a'</span>) //<span class="hljs-string">"[object String]"</span><br>Object.prototype.toString.call(undefined) //<span class="hljs-string">"[object Undefined]"</span><br>Object.prototype.toString.call(null) //<span class="hljs-string">"[object Null]"</span><br>Object.prototype.toString.call([]) //<span class="hljs-string">"[object Array]"</span><br>Object.prototype.toString.call(String) //<span class="hljs-string">"[object Function]"</span><br>Object.prototype.toString.call(new String) //<span class="hljs-string">"[object String]"</span><br>Object.prototype.toString.call(new Date) //<span class="hljs-string">"[object Date]"</span><br>Object.prototype.toString.call(Math) //<span class="hljs-string">"[object Math]"</span><br></code></pre></td></tr></table></figure></p><h4 id="Array-isArray"><a href="#Array-isArray" class="headerlink" title="Array.isArray"></a>Array.isArray</h4><p>用于确定传递的值是否是一个 Array<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">Array.isArray([1,2,3]) //<span class="hljs-literal">true</span><br>Array.isArray(&#123;a:1&#125;) //<span class="hljs-literal">false</span><br><br>Array.isArray(new Array())//<span class="hljs-literal">true</span><br>// 鲜为人知的事实：其实 Array.prototype 也是一个数组。<br>Array.isArray(Array.prototype) //<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure></p><h4 id="Array"><a href="#Array" class="headerlink" title="Array."></a>Array.</h4>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6数组</title>
      <link href="/2019/07/24/ES6-%E6%95%B0%E7%BB%84/"/>
      <url>/2019/07/24/ES6-%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<h4 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from"></a>Array.from</h4><p>把不是数组的变成数组,常用语将伪数组变成数组.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs undefined">Array.from(&#123;0:1,1:2&#125;) //Array []<br><br>Array.from(&#123;0:1,1:2,length:2&#125;) //Array [ 1, 2 ]<br><br>Array.from(&#123;0:1,1:2,length:3&#125;) //Array(3) [ 1, 2, undefined ]<br><br>Array.from(&#123;0:1,1:2,length:1&#125;) //Array [ 1 ]<br><br>Array.from(&#123;0:1,1:2,length:3&#125;) //Array(3) [ 1, 2, undefined ]<br></code></pre></td></tr></table></figure></p><h5 id="ES5的方法"><a href="#ES5的方法" class="headerlink" title="ES5的方法"></a>ES5的方法</h5><p>Array.prototype.slice.call()</p><h4 id="Array-fill"><a href="#Array-fill" class="headerlink" title="Array.fill"></a>Array.fill</h4><p>将数组每项填充成传入的值,第一个参数是传入值,第二三参数是开始位置与结束位置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">[0,1].fill(2) //[2,2]<br><br>[0,1].fill(2,1) //[0,2]<br>[<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>,<span class="hljs-string">'c'</span>,<span class="hljs-string">'d'</span>].fill(<span class="hljs-string">'z'</span>,1,3) //[ <span class="hljs-string">"a"</span>, <span class="hljs-string">"z"</span>, <span class="hljs-string">"z"</span>, <span class="hljs-string">"d"</span> ]<br></code></pre></td></tr></table></figure><h5 id="生成有n个n的数组"><a href="#生成有n个n的数组" class="headerlink" title="生成有n个n的数组"></a>生成有n个n的数组</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> length = Array.from(&#123;length:6&#125;)<br>length.fill(6)<br>[6,6,6,6,6,6]<br></code></pre></td></tr></table></figure><h4 id="Array-find"><a href="#Array-find" class="headerlink" title="Array.find"></a>Array.find</h4><p>传入函数,返回匹配结果的项<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">var arr = [&#123;id:1,name:<span class="hljs-string">'a'</span>&#125;,&#123;id:2,name:<span class="hljs-string">'b'</span>&#125;]<br>arr.find(item=&gt;&#123;<br>  item.id === 1<br>&#125;)<br>//&#123;id:1,name:<span class="hljs-string">'a'</span>&#125;<br></code></pre></td></tr></table></figure></p><h5 id="与filter的区别"><a href="#与filter的区别" class="headerlink" title="与filter的区别"></a>与filter的区别</h5><p>filter可找多个<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">var arr = [&#123;age:19,name:<span class="hljs-string">'a'</span>&#125;,&#123;age:18,name:<span class="hljs-string">'b'</span>&#125;,&#123;age:19,name:<span class="hljs-string">'c'</span>&#125;]<br>arr.filter(item=&gt;&#123;<br>  item.age === 19<br>&#125;)<br>//[&#123;age:19,name:<span class="hljs-string">'a'</span>&#125;,&#123;age:19,name:<span class="hljs-string">'c'</span>&#125;]<br></code></pre></td></tr></table></figure></p><h4 id="Array-findIndex"><a href="#Array-findIndex" class="headerlink" title="Array.findIndex"></a>Array.findIndex</h4><p>返回匹配项的index</p><h4 id="Array-entries-key-values"><a href="#Array-entries-key-values" class="headerlink" title="Array.entries/key/values"></a>Array.entries/key/values</h4><p>这3个api都是可得到数组的可迭代对象<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> arr = [<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>,<span class="hljs-string">'c'</span>]<br><span class="hljs-built_in">let</span> obj = arr.entries()<br>console.log(obj.next())[0,<span class="hljs-string">'a'</span>]<br>console.log(obj.next())[1,<span class="hljs-string">'b'</span>]<br>console.log(obj.next())[2,<span class="hljs-string">'c'</span>]<br><br><br><span class="hljs-built_in">let</span> arr = [<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>,<span class="hljs-string">'c'</span>]<br><span class="hljs-built_in">let</span> obj = arr.key()<br>console.log(obj.next())[0]<br>console.log(obj.next())[1]<br>console.log(obj.next())[2]<br><br><span class="hljs-built_in">let</span> arr = [<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>,<span class="hljs-string">'c'</span>]<br><span class="hljs-built_in">let</span> obj = arr.value()<br>console.log(obj.next())[<span class="hljs-string">'a'</span>]<br>console.log(obj.next())[<span class="hljs-string">'b'</span>]<br>console.log(obj.next())[<span class="hljs-string">'c'</span>]<br></code></pre></td></tr></table></figure></p><h4 id="…操作符"><a href="#…操作符" class="headerlink" title="…操作符"></a>…操作符</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> arr1 = [<span class="hljs-string">'a'</span>]<br><span class="hljs-built_in">let</span> arr2 = [<span class="hljs-string">'c'</span>]<br><span class="hljs-built_in">let</span> arr3 = [<span class="hljs-string">'b'</span>]<br><br><span class="hljs-built_in">let</span> arr4 = [...arr1,...arr2,...arr3] //[<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>,<span class="hljs-string">'c'</span>]<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue-修饰符</title>
      <link href="/2019/07/21/Vue%E4%BA%8B%E4%BB%B6-%E4%BF%AE%E9%A5%B0%E7%AC%A6/"/>
      <url>/2019/07/21/Vue%E4%BA%8B%E4%BB%B6-%E4%BF%AE%E9%A5%B0%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<h4 id="stop"><a href="#stop" class="headerlink" title=".stop"></a>.stop</h4><p>阻止事件的传播(冒泡,捕获)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;template&gt;<br>    &lt;div @click.stop&gt;<br>        &lt;div&gt;&lt;/div&gt;<br>        &lt;button @click=<span class="hljs-string">"a"</span>&gt;Click&lt;/button&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure><h4 id="sync"><a href="#sync" class="headerlink" title=".sync"></a>.sync</h4><p>更新绑定属性<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;comp :title.sync=<span class="hljs-string">"1"</span>&gt;&lt;/comp&gt;<br><br>//comp<br><span class="hljs-function"><span class="hljs-title">data</span></span>()&#123;<br>    title:<span class="hljs-string">'childTitle'</span><br>&#125;,<br><span class="hljs-function"><span class="hljs-title">mounted</span></span>()&#123;<br>    this.<span class="hljs-variable">$emit</span>(<span class="hljs-string">'update:title'</span>,this.title)<br>&#125;<br></code></pre></td></tr></table></figure></p><h4 id="native"><a href="#native" class="headerlink" title="native"></a>native</h4><h4 id="once"><a href="#once" class="headerlink" title=".once"></a>.once</h4><p>事件只触发一次</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div @click.once=<span class="hljs-string">"a"</span>&gt;<br>    111<br>&lt;/div&gt;<br></code></pre></td></tr></table></figure><h4 id="self"><a href="#self" class="headerlink" title=".self"></a>.self</h4><p>事件是当前元素触发(内部触发不了)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div @click.self=<span class="hljs-string">"a"</span>&gt;<br>    &lt;div&gt;1&lt;/div&gt;<br>    &lt;div&gt;2&lt;/div&gt;<br>&lt;/div&gt;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>css三角形</title>
      <link href="/2019/07/20/css%E4%B8%89%E8%A7%92%E5%BD%A2/"/>
      <url>/2019/07/20/css%E4%B8%89%E8%A7%92%E5%BD%A2/</url>
      
        <content type="html"><![CDATA[<h4 id="普通三角形"><a href="#普通三角形" class="headerlink" title="普通三角形"></a>普通三角形</h4><p>利border四边颜色不等画等边三角形</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">.triangle&#123;<br>    width:0;<br>    height:0;<br>    border: 10px solid transparent;<br>&#125;<br>.triangle.top&#123;//向上<br>    border-bottom-color: <span class="hljs-comment">#000;</span><br>&#125;<br>.triangle.bottom&#123;//向下<br>    border-bottom-color: <span class="hljs-comment">#000;</span><br>&#125;<br>.triangle.left&#123;//向左<br>    border-left-color: <span class="hljs-comment">#000;</span><br>&#125;<br>.triangle.right&#123;//向右<br>    border-right-color: <span class="hljs-comment">#000;</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="常见应用-盒子下创建小三角形"><a href="#常见应用-盒子下创建小三角形" class="headerlink" title="常见应用:盒子下创建小三角形"></a>常见应用:盒子下创建小三角形</h4><p>利用伪元素<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">.wrapper&#123;<br>    position: relative;<br>    width:100px;<br>    height:100px;<br>    background:<span class="hljs-comment">#fff;</span><br>    border:1px solid <span class="hljs-comment">#000;</span><br>    &amp;::before,&amp;::after&#123;<br>        content: <span class="hljs-string">""</span>;<br>        display: block;<br>        position: absolute;<br>        width:0;<br>        height:0;<br>        border: 10px solid transparent;//三角形边长<br>    &#125;<br>    &amp;::before&#123;<br>        top: 100%;//位于盒子底部<br>        border-top-color: <span class="hljs-comment">#000;//三角形边框</span><br>    &#125;<br>    &amp;::after&#123;<br>        top: calc(100% - 1px);//三角形border宽度<br>        border-top-color:<span class="hljs-comment">#fff;//三角形背景</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git分支</title>
      <link href="/2019/07/10/git-branch/"/>
      <url>/2019/07/10/git-branch/</url>
      
        <content type="html"><![CDATA[<h4 id="git-branch-创建分支"><a href="#git-branch-创建分支" class="headerlink" title="git branch 创建分支"></a>git branch 创建分支</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git branch abc //创建分支aaa<br>git push orgin abc:abc //推送本地分支aaa到远程分支aaa<br></code></pre></td></tr></table></figure><h4 id="git-checkout-切换分支"><a href="#git-checkout-切换分支" class="headerlink" title="git checkout 切换分支"></a>git checkout 切换分支</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git checkout aaa //切换到分支aaa<br></code></pre></td></tr></table></figure><h4 id="git-log-查看推送历史"><a href="#git-log-查看推送历史" class="headerlink" title="git log 查看推送历史"></a>git log 查看推送历史</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">log</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6模块化</title>
      <link href="/2019/07/09/ES6%E6%A8%A1%E5%9D%97%E5%8C%96/"/>
      <url>/2019/07/09/ES6%E6%A8%A1%E5%9D%97%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h4 id="import"><a href="#import" class="headerlink" title="import"></a>import</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;script <span class="hljs-built_in">type</span>=<span class="hljs-string">"module"</span> src=<span class="hljs-string">"main.js"</span>&gt;&lt;/script&gt;<br><br>//main.js<br><br>import module1 from <span class="hljs-string">'./module1.js'</span><br>import module2 from <span class="hljs-string">'./module2.js'</span><br>import abc from <span class="hljs-string">'abc.js'</span><br><br>setTimeout(()=&gt;&#123;<br>    module1(abc);<br>    module2();<br>&#125;,3000)<br><br>//moudule1<br><span class="hljs-built_in">export</span> default <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    //<br>&#125;<br><br>//moudule2<br><span class="hljs-built_in">export</span> default <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    //<br>&#125;<br><br>//abc<br><span class="hljs-built_in">let</span> a = [<span class="hljs-string">'a'</span>]<br> <span class="hljs-built_in">export</span> default a<br></code></pre></td></tr></table></figure><h5 id="单纯引入"><a href="#单纯引入" class="headerlink" title="单纯引入"></a>单纯引入</h5><p>直接执行模块里的代码,函数不执行,调用函数需要export<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">//module<br>console.log(<span class="hljs-string">'code'</span>)<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">x</span></span>()&#123;<br>    console.log(<span class="hljs-string">'function'</span>)<br>&#125;<br><br>//main.js<br>import <span class="hljs-string">'./module'</span><br><br>//code<br></code></pre></td></tr></table></figure></p><h4 id="export"><a href="#export" class="headerlink" title="export"></a>export</h4><p>默认导出的,引用时可以任意命名,具体的要使用具体的名字.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">//modules<br><br><span class="hljs-built_in">let</span> name = <span class="hljs-string">'myname'</span><br><span class="hljs-built_in">let</span> age = 18<br><span class="hljs-built_in">let</span> sayhi = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    console.log(hi)<br>&#125;<br><span class="hljs-built_in">export</span> default sayhi<br><span class="hljs-built_in">export</span> &#123;name,age&#125;<br><br>//main<br><br>import xxx &#123;name ,age&#125; from <span class="hljs-string">'./modules'</span><br>console.log(xxx()) //hi<br>console.log(name,age) // <span class="hljs-string">'myname'</span> 18<br></code></pre></td></tr></table></figure></p><h4 id="as"><a href="#as" class="headerlink" title="as"></a>as</h4><p>当导出命名重复时,需要as,否则报错<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">//modules1<br><span class="hljs-built_in">let</span> name = <span class="hljs-string">'小明'</span><br><span class="hljs-built_in">export</span> name<br>//modules2<br><span class="hljs-built_in">let</span> name = <span class="hljs-string">'小红'</span><br><span class="hljs-built_in">export</span> name<br><br>//main.js<br>import &#123;name as name1&#125; from <span class="hljs-string">'./module1.js'</span><br>import &#123;name as name2&#125; from <span class="hljs-string">'./module2.js'</span><br>console.log(name1,name2) //小明小红<br></code></pre></td></tr></table></figure></p><h4 id><a href="#" class="headerlink" title="*"></a>*</h4><p>全部导出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">import * as x from <span class="hljs-string">'./modules'</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6字面量 Literal</title>
      <link href="/2019/07/09/ES6%E5%AD%97%E9%9D%A2%E9%87%8F/"/>
      <url>/2019/07/09/ES6%E5%AD%97%E9%9D%A2%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<h4 id="八进制"><a href="#八进制" class="headerlink" title="八进制"></a>八进制</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">ES5<br>07 //7<br><br>ES6<br>0o7 //7<br></code></pre></td></tr></table></figure><h4 id="字符串支持unicode"><a href="#字符串支持unicode" class="headerlink" title="字符串支持unicode"></a>字符串支持unicode</h4><p> ES5部分支持,只能存2字节字符串(16位2进制)<br> 1字节=16进制</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-string">'\ud834\udf06'</span> //𝌆<br><br><span class="hljs-string">'\ud834\udf06'</span>.length //2<br></code></pre></td></tr></table></figure><p>ES6</p><ol><li><p>String.fromCodePonit<br> Unicode码返回对应字符串</p></li><li><p>String.prototype.codePonitAt()<br> 字符串返回对应Unicode码</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Symbol&amp;迭代器</title>
      <link href="/2019/07/09/Symbol/"/>
      <url>/2019/07/09/Symbol/</url>
      
        <content type="html"><![CDATA[<h4 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h4><p>唯一值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">var a = new Symbol();<br></code></pre></td></tr></table></figure><h4 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h4><p>它提供一个next()方法,用来返回序列中的下一项.<br>迭代器对象一旦被创建,就可以反复调用next().</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> 生成器()&#123;<br>    var _version = 0<br>    var max = 10<br>    <span class="hljs-built_in">return</span>&#123;<br>        <span class="hljs-function"><span class="hljs-title">next</span></span>()&#123;<br>             _version++<br>            <span class="hljs-built_in">return</span> &#123;<br>                version:_version<br>                <span class="hljs-keyword">done</span>:<span class="hljs-literal">false</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h4><p>迭代器生成的语法糖<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span>* 生成器()&#123;<br>    var version = 0;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>        version += 1<br>        yield version<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><h4 id="for-of"><a href="#for-of" class="headerlink" title="for of"></a>for of</h4><p>访问迭代器的语法糖</p><p>数组能迭代,对象不能迭代,因为数组有属性Symbol.iterator</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> key of array)&#123;<br>    console.log(key)<br>&#125;<br><br>array[Symbol.iterator] //有值<br><br><span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> key of obj)&#123;<br>    console.log(key)<br>&#125;//报错<br><br>obj[Symbol.iterator] //undefined<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6对象</title>
      <link href="/2019/07/08/ES6%E5%AF%B9%E8%B1%A1/"/>
      <url>/2019/07/08/ES6%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<h4 id="生成空对象"><a href="#生成空对象" class="headerlink" title="生成空对象"></a>生成空对象</h4><h5 id="1-es5"><a href="#1-es5" class="headerlink" title="1. es5"></a>1. es5</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">var a = new Object()<br><br>var a = &#123;&#125;<br><br>&#123;<br>    _proto_:<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-es6"><a href="#2-es6" class="headerlink" title="2. es6"></a>2. es6</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">var a = Object.create(null)<br><br>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>es5 的还有原型,es6 是真正的空对象</p><h4 id="属性定义"><a href="#属性定义" class="headerlink" title="属性定义"></a>属性定义</h4><h5 id="1-key-与属性相同可简写"><a href="#1-key-与属性相同可简写" class="headerlink" title="1. key 与属性相同可简写"></a>1. key 与属性相同可简写</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">var a = 1<br>    b = 2<br><br>var obj =&#123;<br>    a,<br>    b<br>&#125;<br>//<br>&#123;<br>    a:1,<br>    b:2<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-使用变量作为-key"><a href="#2-使用变量作为-key" class="headerlink" title="2. 使用变量作为 key"></a>2. 使用变量作为 key</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">es5:<br><br>var name = <span class="hljs-string">'a'</span><br>var obj = &#123;&#125;<br>obj[name] = 1<br>&#123;<br>    a:1<br>&#125;<br><br>es6:<br>var name = <span class="hljs-string">'a'</span><br>var obj = &#123;[name]:1&#125;<br>&#123;<br>    a:1<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-方法定义"><a href="#4-方法定义" class="headerlink" title="4 方法定义"></a>4 方法定义</h4><p>对象属性可以是一个函数,getter,setter 方法.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">var obj = &#123;<br>    _age:18<br>    get <span class="hljs-function"><span class="hljs-title">age</span></span>()&#123;<span class="hljs-built_in">return</span> obj._age&#125;<br>    <span class="hljs-built_in">set</span> age(value)&#123;value &lt; 100 ? obj._age = value : obj._age = 100&#125;<br>&#125;<br><br>obj.age = 1000<br>obj&#123;<br>    age:100<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="对象拷贝"><a href="#对象拷贝" class="headerlink" title="对象拷贝"></a>对象拷贝</h4><p>Object.assign 与…</p><ol><li>key 相同时,后面定义的覆盖前面的</li><li>改变被拷贝对对象的属性假如是对象,只会拷贝引用地址,原对象也会改变</li><li>仅拷贝可枚举对象.</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs bash">var obj1 = &#123;a:1,b:2,c:3,obj:&#123;name:<span class="hljs-string">'a'</span>&#125;&#125;<br>var obj2 = Object.assign(&#123;&#125;,obj1)<br><br>obj2.a = 100;<br>obj1.a //1<br>obj2.obj.name = <span class="hljs-string">'b'</span><br>obj1.obj.name //b<br><br>var obj3 = &#123;..obj1&#125;<br>obj3 = &#123;a:1,b:2,c:3&#125;<br><br>obj3.a = 100;<br>obj1.a //1<br><br>var obj1 = &#123;a:1,b:2,c:3&#125;<br>var obj2 = &#123;a:2,b:2,c:3,d4&#125;<br>var obj3 = &#123;...obj1,...obj2&#125;<br><br>obj3 =&#123;<br>    a:2,<br>    b:2,<br>    c:3,<br>    d4<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Oject-definedProperty"><a href="#Oject-definedProperty" class="headerlink" title="Oject.definedProperty()"></a>Oject.definedProperty()</h4><p>该方法会直接在一个对象上定义一个新属性,或修改一个属性的现有属性,并返回这个对象.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">Object.definedProperty(obj,prop,descriptor)<br><br>Object.definedProperty(obj,<span class="hljs-string">'x'</span>,&#123;<br>    <span class="hljs-function"><span class="hljs-title">get</span></span>()&#123;&#125;<br>    <span class="hljs-built_in">set</span>(value)&#123;&#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h5 id="属性描述符"><a href="#属性描述符" class="headerlink" title="属性描述符"></a>属性描述符</h5><ol><li>configurable<br>是否可再次配置,默认 false</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">Object.definedProperty(o,<span class="hljs-string">'age'</span>,&#123;writable:fasle&#125;)<br>o.age = 1;<br>o.age //undefined<br>Object.definedProperty(o,<span class="hljs-string">'age'</span>,&#123;configurable:<span class="hljs-literal">true</span>&#125;)//报错<br>Object.definedProperty(o,<span class="hljs-string">'age'</span>,&#123;writable:<span class="hljs-literal">true</span>&#125;)//报错<br><br>//刷新<br>Object.definedProperty(o,<span class="hljs-string">'age'</span>,&#123;configurable:<span class="hljs-literal">true</span>&#125;)<br>Object.definedProperty(o,<span class="hljs-string">'age'</span>,&#123;writable:fasle&#125;)<br>Object.definedProperty(o,<span class="hljs-string">'age'</span>,&#123;writable:<span class="hljs-literal">true</span>&#125;)<br></code></pre></td></tr></table></figure><ol start="2"><li>enumrable<br>是否能枚举,默认 false</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">var a = [1,2,3]<br><span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> key <span class="hljs-keyword">in</span> a)&#123;<br>    console.log(key)//0,1,2<br>&#125;<br><br>Object.definedProperty(a,<span class="hljs-string">'0'</span>,&#123;enumrable:fasle&#125;)<br><span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> key <span class="hljs-keyword">in</span> a)&#123;<br>    console.log(key)//1,2<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li><p>value</p></li><li><p>writable<br>属性是否可写入,默认 true</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">Object.definedProperty(o,<span class="hljs-string">'age'</span>,&#123;writable:fasle&#125;)<br>o.age = 1;<br>o.age //undefined<br></code></pre></td></tr></table></figure><ol start="5"><li>get</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">Object.definedProperty(o,<span class="hljs-string">'age'</span>,&#123;<span class="hljs-function"><span class="hljs-title">get</span></span>()&#123;<br>    <span class="hljs-built_in">return</span> <span class="hljs-string">'100'</span><br>&#125;&#125;)<br>o.age = 1;<br>o.age //100<br></code></pre></td></tr></table></figure><ol start="6"><li>set</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">Object.definedProperty(o,<span class="hljs-string">'age'</span>,&#123;<span class="hljs-built_in">set</span>(val)&#123;<br>    <span class="hljs-built_in">return</span> val &lt; 100 ? val : 100<br>&#125;&#125;)<br>o.age = 1000;<br>o.age //100<br></code></pre></td></tr></table></figure><h4 id="Oject-definedProperties"><a href="#Oject-definedProperties" class="headerlink" title="Oject.definedProperties()"></a>Oject.definedProperties()</h4><p>定义多个属性</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">Object.definedProperties(obj,&#123;<br>    <span class="hljs-string">'a'</span>:&#123;<br>        value:1,<br>        writable:<span class="hljs-literal">true</span><br>    &#125;,<br>    <span class="hljs-string">'b'</span>:&#123;<br>        value:2,<br>        writable:<span class="hljs-literal">true</span><br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6变量声明</title>
      <link href="/2019/07/08/es6%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E/"/>
      <url>/2019/07/08/es6%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<h4 id="let"><a href="#let" class="headerlink" title="let"></a>let</h4><ol><li>作用声明局部变量 ,作用域在最近的{}之间.</li><li>不会进行变量名声明提升</li><li>不能重复声明</li></ol><p>在 es6 之前,声明局部变量要使用立即执行函数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<br>    <span class="hljs-built_in">let</span> a = 1<br>&#125;<br>console.log(1) //报错<br><br><br>&#123;<br>    <span class="hljs-built_in">let</span> a = 1<br>    &#123;<br>        console.log(a)//报错<br>        <span class="hljs-built_in">let</span> a =2<br>    &#125;<br>&#125;<br><br>&#123;<br>    <span class="hljs-built_in">let</span> a = 1;<br>    <span class="hljs-built_in">let</span> a = 2;//报错<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="const"><a href="#const" class="headerlink" title="const"></a>const</h4><p>同 let,但只有一次赋值机会,必须在声明的时候赋值.<br>{<br>const a //报错<br>}</p><h4 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h4><p>1.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span>(var i = 0;i &lt; 6;i++)&#123;<br>    ///<br>&#125;<br>console.log(i);/6<br></code></pre></td></tr></table></figure><p>解:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bah">变成<br>var i<br>for(i = 0;i &lt; 6;i++)&#123;<br>    0,1,2,3,4,5<br>&#125;<br>console.log(i);/6<br></code></pre></td></tr></table></figure><p>2.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span>(var i = 0;i &lt; 6;i++)&#123;<br>    <span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn</span></span>()&#123;<br>        console.log(i)<br>    &#125;<br>    button.onclick = fn//因为执行的时候i已经变成6了.<br>&#125;<br>6<br></code></pre></td></tr></table></figure><p>3.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;ul&gt;<br>    &lt;li&gt;1&lt;/li&gt;<br>    &lt;li&gt;2&lt;/li&gt;<br>    &lt;li&gt;3&lt;/li&gt;<br>    &lt;li&gt;4&lt;/li&gt;<br>    &lt;li&gt;5&lt;/li&gt;<br>    &lt;li&gt;6&lt;/li&gt;<br>&lt;/ul&gt;<br><br>var liTags = document.querySelectorAll(<span class="hljs-string">'li'</span>);<br><span class="hljs-keyword">for</span>(var i = 0;i&lt;liTags.length;i++)&#123;<br>    liTags[i].onclick = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        console.log(i);//不管点哪个按钮,都是6<br>    &#125;<br>&#125;<br><br>改成<br><br><span class="hljs-keyword">for</span>(var i = 0;i&lt;liTags.length;i++)&#123;<br>    (<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        var j = arguments[0];//外面的i赋值给j<br>        liTags[i].onclick = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            console.log(j)//点哪个打印哪个<br>        &#125;<br>    &#125;)(i)<br>&#125;<br><br>或者<br><br><span class="hljs-keyword">for</span>(var i = 0;i&lt;liTags.length;i++)&#123;<br>    <span class="hljs-built_in">let</span> j = i;<br>    liTags[j].onclick = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        console.log(j)//点哪个打印哪个<br>    &#125;<br>&#125;<br><br>或<br><br><span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> i = 0;i&lt;liTags.length;i++)&#123;<br>    liTags[i].onclick = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        console.log(i);//点哪个打印哪个<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Websocket</title>
      <link href="/2019/04/18/Websocket/"/>
      <url>/2019/04/18/Websocket/</url>
      
        <content type="html"><![CDATA[<h4 id="什么是-websocket"><a href="#什么是-websocket" class="headerlink" title="什么是 websocket"></a>什么是 websocket</h4><p>websocket 是 HTML5 新增的一种通信协议,服务端可主动给客户端推送消息,客户端也可向服务端主动发送消息.</p><p>使用 websocket api 浏览器与服务器只需要做一个握手动作,两者形成通道,实现持久化的双向通讯.</p><h4 id="websocket-的优点"><a href="#websocket-的优点" class="headerlink" title="websocket 的优点"></a>websocket 的优点</h4><p>当还不存在 websocket 的时候,以前用 ajax 轮询与 http long poll 实现该功能.</p><h5 id="ajax-轮询"><a href="#ajax-轮询" class="headerlink" title="ajax 轮询"></a>ajax 轮询</h5><p>浏览器定时给服务器发送 ajax 请求,当服务器有新消息时候,返回数据.</p><p>流程如下:</p><p>浏览器:我要获取新数据.<br>服务器:没有.<br>浏览器:我要获取新数据.<br>服务器:没有.<br>浏览器:我要获取新数据.<br>服务器:没有.<br>浏览器:我要获取新数据.<br>服务器:有了,给你.</p><h5 id="http-long-poll"><a href="#http-long-poll" class="headerlink" title="http long poll"></a>http long poll</h5><p>http long poll 是通过阻塞模型(拨打电话之后不挂断),浏览器与服务器建立链接后,假如没有新消息则不返回数据,知道有消息才返回,再重新建立链接.</p><p>浏览器:等有数据的时候给我吧.<br>…<br>…<br>…<br>服务:有数据了,给你.<br>浏览器:等有数据的时候给我吧.<br>…<br>…<br>…<br>服务:有数据了,给你.</p><p>以上两者方法是非常消耗资源的,第一种需要更快的服务器,第二种则需要服务器能处理更多的请求.</p><h4 id="websocket-的作用"><a href="#websocket-的作用" class="headerlink" title="websocket 的作用"></a>websocket 的作用</h4><p>websocket 的出现解决了这个问题.首先,websocket 是双向通信协议,服务器可获得新消息主动给浏览器发送消息.</p><h5 id="websocket-握手过程"><a href="#websocket-握手过程" class="headerlink" title="websocket 握手过程"></a>websocket 握手过程</h5><p>浏览器通过调用 new websocket(url)方法与服务器建立链接.</p><ol><li>浏览器与服务器进行三次握手,假如失败则不继续,并报错.</li><li>建立连接成功后,浏览器通过 http 协议传送 websocket 的版本号,协议的字版号,原始地址,主机地址等字段给服务器.</li><li>服务器接收浏览器的请求,假如上述字段正确,则接受本次握手,并返回对应数据,包含 http 相关的信息.</li><li>浏览器接收数据,假如成功则触发 open 事件,浏览器可通过 send 方法发送数据,假如失败则触发 error 事件.</li></ol><h4 id="websocket-api"><a href="#websocket-api" class="headerlink" title="websocket api"></a>websocket api</h4><p>使用 websocket api 建立与服务器的连接.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">const socket = new Websocket(url);<br></code></pre></td></tr></table></figure><h4 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h4><h5 id="open"><a href="#open" class="headerlink" title="open"></a>open</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">socket.onopen = (e)=&gt;&#123;<br>    socket.send(<span class="hljs-string">'hello'</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="message"><a href="#message" class="headerlink" title="message"></a>message</h5><p>服务器有响应信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">socket.onmessage = (e)=&gt;&#123;<br>    console.log(e.data)<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="error"><a href="#error" class="headerlink" title="error"></a>error</h5><p>当触发错误时,会关闭连接,并返回错误信息.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">socket.onerror = (e)=&gt;&#123;<br>    console.log(<span class="hljs-string">'error'</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="close"><a href="#close" class="headerlink" title="close"></a>close</h5><p>当关闭时触发</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs undefined">socket.onclose = (event) =&gt; &#123;<br>    debugger;<br>&#125;<br></code></pre></td></tr></table></figure><p>event 的参数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">1. event.wasClean [boolean],假如为<span class="hljs-literal">true</span>,表示客户端或服务端调用close主动关闭.<br>2. event.code [number] 关闭的状态码<br>3. event.reason [string] 关闭的原因<br><br>//主动close的方法<br>socket.close(code,reason)<br></code></pre></td></tr></table></figure><h5 id="send"><a href="#send" class="headerlink" title="send"></a>send</h5><p>send(data),发送 data,可以是 string/blob/ArrayBuffer/ByteBuffer 等<br>send 必须在建立链接成功之后,一般在 open 事件后触发.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">socket.onopen = ()=&gt;&#123;<br>    soclet.send(<span class="hljs-string">'hello'</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>判断是否还连接着</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span>(socket.readyState == WebSocket.OPEN)&#123;<br>    socket.send(data)<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h4><p>CONNECTING 0 连接还未开启<br>OPEN 1 连接开启可以通信<br>CLOSING 2 连接正在关闭中<br>CLOSED 3 连接已经关闭</p><h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><p>binaryType String<br>表示连接传输的二进制数据类型的字符串。默认为”blob”。</p><p>bufferedAmount Number<br>只读。如果使用 send()方法发送的数据过大，虽然 send()方法会马上执行，但数据并不是马上传输。浏览器会缓存应用流出的数据，你可以使用 bufferedAmount 属性检查已经进入队列但还未被传输的数据大小。在一定程度上可以避免网络饱和。</p><p>protocol String/Array<br>在构造函数中，protocol 参数让服务端知道客户端使用的 WebSocket 协议。而在实例 socket 中就是连接建立前为空，连接建立后为客户端和服务器端确定下来的协议名称。</p><p>readyState String<br>只读。连接当前状态，这些状态是与常量相对应的。</p><p>extensions String<br>服务器选择的扩展。目前，这只是一个空字符串或通过连接协商的扩展列表。</p><h4 id="Socket-io"><a href="#Socket-io" class="headerlink" title="Socket.io"></a>Socket.io</h4><p>Socket.io 是一个跨浏览器支持 websocket 的实时通讯的 js.</p><p><a href="http://socket.io/docs/" target="_blank" rel="noopener">http://socket.io/docs/</a></p><h5 id="安装与引入"><a href="#安装与引入" class="headerlink" title="安装与引入"></a>安装与引入</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">npm install --save socket.io<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;script src=<span class="hljs-string">"/socket.io/socket.io.js"</span>&gt;&lt;/script&gt;<br>const socket = io(url);<br><br>或者<br><br>improt io from <span class="hljs-string">'socket.io-client'</span><br><br>const socket = io(url);<br></code></pre></td></tr></table></figure><h5 id="API"><a href="#API" class="headerlink" title="API"></a>API</h5><p>官方文档:<br><a href="https://socket.io/docs/client-api/" target="_blank" rel="noopener">https://socket.io/docs/client-api/</a></p>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>web图片的使用</title>
      <link href="/2019/04/16/web%E5%9B%BE%E7%89%87%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/04/16/web%E5%9B%BE%E7%89%87%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h4 id="FileReader"><a href="#FileReader" class="headerlink" title="FileReader"></a>FileReader</h4><p>FileReader 对象,使用 File 或 Blob 对象指定要读取的文件或数据.</p><p>其中 File 对象可以是: 1. input 元素上选择文件后返回的 FileList 对象 2. 拖放操作生成的 DataTransfer 对象 3. 来自 HtmlCanvasElment 上执行 mozGetAsFile()方法后返回的结果.</p><h5 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h5><h6 id="FileReader-error-只读"><a href="#FileReader-error-只读" class="headerlink" title="FileReader.error(只读)"></a>FileReader.error(只读)</h6><p>表示在读取文件时发生的错误</p><h6 id="FileReader-readyState-只读"><a href="#FileReader-readyState-只读" class="headerlink" title="FileReader.readyState(只读)"></a>FileReader.readyState(只读)</h6><p>表示 FileReader 状态数组 1. EMPTY 0 等待 2. LOADING 1 正在被加载 3. DONE 2 已完成全部的读取请求.</p><h6 id="FileReader-result-只读"><a href="#FileReader-result-只读" class="headerlink" title="FileReader.result(只读)"></a>FileReader.result(只读)</h6><p>文件的内容.该属性仅在读取操作完成后才生效,数据的格式取决于使用哪个方法来启动读取操作.</p><h5 id="事件处理函数"><a href="#事件处理函数" class="headerlink" title="事件处理函数"></a>事件处理函数</h5><h6 id="FileReader-onabort"><a href="#FileReader-onabort" class="headerlink" title="FileReader.onabort:"></a>FileReader.onabort:</h6><p>处理 abort 事件.该事件在读取操作被中断时触发.</p><h6 id="FileReader-onerror："><a href="#FileReader-onerror：" class="headerlink" title="FileReader.onerror："></a>FileReader.onerror：</h6><p>处理 error 事件.该事件在读取操作发生错误时触发.</p><h6 id="FileReader-onload："><a href="#FileReader-onload：" class="headerlink" title="FileReader.onload："></a>FileReader.onload：</h6><p>处理 load 事件.该事件在读取操作完成时触发.</p><h6 id="FileReader-onloadstart："><a href="#FileReader-onloadstart：" class="headerlink" title="FileReader.onloadstart："></a>FileReader.onloadstart：</h6><p>处理 loadstart 事件。该事件在读取操作开始时触发.</p><h6 id="FileReader-onloadend："><a href="#FileReader-onloadend：" class="headerlink" title="FileReader.onloadend："></a>FileReader.onloadend：</h6><p>处理 loadend 事件.该事件在读取操作结束时(要么成功，要么失败)触发.</p><h6 id="FileReader-onprogress："><a href="#FileReader-onprogress：" class="headerlink" title="FileReader.onprogress："></a>FileReader.onprogress：</h6><p>处理 progress 事件.该事件在读取 Blob 时触发.</p><h5 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h5><h6 id="FileReader-abort-："><a href="#FileReader-abort-：" class="headerlink" title="FileReader.abort()："></a>FileReader.abort()：</h6><p>中止读取操作.在返回时，readyState 属性为 DONE。</p><h6 id="FileReader-readAsArrayBuffer-："><a href="#FileReader-readAsArrayBuffer-：" class="headerlink" title="FileReader.readAsArrayBuffer()："></a>FileReader.readAsArrayBuffer()：</h6><p>开始读取指定的 Blob 中的内容.一旦完成，result 属性将包含一个 ArrayBuffer 来表示文件数据.</p><h6 id="FileReader-readAsBinaryString-："><a href="#FileReader-readAsBinaryString-：" class="headerlink" title="FileReader.readAsBinaryString()："></a>FileReader.readAsBinaryString()：</h6><p>开始读取指定的 Blob 中的内容.一旦完成，result 属性中将包含所读取文件的原始二进制数据.</p><h6 id="FileReader-readAsDataURL-："><a href="#FileReader-readAsDataURL-：" class="headerlink" title="FileReader.readAsDataURL()："></a>FileReader.readAsDataURL()：</h6><p>开始读取指定的 Blob 中的内容.一旦完成,result 属性中将包含一个 data: URL 格式的字符串以表示所读取文件的内容.</p><h6 id="FileReader-readAsText-："><a href="#FileReader-readAsText-：" class="headerlink" title="FileReader.readAsText()："></a>FileReader.readAsText()：</h6><p>开始读取指定的 Blob 中的内容.一旦完成，result 属性中将包含一个字符串以表示所读取的文件内容.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">onDrop(files) &#123;<br>    files.forEach(file =&gt; &#123;<br>        const reader = new FileReader();<br>        reader.onload = () =&gt; &#123;<br>            console.log(file);<br>            const fileAsBinaryString = reader.result; //返回文件<br>            //...<br>        &#125;<br>        reader.onabort = () =&gt; &#123;<br>            console.log(<span class="hljs-string">'aborted'</span>)<br>        &#125;<br>        reder.onerror = () =&gt; &#123;<br>            console.log(<span class="hljs-string">'error'</span>)<br>        &#125;<br>        reader.readAsBinaryString(file); //返回二进制文件<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="base64-dataURL-格式"><a href="#base64-dataURL-格式" class="headerlink" title="base64(dataURL)格式"></a>base64(dataURL)格式</h4><p>base64 编码是使用 64 个字符将二进制数据转换成文本数据的方案,对于非二进制数据,则先转换成二进制,然后每连续 6 比特(2 的 6 次方=64)计算其十进制,该数据值在上面的索引表中找到对应的字符,最终得到一个文本字符串.</p><p>base64 格式数据,Data URI scheme.</p><p>Data URI scheme 支持类型</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">data:,文本数据<br>data:text/plain,文本数据<br>data:text/html,HTML 代码<br>data:text/html;base64,base64 编码的 HTML 代码<br>data:text/css,CSS代码<br>data:text/css;base64,base64 编码的 CSS 代码<br>data:text/javascript,Javascript 代码<br>data:text/javascript;base64,base64 编码的 Javascript代码<br>data:image/gif;base64,base64 编码的 gif 图片数据<br>data:image/png;base64,base64 编码的 png 图片数据<br>data:image/jpeg;base64,base64 编码的 jpeg 图片数据<br>data:image/x-icon;base64,base64 编码的 icon 图片数据<br></code></pre></td></tr></table></figure><h4 id="Blob-格式"><a href="#Blob-格式" class="headerlink" title="Blob 格式"></a>Blob 格式</h4><p>Blob(Binary large object),二进制大对象,是一个可以存储二进制文件的容器.</p><p>Blob 是一个大文件,典型的 Blob 是一张图片或一个声音文件,由于它们的尺寸,必须使用特殊的方式来处理(例如:上传,下载或者存放到一个数据库).</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">Blob&#123;<br>    name:<span class="hljs-string">"name"</span>,<br>    preview:<span class="hljs-string">"blob:file:///f3823a2a-2908-44cb-81e2-c19d98abc5d1"</span>,<br>    size: 47396,<br>    <span class="hljs-built_in">type</span>: <span class="hljs-string">"image/png"</span>,<br>&#125;<br></code></pre></td></tr></table></figure><p>上面的 preview 可以直接使用做图片预览.</p><h4 id="base64-转-Blob"><a href="#base64-转-Blob" class="headerlink" title="base64 转 Blob"></a>base64 转 Blob</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">base64ToBlob(b64data, contentType, sliceSize) &#123;<br>  sliceSize || (sliceSize = 512);<br>  <span class="hljs-built_in">return</span> new Promise((resolve, reject) =&gt; &#123;<br>    // 使用 atob() 方法将数据解码<br>    <span class="hljs-built_in">let</span> byteCharacters = atob(b64data);<br>    <span class="hljs-built_in">let</span> byteArrays = [];<br>      <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> offset = 0; offset &lt; byteCharacters.length; offset += sliceSize) &#123;<br>        <span class="hljs-built_in">let</span> slice = byteCharacters.slice(offset, offset + sliceSize);<br>        <span class="hljs-built_in">let</span> byteNumbers = [];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> i = 0; i &lt; slice.length; i++) &#123;<br>            byteNumbers.push(slice.charCodeAt(i));<br>        &#125;<br>        // 8 位无符号整数值的类型化数组。内容将初始化为 0。<br>        // 如果无法分配请求数目的字节，则将引发异常。<br>        byteArrays.push(new Uint8Array(byteNumbers));<br>      &#125;<br>      resolve(new Blob(byteArrays, &#123;<br>        <span class="hljs-built_in">type</span>: contentType<br>      &#125;))<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>调用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">//dataUri就是base64文件<br><span class="hljs-built_in">let</span> blob = await this.base64ToBlob(dataUri.split(<span class="hljs-string">','</span>)[1], <span class="hljs-string">'image/png'</span>);<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">Blob &#123;<br>    size: 47396,<br>    <span class="hljs-built_in">type</span>: <span class="hljs-string">"image/png"</span>,<br>&#125;<br></code></pre></td></tr></table></figure><p>补充:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">Object.assign(blob,&#123;<br>  // jartto: 这里一定要处理一下<br>  preview: URL.createObjectURL(blob),<br>  name: `图片示例：<span class="hljs-variable">$&#123;index&#125;</span>.png`<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="Blob-转-base64"><a href="#Blob-转-base64" class="headerlink" title="Blob 转 base64"></a>Blob 转 base64</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">blobToBase64(blob) &#123;<br>  <span class="hljs-built_in">return</span> new Promise((resolve, reject) =&gt; &#123;<br>    const fileReader = new FileReader();<br>    fileReader.onload = (e) =&gt; &#123;<br>      resolve(e.target.result);<br>    &#125;;<br>    fileReader.readAsDataURL(blob);<br>    fileReader.onerror = () =&gt; &#123;<br>      reject(new Error(<span class="hljs-string">'文件流异常'</span>));<br>    &#125;;<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><p>调用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">const allBase64 = await this.blobToBase64(blobObj);<br></code></pre></td></tr></table></figure><h4 id="URL-转-base64"><a href="#URL-转-base64" class="headerlink" title="URL 转 base64"></a>URL 转 base64</h4><p>使用 canvas</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">getDataUri(url) &#123;<br>  <span class="hljs-built_in">return</span> new Promise((resolve, reject) =&gt; &#123;<br>    /* eslint-disable */<br>    <span class="hljs-built_in">let</span> image = new Image();<br>    //解决跨域问题<br>    image.setAttribute(<span class="hljs-string">"crossOrigin"</span>,<span class="hljs-string">'Anonymous'</span>);<br>    image.onload = <span class="hljs-function"><span class="hljs-title">function</span></span>() &#123;<br>      <span class="hljs-built_in">let</span> canvas = document.createElement(<span class="hljs-string">'canvas'</span>);<br>      canvas.width = this.naturalWidth;<br>      canvas.height = this.naturalHeight;<br>      canvas.getContext(<span class="hljs-string">'2d'</span>).drawImage(this, 0, 0);<br>      // Data URI<br>      resolve(canvas.toDataURL(<span class="hljs-string">'image/png'</span>));<br>    &#125;;<br>    image.src = url;<br>    // console.log(image.src);<br>    image.onerror = () =&gt; &#123;<br>      reject(new Error(<span class="hljs-string">'图片流异常'</span>));<br>    &#125;;<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><p>调用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> dataUri = await this.getDataUri(`image/<span class="hljs-built_in">test</span>/jartto.png`);<br></code></pre></td></tr></table></figure><h4 id="src-转-image"><a href="#src-转-image" class="headerlink" title="src 转 image"></a>src 转 image</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">srctoimage(src)&#123;<br>    <span class="hljs-built_in">return</span> new Promise((reslove,reject)=&gt;&#123;<br>    <span class="hljs-built_in">let</span> img = new Image()<br>    img.onload = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>      reslove(img)<br>    &#125;<br>    img.onerror = <span class="hljs-keyword">function</span>(err) &#123;<br>      reject(err)<br>    &#125;<br>    img.src = src<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>调用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> image = await this.srctoimage(src);<br></code></pre></td></tr></table></figure><h4 id="img-转-canvas"><a href="#img-转-canvas" class="headerlink" title="img 转 canvas"></a>img 转 canvas</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">imgtocanvas(img)&#123;<br>    <span class="hljs-built_in">let</span> canvas = document.createElement(<span class="hljs-string">"canvas"</span>);<br>    <span class="hljs-built_in">let</span> ctx = canvas.getContext(<span class="hljs-string">'2d'</span>)<br>    canvas.width = img.width<br>    canvas.height = img.height<br>    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);<br>    <span class="hljs-built_in">return</span> canvas<br>&#125;<br></code></pre></td></tr></table></figure><p>调用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> canvas = this.imgtocanvas(img);<br></code></pre></td></tr></table></figure><h4 id="ImageData-转-canvas"><a href="#ImageData-转-canvas" class="headerlink" title="ImageData 转 canvas"></a>ImageData 转 canvas</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">ImageDatetocanvas(imgData)&#123;<br>    <span class="hljs-built_in">let</span> canvas = document.createElement(<span class="hljs-string">"canvas"</span>);<br>    <span class="hljs-built_in">let</span> ctx = canvas.getContext(<span class="hljs-string">'2d'</span>)<br>    canvas.width = imgData.width<br>    canvas.height = imgData.height<br>    ctx.putImageData(imgData,canvas.width, canvas.height);<br>    <span class="hljs-built_in">return</span> canvas<br>&#125;<br></code></pre></td></tr></table></figure><p>调用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> canvas = this.ImageDatetocanvas(imgData);<br></code></pre></td></tr></table></figure><h4 id="canvas-转-ImageData"><a href="#canvas-转-ImageData" class="headerlink" title="canvas 转 ImageData"></a>canvas 转 ImageData</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">canvastoImageDate(canvas)&#123;<br>    <span class="hljs-built_in">let</span> ctx = canvas.getContext(<span class="hljs-string">'2d'</span>)<br>    <span class="hljs-built_in">return</span> ctx.createImageData(canvas.width,canvas.height)<br>&#125;<br></code></pre></td></tr></table></figure><p>调用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> imgdata = this.canvastoImageDate(canvas);<br></code></pre></td></tr></table></figure><h4 id="canvas-像素操作"><a href="#canvas-像素操作" class="headerlink" title="canvas 像素操作"></a>canvas 像素操作</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> canvaspixel(canvas,deal) &#123;<br>  <span class="hljs-built_in">let</span> ctx = canvas.getContext(<span class="hljs-string">'2d'</span>)<br>  var imgData = ctx.createImageData(canvas.width, canvas.height);<br>  <span class="hljs-keyword">for</span> (var i = 0; i &lt; imgData.data.length; i += 4) &#123;<br>    deal(r,g,b,a)<br>  &#125;<br>  ctx.putImageData(imgData, canvas.width, canvas.height);<br>  <span class="hljs-built_in">return</span> canvas<br>&#125;<br></code></pre></td></tr></table></figure><p>调用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">let editcanvas = canvaspixel(canvas,deal)<br></code></pre></td></tr></table></figure><h4 id="base64-DataURL"><a href="#base64-DataURL" class="headerlink" title="base64(DataURL)"></a>base64(DataURL)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">canvas.toDataURL()<br></code></pre></td></tr></table></figure><p>更多请查看<br><a href="https://juejin.im/post/5c00e8a66fb9a049db72dbd0" target="_blank" rel="noopener">https://juejin.im/post/5c00e8a66fb9a049db72dbd0</a></p>]]></content>
      
      
      <categories>
          
          <category> 业务代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 业务代码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自动化测试&amp;发布npm包</title>
      <link href="/2019/04/09/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95&amp;%E5%8F%91%E5%B8%83npm%E5%8C%85/"/>
      <url>/2019/04/09/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95&amp;%E5%8F%91%E5%B8%83npm%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h4 id="1-自动化测试"><a href="#1-自动化测试" class="headerlink" title="1. 自动化测试"></a>1. 自动化测试</h4><ol><li>kama一个测试运行器,可呼起浏览器,加载测试脚本,运星测试用例.</li><li>mocha是一个单元测试框架/库,可以用来写测试用例.</li><li>sinon是一个spy/stub/mock库,用以辅助测试.</li></ol><p>运行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i -D karma karma-chrome-launcher karma-mocha karma-sinon-chai mocha sinon sinon-chai karma-chai karma-chai-spies<br></code></pre></td></tr></table></figure></p><p>创建karma配置,karma.conf.js</p><p>输出目录:*代表加载所有文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">files: [<br>    <span class="hljs-string">'dist/**/*.test.js'</span>,<br>    <span class="hljs-string">'dist/**/*.test.css'</span><br>]<br></code></pre></td></tr></table></figure></p><p>运行浏览器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">browsers: [<span class="hljs-string">'ChromeHeadless'</span>],<br></code></pre></td></tr></table></figure><p>代码:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs bash">module.exports = <span class="hljs-keyword">function</span> (config) &#123;<br>     config.set(&#123;<br><br>         // base path that will be used to resolve all patterns (eg. files, exclude)<br>         basePath: <span class="hljs-string">''</span>,<br><br>        // frameworks to use<br>        // available frameworks: https://npmjs.org/browse/keyword/karma-adapter<br>        frameworks: [<span class="hljs-string">'mocha'</span>, <span class="hljs-string">'sinon-chai'</span>],<br>        client: &#123;<br>            chai: &#123;<br>                includeStack: <span class="hljs-literal">true</span><br>            &#125;<br>        &#125;,<br><br><br>        // list of files / patterns to load <span class="hljs-keyword">in</span> the browser<br>        files: [<br>            <span class="hljs-string">'dist/**/*.test.js'</span>,<br>            <span class="hljs-string">'dist/**/*.test.css'</span><br>        ],<br><br><br>        // list of files / patterns to exclude<br>        exclude: [],<br><br><br>        // preprocess matching files before serving them to the browser<br>        // available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor<br>        preprocessors: &#123;&#125;,<br><br><br>        // <span class="hljs-built_in">test</span> results reporter to use<br>        // possible values: <span class="hljs-string">'dots'</span>, <span class="hljs-string">'progress'</span><br>        // available reporters: https://npmjs.org/browse/keyword/karma-reporter<br>        reporters: [<span class="hljs-string">'progress'</span>],<br><br><br>        // web server port<br>        port: 9876,<br><br><br>        // <span class="hljs-built_in">enable</span> / <span class="hljs-built_in">disable</span> colors <span class="hljs-keyword">in</span> the output (reporters and logs)<br>        colors: <span class="hljs-literal">true</span>,<br><br><br>        // level of logging<br>        // possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG<br>        logLevel: config.LOG_INFO,<br><br><br>        // <span class="hljs-built_in">enable</span> / <span class="hljs-built_in">disable</span> watching file and executing tests whenever any file changes<br>        autoWatch: <span class="hljs-literal">true</span>,<br><br><br>        // start these browsers<br>        // available browser launchers: https://npmjs.org/browse/keyword/karma-launcher<br>        browsers: [<span class="hljs-string">'ChromeHeadless'</span>],<br><br><br>        // Continuous Integration mode<br>        // <span class="hljs-keyword">if</span> <span class="hljs-literal">true</span>, Karma captures browsers, runs the tests and exits<br>        singleRun: <span class="hljs-literal">false</span>,<br><br>        // Concurrency level<br>        // how many browser should be started simultaneous<br>        concurrency: Infinity<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>创建test/button.test.js文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">const expect = chai.expect;<br> import Vue from <span class="hljs-string">'vue'</span><br> import Button from <span class="hljs-string">'../src/button'</span><br><br> Vue.config.productionTip = <span class="hljs-literal">false</span><br> Vue.config.devtools = <span class="hljs-literal">false</span><br><br>describe(<span class="hljs-string">'Button'</span>,()=&gt;&#123;<br>    it(<span class="hljs-string">'xxx'</span>,()=&gt;&#123;<br>        //测试代码<br>    &#125;)<br>&#125;)<br></code></pre></td></tr></table></figure><p>创建测试脚本</p><p>在 package.json 里面找到 scripts 并改写 scripts<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-string">"scripts"</span>: &#123;<br>     <span class="hljs-string">"dev-test"</span>: <span class="hljs-string">"parcel watch test/* --no-cache &amp; karma start"</span>,<br>     <span class="hljs-string">"test"</span>: <span class="hljs-string">"parcel build test/* --no-minify &amp;&amp; karma start --single-run"</span><br> &#125;,<br></code></pre></td></tr></table></figure></p><p>运行测试脚本</p><ol><li>npm run test 一次性运行</li><li>npm run dev-test 进行watch运行</li></ol><h4 id="2-使用Mocha-amp-Chai做单元测试"><a href="#2-使用Mocha-amp-Chai做单元测试" class="headerlink" title="2.使用Mocha&amp;Chai做单元测试"></a>2.使用Mocha&amp;Chai做单元测试</h4><p>BDD  行为驱动测试</p><p>descrube 描述<br>expect 期待<br>eq 输出<br>deep 深相等<br>not 不<br>with 并且</p><p>descrube ‘people’</p><p>it has a head<br>it can run</p><p>expect(‘xxx’).eq(‘yyy’)</p><p>文档: <a href="http://www.chaijs.com" target="_blank" rel="noopener">www.chaijs.com</a></p><h4 id="3-使用TravisCI做持续集成"><a href="#3-使用TravisCI做持续集成" class="headerlink" title="3. 使用TravisCI做持续集成"></a>3. 使用TravisCI做持续集成</h4><p>注册travis账户.</p><p>根目录下创建 .travis.yml 文件</p><p>每次提交后可在travis上查看测试结果.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">language: node_js<br>node_js:<br>  - <span class="hljs-string">"8"</span><br>addons:<br>  chrome: stable<br>sudo: required<br>before_script:<br>  - <span class="hljs-string">"sudo chown root /opt/google/chrome/chrome-sandbox"</span><br>  - <span class="hljs-string">"sudo chmod 4755 /opt/google/chrome/chrome-sandbox"</span><br></code></pre></td></tr></table></figure><h4 id="为什么一个空数组不等于空数组"><a href="#为什么一个空数组不等于空数组" class="headerlink" title="为什么一个空数组不等于空数组"></a>为什么一个空数组不等于空数组</h4><p>因为引用不同,是两个数组</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">[] == [] //<span class="hljs-literal">false</span><br><br>var a = []<br>a == [] //<span class="hljs-literal">false</span><br>a == [] //<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h4 id="4-发布npm包"><a href="#4-发布npm包" class="headerlink" title="4. 发布npm包"></a>4. 发布npm包</h4><p>根目录下创建index.js<br>导入组件 导出组件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">improt cp from <span class="hljs-string">'./src/cp'</span><br>exprot &#123;cp&#125;<br></code></pre></td></tr></table></figure></p><p>查看自己当前npm源路径<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm config list<br></code></pre></td></tr></table></figure></p><p>要改成默认源才能发布npm包<br>每次发布需要更改package.json里的版本<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">//添加用户<br>npm adduser<br><br>//公开代码<br>npm publish<br></code></pre></td></tr></table></figure></p><p>由于引擎不能识别improt 所以要babel转移或者直接给他转义好</p><p>转义</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">//packjson输出目录修改成dist/index.js<br><br>运行<br><br>npx parcel build index.js --no-cache --no-minify<br></code></pre></td></tr></table></figure><h4 id="5-使用npm-link"><a href="#5-使用npm-link" class="headerlink" title="5. 使用npm link"></a>5. 使用npm link</h4><p>由于每次更新都需要更改package.json里的版本,然后npm publish,所以我们可以用本地调试,在项目目录使用npm link,在所用目录运行npm link xxx.</p><h4 id="6-书写README"><a href="#6-书写README" class="headerlink" title="6. 书写README"></a>6. 书写README</h4><p>shields.io生成图标</p><h4 id="7-安装git-open"><a href="#7-安装git-open" class="headerlink" title="7. 安装git open"></a>7. 安装git open</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i -g git-open<br></code></pre></td></tr></table></figure><h4 id="8-git会到之前版本"><a href="#8-git会到之前版本" class="headerlink" title="8. git会到之前版本"></a>8. git会到之前版本</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git reset --hard xxx<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue的几个小坑&amp;子选择器&amp;测试相关</title>
      <link href="/2019/04/03/Vue%E7%9A%84%E5%87%A0%E4%B8%AA%E5%B0%8F%E5%9D%91&amp;%E5%AD%90%E9%80%89%E6%8B%A9%E5%99%A8&amp;%E6%B5%8B%E8%AF%95%E7%9B%B8%E5%85%B3/"/>
      <url>/2019/04/03/Vue%E7%9A%84%E5%87%A0%E4%B8%AA%E5%B0%8F%E5%9D%91&amp;%E5%AD%90%E9%80%89%E6%8B%A9%E5%99%A8&amp;%E6%B5%8B%E8%AF%95%E7%9B%B8%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<h4 id="1-vue中html属性使用简写的问题"><a href="#1-vue中html属性使用简写的问题" class="headerlink" title="1. vue中html属性使用简写的问题"></a>1. vue中html属性使用简写的问题</h4><p>假如子组件props进行类型检测,那么子组件接收不到</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">//parent<br>&lt;g-button right&gt;BTN&lt;/button&gt;<br><br>//component-A<br>props:[<span class="hljs-string">'right'</span>]<br><span class="hljs-function"><span class="hljs-title">mount</span></span>()&#123;<br>    console.log(this.right) //undefined<br>&#125;<br></code></pre></td></tr></table></figure><p>当子组件props进行类型检测,子组件能接受到值.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">//parent<br>&lt;g-button right&gt;BTN&lt;/button&gt;<br><br>//component-B<br>props:&#123;<br>    right:&#123;<br>        <span class="hljs-built_in">type</span>: Boolean,<br>        default: <span class="hljs-literal">false</span>,<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-title">mount</span></span>()&#123;<br>    console.log(this.right) // <span class="hljs-literal">true</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-组件点击事件失效的问题"><a href="#2-组件点击事件失效的问题" class="headerlink" title="2. 组件点击事件失效的问题"></a>2. 组件点击事件失效的问题</h4><p>点击button元素,事件不生效.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">//parent<br>&lt;g-button @click=<span class="hljs-string">"loading = !loading"</span>&gt;BTN&lt;/button&gt;<br></code></pre></td></tr></table></figure><p>解决办法.</p><ol><li>父元素事件绑定中添加修饰符native.</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">//parent<br>&lt;g-button @click.native=<span class="hljs-string">"loading = !loading"</span>&gt;BTN&lt;/button&gt;<br></code></pre></td></tr></table></figure><ol start="2"><li>子组件中监听自身的click事件,调用函数给父组件发送click事件,父组件监听该click事件.</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">//parent<br>&lt;g-button @click=<span class="hljs-string">"loading = !loading"</span>&gt;BTN&lt;/button&gt;<br><br>//component<br>&lt;button @click=<span class="hljs-string">"_click"</span>&gt;<br>    &lt;slot&gt;&lt;/slot&gt;<br>&lt;/button&gt;<br><br>methods:&#123;<br>    <span class="hljs-function"><span class="hljs-title">_click</span></span>()&#123;<br>        this.<span class="hljs-variable">$emit</span>(<span class="hljs-string">'click'</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-scss子选择器"><a href="#3-scss子选择器" class="headerlink" title="3. scss子选择器"></a>3. scss子选择器</h4><p>注意:子选择器写在子元素上,而不是父元素上</p><p>错误:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">//<span class="hljs-literal">false</span><br>&lt;ul&gt;<br>    &lt;li&gt;1&lt;/li&gt;<br>    &lt;li&gt;2&lt;/li&gt;<br>    &lt;li&gt;3&lt;/li&gt;<br>&lt;/ul&gt;<br><br>ul&#123;<br>    &amp;:first-child&#123;<br>        color:red<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>正确:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">//<span class="hljs-literal">true</span><br>&lt;ul&gt;<br>    &lt;li&gt;1&lt;/li&gt;<br>    &lt;li&gt;2&lt;/li&gt;<br>    &lt;li&gt;3&lt;/li&gt;<br>&lt;/ul&gt;<br><br>ul&#123;<br>    li&#123;<br>        &amp;:first-child&#123;<br>            color:red<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><ol start="4"><li>几个有用子选择器</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs undefined">//第一个元素<br><br>li:first-child<br><br>//最后一个元素<br>li:last-child<br><br>//非第一个元素<br><br>li:not(:first-child)<br></code></pre></td></tr></table></figure><h4 id="4-测试相关"><a href="#4-测试相关" class="headerlink" title="4. 测试相关"></a>4. 测试相关</h4><ol><li>BDD 行为驱动开发 (用自然语言描述)</li><li>TDD 测试驱动开发 (通过测试)</li><li>Assert 断言 (主观认为,例如console.log)</li></ol><h5 id="库-chai-js"><a href="#库-chai-js" class="headerlink" title="库 chai.js"></a>库 chai.js</h5><p>Should 应该</p><p>Expect 期望</p><p>Assert 断言</p><p>安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm -D chai<br></code></pre></td></tr></table></figure></p><p>使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">import chai from <span class="hljs-string">'chai'</span><br>const &#123; expect &#125; = chai<br><span class="hljs-built_in">let</span> <span class="hljs-built_in">test</span> = <span class="hljs-string">'abc'</span><br>expect(<span class="hljs-built_in">test</span>).to.eq(<span class="hljs-string">'abc'</span>)<br></code></pre></td></tr></table></figure><h5 id="mock"><a href="#mock" class="headerlink" title="mock"></a>mock</h5><p> chai-spies</p><p> 监听函数</p><p>使用:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">//引入<br>import chai from <span class="hljs-string">'chai'</span><br>import spies from <span class="hljs-string">'chai-spies'</span><br>chai.use(spies)<br>const &#123; expect &#125; = chai<br><br>//vue使用<br>const Constructor = Vue.extend(gButton);<br>const vm = new Constructor(&#123;<br>    propsData: &#123;<br>        icon: <span class="hljs-string">'setting'</span>,<br>    &#125;<br>&#125;)<br>vm.<span class="hljs-variable">$mount</span>();<br><span class="hljs-built_in">let</span> spy = chai.spy(<span class="hljs-function"><span class="hljs-title">function</span></span> () &#123; &#125;)<br>vm.<span class="hljs-variable">$on</span>(<span class="hljs-string">'click'</span>, spy)<br><span class="hljs-built_in">let</span> button = vm.<span class="hljs-variable">$el</span><br>button.click();<br>expect(spy).to.have.been.called()<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>截图插件vue-cropper的使用</title>
      <link href="/2019/03/04/%E6%88%AA%E5%9B%BE%E6%8F%92%E4%BB%B6vue-cropper%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/03/04/%E6%88%AA%E5%9B%BE%E6%8F%92%E4%BB%B6vue-cropper%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><p>vue-cropper是基于cropper.js封装的一个vue组件.功能强大.</p><p><a href="https://github.com/fengyuanchen/cropperjs#options" title="文档链接" target="_blank" rel="noopener">cropper.js链接</a></p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p><a href="https://github.com/roxas332519096/vue-cropperjs" title="文档链接" target="_blank" rel="noopener">官方链接</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save vue-cropperjs<br><br>// Global<br>import Vue from <span class="hljs-string">'vue'</span>;<br>import VueCropper from <span class="hljs-string">'vue-cropperjs'</span>;<br>Vue.component(VueCropper);<br><br>// Local<br>import VueCropper from <span class="hljs-string">'vue-cropperjs'</span>;<br><span class="hljs-built_in">export</span> default &#123;<br>  components: &#123; VueCropper&#125;<br>&#125;<br><br>&lt;vue-cropper<br>  ref=<span class="hljs-string">"cropper"</span><br>  :src=<span class="hljs-string">"imgSrc"</span><br>  alt=<span class="hljs-string">"Source Image"</span><br>  :cropmove=<span class="hljs-string">"cropImage"</span><br>/&gt;<br></code></pre></td></tr></table></figure><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>vue-cropper通过绑定属性进行配置</p><p>例如:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;vue-cropper<br>    :viewMode=<span class="hljs-string">"2"</span><br>/&gt;<br></code></pre></td></tr></table></figure><h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;vue-cropper<br>    :viewMode=<span class="hljs-string">"2"</span><br>    drag-mode=<span class="hljs-string">"crop"</span><br>    :background=<span class="hljs-string">"true"</span><br>    ref=<span class="hljs-string">"cropper"</span><br>    :src=<span class="hljs-string">"imgSrc"</span><br>    key=<span class="hljs-string">"cropKey"</span> //由于cropper初始化时,option已决定截图框大小等,所以变换key使视图重新渲染<br>/&gt;<br><br>&lt;img :src=<span class="hljs-string">"cropImg"</span> /&gt;<br><br><span class="hljs-function"><span class="hljs-title">data</span></span>()&#123;<br>  <span class="hljs-built_in">return</span> &#123;<br>    imgSrc:<span class="hljs-string">'图片url'</span>,<br>    cropKey:0,<br>    cropImg:<span class="hljs-string">''</span>,<br>  &#125;<br>&#125;<br><br>const reader = new FileReader();<br>reader.onload = event =&gt; &#123;<br>  this.imgSrc = event.target.result;<br>  this.<span class="hljs-variable">$refs</span>.cropper.replace(event.target.result);<br>&#125;;<br>reader.readAsDataURL(this.file);<br></code></pre></td></tr></table></figure><h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><h5 id="vieMode显示模式"><a href="#vieMode显示模式" class="headerlink" title="vieMode显示模式"></a>vieMode显示模式</h5><p>Type:number<br>Default:0</p><p>0:裁剪框只能在图片内移动<br>1:裁剪框能在容器内移动<br>2:裁剪框只能在图片内移动,并且图片最大缩小不能超出裁剪框(图片不平铺满容器,存在间隙)<br>3:裁剪框只能在图片内移动,并且图片最大缩小不能超出裁剪框(图片平铺满容器,不存在间隙)</p><h5 id="dragMode-拖动模式"><a href="#dragMode-拖动模式" class="headerlink" title="dragMode 拖动模式"></a>dragMode 拖动模式</h5><p>Default:’crop’<br>‘crop’:当鼠标点击一处时根据这个点重新生成一个裁剪框,不可拖动图片<br>‘move’:可拖动图片<br>‘none’:不可拖动图片</p><h5 id="aspectRatio"><a href="#aspectRatio" class="headerlink" title="aspectRatio"></a>aspectRatio</h5><p>Type:numbe<br>Default:NAN<br>可设置n/n,比例为n:n</p><h5 id="preview"><a href="#preview" class="headerlink" title="preview"></a>preview</h5><p>Type:string,element<br>Default:’’<br>是一个选择器,必须被Document.querySelectorAll获取到</p><h5 id="responsive"><a href="#responsive" class="headerlink" title="responsive"></a>responsive</h5><p>Type:Boolean<br>Default:true<br>在调整窗口大小的时候重新渲染cropper</p><h5 id="modal"><a href="#modal" class="headerlink" title="modal"></a>modal</h5><p>Type:Boolean<br>Default:true<br>截图时图片上方的黑色遮罩层</p><h5 id="guides"><a href="#guides" class="headerlink" title="guides"></a>guides</h5><p>Type:Boolean<br>Default:true<br>截图框虚线</p><h5 id="center"><a href="#center" class="headerlink" title="center"></a>center</h5><p>Type:Boolean<br>Default:true<br>截图框在图片中烟</p><h5 id="highlight"><a href="#highlight" class="headerlink" title="highlight"></a>highlight</h5><p>Type:Boolean<br>Default:true<br>突出截图框</p><h5 id="background"><a href="#background" class="headerlink" title="background"></a>background</h5><p>Type:Boolean<br>Default:true<br>显示网格背景</p><h5 id="autoCrop"><a href="#autoCrop" class="headerlink" title="autoCrop"></a>autoCrop</h5><p>Type:Boolean<br>Default:true<br>自动显示截图框</p><h5 id="autoCropArea"><a href="#autoCropArea" class="headerlink" title="autoCropArea"></a>autoCropArea</h5><p>Type:number<br>Default:0.8<br>截图框与图片的比例</p><h5 id="movable"><a href="#movable" class="headerlink" title="movable"></a>movable</h5><p>Type:Boolean<br>Default:true<br>是否可允许移动图片</p><h5 id="rotatable"><a href="#rotatable" class="headerlink" title="rotatable"></a>rotatable</h5><p>Type:Boolean<br>Default:true<br>是否可旋转图片</p><h5 id="scalable"><a href="#scalable" class="headerlink" title="scalable"></a>scalable</h5><p>Type:Boolean<br>Default:true<br>是否可缩放图片</p><h5 id="zoomable"><a href="#zoomable" class="headerlink" title="zoomable"></a>zoomable</h5><p>Type:Boolean<br>Default:true<br>是否可放大图片</p><h5 id="zoomOnTouch"><a href="#zoomOnTouch" class="headerlink" title="zoomOnTouch"></a>zoomOnTouch</h5><p>Type:Boolean<br>Default:true<br>是否可通过触摸放大图片</p><h5 id="zoomOnWheel"><a href="#zoomOnWheel" class="headerlink" title="zoomOnWheel"></a>zoomOnWheel</h5><p>Type:Boolean<br>Default:true<br>是否可通过光标放大图片</p><h5 id="wheelZoomRatio"><a href="#wheelZoomRatio" class="headerlink" title="wheelZoomRatio"></a>wheelZoomRatio</h5><p>Type:number<br>Default:0.1<br>用鼠标移动图像时，定义缩放比例</p><h5 id="cropBoxMovable"><a href="#cropBoxMovable" class="headerlink" title="cropBoxMovable"></a>cropBoxMovable</h5><p>Type:Boolean<br>Default:true<br>截图框是否可拖动</p><h5 id="toggleDragModeOnDblclick"><a href="#toggleDragModeOnDblclick" class="headerlink" title="toggleDragModeOnDblclick"></a>toggleDragModeOnDblclick</h5><p>Type:Boolean<br>Default:true<br>点击两次可切换拖动模式与移动图片模式</p><h5 id="minContainerWidth"><a href="#minContainerWidth" class="headerlink" title="minContainerWidth"></a>minContainerWidth</h5><p>Type:number<br>Default:200<br>容器最小宽度</p><h5 id="minContainerHeight"><a href="#minContainerHeight" class="headerlink" title="minContainerHeight"></a>minContainerHeight</h5><p>Type:number<br>Default:100<br>容器最小高度</p><h5 id="minCanvasWidth"><a href="#minCanvasWidth" class="headerlink" title="minCanvasWidth"></a>minCanvasWidth</h5><p>Type:number<br>Default:0<br>canvas最小高度</p><h5 id="minCanvasHeight"><a href="#minCanvasHeight" class="headerlink" title="minCanvasHeight"></a>minCanvasHeight</h5><p>Type:number<br>Default:0<br>canvas最小高度</p><h5 id="minCropBoxWidth"><a href="#minCropBoxWidth" class="headerlink" title="minCropBoxWidth"></a>minCropBoxWidth</h5><p>Type:number<br>Default:0<br>截图框最小宽度</p><h5 id="minCropBoxHeight"><a href="#minCropBoxHeight" class="headerlink" title="minCropBoxHeight"></a>minCropBoxHeight</h5><p>Type:number<br>Default:0<br>截图框最小高度</p><h5 id="ready"><a href="#ready" class="headerlink" title="ready"></a>ready</h5><p>Type:function<br>Default:null<br>插件准备时执行的函数</p><h5 id="cropstart"><a href="#cropstart" class="headerlink" title="cropstart"></a>cropstart</h5><p>Type:function<br>Default:null<br>截图框开始移动执行的函数</p><h5 id="cropmove"><a href="#cropmove" class="headerlink" title="cropmove"></a>cropmove</h5><p>Type:function<br>Default:null<br>截图框移动执行的函数</p><h5 id="cropend"><a href="#cropend" class="headerlink" title="cropend"></a>cropend</h5><p>Type:function<br>Default:null<br>截图框移动结束的函数</p><h5 id="crop"><a href="#crop" class="headerlink" title="crop"></a>crop</h5><p>Type:function<br>Default:null<br>截图框发生变化执行的函数</p><h5 id="zoom"><a href="#zoom" class="headerlink" title="zoom"></a>zoom</h5><p>Type:function<br>Default:null<br>截图框缩放时执行的函数</p><h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">this.cropImg = this.<span class="hljs-variable">$refs</span>.cropper.getCroppedCanvas().toDataURL();<br></code></pre></td></tr></table></figure><h5 id="crop-手动显示裁剪框"><a href="#crop-手动显示裁剪框" class="headerlink" title="crop() 手动显示裁剪框"></a>crop() 手动显示裁剪框</h5><h5 id="reset-将图像和裁剪框重置为初始状态"><a href="#reset-将图像和裁剪框重置为初始状态" class="headerlink" title="reset() 将图像和裁剪框重置为初始状态"></a>reset() 将图像和裁剪框重置为初始状态</h5><h5 id="clear-清除截图框"><a href="#clear-清除截图框" class="headerlink" title="clear() 清除截图框"></a>clear() 清除截图框</h5><h5 id="replace-url-onlyColorChanged-替换图像的src并重新构建cropper"><a href="#replace-url-onlyColorChanged-替换图像的src并重新构建cropper" class="headerlink" title="replace(url[, onlyColorChanged]) 替换图像的src并重新构建cropper"></a>replace(url[, onlyColorChanged]) 替换图像的src并重新构建cropper</h5><p>url Type:string<br>onlyColorChanged Type:Boolean;Default:false<br>如果只是改变颜色，而不是大小，那么cropper只需要改变所有相关图像的src，不需要重新构建cropper。这可以用于应用过滤器。（意思是：改成true，图像的比例会发生变化自适应父盒子的大小；会失真的）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">this.<span class="hljs-variable">$refs</span>.cropper.replace(<span class="hljs-string">'/img.jpg'</span>,<span class="hljs-literal">true</span>)<br></code></pre></td></tr></table></figure><h5 id="enable-解锁锁定的截图框"><a href="#enable-解锁锁定的截图框" class="headerlink" title="enable() 解锁锁定的截图框"></a>enable() 解锁锁定的截图框</h5><h5 id="disable-锁定截图框"><a href="#disable-锁定截图框" class="headerlink" title="disable() 锁定截图框"></a>disable() 锁定截图框</h5><h5 id="destroy-销毁cropper并从图像中删除整个cropper"><a href="#destroy-销毁cropper并从图像中删除整个cropper" class="headerlink" title="destroy() 销毁cropper并从图像中删除整个cropper"></a>destroy() 销毁cropper并从图像中删除整个cropper</h5><h5 id="move-offsetX-offsetY-使用相对偏移量移动图像-截图框不移动"><a href="#move-offsetX-offsetY-使用相对偏移量移动图像-截图框不移动" class="headerlink" title="move(offsetX[,offsetY]) 使用相对偏移量移动图像(截图框不移动)"></a>move(offsetX[,offsetY]) 使用相对偏移量移动图像(截图框不移动)</h5><h5 id="moveTo-x-y-将容器移动到一个绝对点"><a href="#moveTo-x-y-将容器移动到一个绝对点" class="headerlink" title="moveTo(x[,y]) 将容器移动到一个绝对点"></a>moveTo(x[,y]) 将容器移动到一个绝对点</h5><h5 id="zoom-ratio-放大图片-并使用相对比例-截图框不变化"><a href="#zoom-ratio-放大图片-并使用相对比例-截图框不变化" class="headerlink" title="zoom(ratio) 放大图片,并使用相对比例 (截图框不变化)"></a>zoom(ratio) 放大图片,并使用相对比例 (截图框不变化)</h5><p>ratio type:number </p><h5 id="rotate-degree-旋转图像以一定的角度"><a href="#rotate-degree-旋转图像以一定的角度" class="headerlink" title="rotate(degree) 旋转图像以一定的角度"></a>rotate(degree) 旋转图像以一定的角度</h5><p>degree type:number</p><h5 id="rotateTo-degree-旋转图像到固定的角度"><a href="#rotateTo-degree-旋转图像到固定的角度" class="headerlink" title="rotateTo(degree) 旋转图像到固定的角度"></a>rotateTo(degree) 旋转图像到固定的角度</h5><p>degree type:number</p><h5 id="scale-scaleX-scaleY-翻转图像"><a href="#scale-scaleX-scaleY-翻转图像" class="headerlink" title="scale(scaleX[, scaleY]) 翻转图像"></a>scale(scaleX[, scaleY]) 翻转图像</h5><p>scaleX type:number 水平方向翻转 default:1<br>scaleY type:number 垂直方向翻转 假如不存在则与x相同</p><h5 id="scaleX-scaleX-缩放图像的横坐标"><a href="#scaleX-scaleX-缩放图像的横坐标" class="headerlink" title="scaleX(scaleX) 缩放图像的横坐标"></a>scaleX(scaleX) 缩放图像的横坐标</h5><h5 id="scaleY-scaleY-缩放图像的纵坐标"><a href="#scaleY-scaleY-缩放图像的纵坐标" class="headerlink" title="scaleY(scaleY) 缩放图像的纵坐标"></a>scaleY(scaleY) 缩放图像的纵坐标</h5><h5 id="getData-rounded-输出最终裁剪的区域位置和大小数据-根据原始图像的自然大小"><a href="#getData-rounded-输出最终裁剪的区域位置和大小数据-根据原始图像的自然大小" class="headerlink" title="getData([rounded]) 输出最终裁剪的区域位置和大小数据(根据原始图像的自然大小)"></a>getData([rounded]) 输出最终裁剪的区域位置和大小数据(根据原始图像的自然大小)</h5><p>rounded<br>Type:Boolean<br>Default:false 设置true可获得数据<br>返回数据<br>Type:Object</p><ul><li>x 截图框距离左边的距离</li><li>y 截图框距离顶部的距离</li><li>width 截图框的宽度</li><li>height 截图框的高度</li><li>rotate 截图框的旋转的角度</li><li>scaleX 缩放图像的横坐标</li><li>scaleY 缩放图像的纵坐标 </li></ul><h5 id="setData-data-用新数据改变裁切区域的位置和大小-以原始图像为基础"><a href="#setData-data-用新数据改变裁切区域的位置和大小-以原始图像为基础" class="headerlink" title="setData(data) 用新数据改变裁切区域的位置和大小(以原始图像为基础)"></a>setData(data) 用新数据改变裁切区域的位置和大小(以原始图像为基础)</h5><p>data<br>Type:Object</p><h5 id="getContainerData-输出container-容器大小数据"><a href="#getContainerData-输出container-容器大小数据" class="headerlink" title="getContainerData() 输出container 容器大小数据"></a>getContainerData() 输出container 容器大小数据</h5><p>返回数据<br>Type:Object</p><ul><li>Width 当前容器宽度</li><li>Height 当前容器高度</li></ul><h5 id="getImageData-输出图像image位置-大小和其他相关数据"><a href="#getImageData-输出图像image位置-大小和其他相关数据" class="headerlink" title="getImageData() 输出图像image位置,大小和其他相关数据"></a>getImageData() 输出图像image位置,大小和其他相关数据</h5><p>返回数据<br>Type:Object</p><ul><li>left image距离左边的距离</li><li>top image距离顶部的距离</li><li>width image的宽度</li><li>height image的高度</li><li>naturalWidth image的原始宽度</li><li>naturalHeight image的原始高度</li><li>aspectRatio image的纵横比</li><li>rotate image的旋转的角度</li><li>scaleX 缩放图像的横坐标</li><li>scaleY 缩放图像的纵坐标</li></ul><h5 id="getCanvasData-输出画布Canvas-图像包装器-位置和大小数据"><a href="#getCanvasData-输出画布Canvas-图像包装器-位置和大小数据" class="headerlink" title="getCanvasData() 输出画布Canvas(图像包装器)位置和大小数据"></a>getCanvasData() 输出画布Canvas(图像包装器)位置和大小数据</h5><p>返回数据<br>Type:Object</p><ul><li>left canvas距离左边的距离</li><li>top canvas距离顶部的距离</li><li>width canvas的宽度</li><li>height canvas的高度</li><li>naturalWidth canvas的原始宽度</li><li>naturalHeight canvas的原始高度</li></ul><h5 id="setCanvasData-data-使用数据更改画布Canvas-图像包装器-位置和大小"><a href="#setCanvasData-data-使用数据更改画布Canvas-图像包装器-位置和大小" class="headerlink" title="setCanvasData(data) 使用数据更改画布Canvas(图像包装器)位置和大小"></a>setCanvasData(data) 使用数据更改画布Canvas(图像包装器)位置和大小</h5><p>返回数据<br>Type:Object</p><ul><li>left canvas距离左边的距离</li><li>top canvas距离顶部的距离</li><li>width canvas的宽度</li><li>height canvas的高度</li></ul><h5 id="getCropBoxData-输出截图框的位置和大小数据"><a href="#getCropBoxData-输出截图框的位置和大小数据" class="headerlink" title="getCropBoxData() 输出截图框的位置和大小数据"></a>getCropBoxData() 输出截图框的位置和大小数据</h5><p>返回数据<br>Type:Object</p><ul><li>left 截图框距离左边的距离</li><li>top 截图框距离顶部的距离</li><li>width 截图框的宽度</li><li>height 截图框的高度</li></ul><h5 id="setCropBoxData-data-改变截图框的位置和大小数据"><a href="#setCropBoxData-data-改变截图框的位置和大小数据" class="headerlink" title="setCropBoxData(data) 改变截图框的位置和大小数据"></a>setCropBoxData(data) 改变截图框的位置和大小数据</h5><p>返回数据<br>Type:Object</p><ul><li>left 截图框距离左边的距离</li><li>top 截图框距离顶部的距离</li><li>width 截图框的宽度</li><li>height 截图框的高度</li></ul><h5 id="getCroppedCanvas-options-—画一张剪裁的图片-如果没有剪裁，则返回一个绘制整个im的画布"><a href="#getCroppedCanvas-options-—画一张剪裁的图片-如果没有剪裁，则返回一个绘制整个im的画布" class="headerlink" title="getCroppedCanvas([options])—画一张剪裁的图片,如果没有剪裁，则返回一个绘制整个im的画布"></a>getCroppedCanvas([options])—画一张剪裁的图片,如果没有剪裁，则返回一个绘制整个im的画布</h5><p>options<br>Type:Object<br>options 类型Object</p><ul><li>width 输出Canvas的宽度</li><li>height 输出Canvas的高度</li><li>minWidth 输出Canvas的最小宽度；默认值是0</li><li>minHeight 输出Canvas的最小高度；默认值是0</li><li>maxWidth 输出Canvas的最大宽度；默认值是Infinity（无穷大）</li><li>maxHeight 输出Canvas的最大高度；默认值是Infinity（无穷大）</li><li>fillColor 在输出画布Canvas中填充任何alpha的颜色，默认值是透明的</li><li>imageSmoothingEnabled 如果图像被设置为平滑(true，默认)或不设置(false)。</li><li>imageSmoothingQuality 设置图像的质量，一个“low”(默认)、“medium”或“high”</li></ul><p>返回数据：<br>Type：HTMLCanvasElement画布绘制出了剪裁过的图像<br>注意：输出canvas画布的宽高比将自动适应剪切框的纵横比.<br>如果你打算从输出画布canvas中获得一个JPEG图像，您应该首先设置填色选项,否则,JPEG图像中的透明部分将在缺少情况下变为黑色.<br>为了避免获得空白的输出图像,您可能需要将maxWidth和maxHeightproperties设置为有限的数字,从而来画布元素的大小限制.</p><h5 id="setAspectRatio-aspectRatio-改变裁切框的宽高比"><a href="#setAspectRatio-aspectRatio-改变裁切框的宽高比" class="headerlink" title="setAspectRatio(aspectRatio) 改变裁切框的宽高比"></a>setAspectRatio(aspectRatio) 改变裁切框的宽高比</h5><p>aspectRatio:<br>Type:number 是一个正数</p><h5 id="setDragMode-mode-设置拖拽模式-鼠标显示的是十字还是那种带箭头的十字"><a href="#setDragMode-mode-设置拖拽模式-鼠标显示的是十字还是那种带箭头的十字" class="headerlink" title="setDragMode([mode]) 设置拖拽模式,鼠标显示的是十字还是那种带箭头的十字"></a>setDragMode([mode]) 设置拖拽模式,鼠标显示的是十字还是那种带箭头的十字</h5><p>mode:<br>Type:string (none,crop,move)<br>Default:null</p>]]></content>
      
      
      <categories>
          
          <category> 库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深入了解函数</title>
      <link href="/2019/02/20/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E5%87%BD%E6%95%B0/"/>
      <url>/2019/02/20/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h4 id="函数声明"><a href="#函数声明" class="headerlink" title="函数声明"></a>函数声明</h4><h5 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">var fn = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    <span class="hljs-built_in">return</span> 1<br>&#125;<br><br>var fn2 = fn<br>fn.name //fn<br>fn2.name //fn<br></code></pre></td></tr></table></figure><p>注意,这里的变量fn是保存匿名函数的内存地址,而不是函数本身.</p><h5 id="具名函数"><a href="#具名函数" class="headerlink" title="具名函数"></a>具名函数</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn3</span></span>()&#123;<br>    <span class="hljs-built_in">return</span> 3<br>&#125;<br><br>var fn5 = <span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn4</span></span>()&#123;<br>    <span class="hljs-built_in">return</span> 4<br>&#125;<br><br>console.log(fn3) //3<br>console.log(fn4) //undefined<br>console.log(fn5) //4<br></code></pre></td></tr></table></figure><p>注意,具名函数假如不赋值给变量,那么作用域是全局,如果赋值给变量,那么作用域在函数本身.</p><h5 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">var fn6 = i =&gt; i+1<br><br>fn6(1) //2<br><br>var fn7 = i =&gt;&#123;<br>    i+1;<br>    ...doSometing<br>&#125;<br><br>fn7(1) //undefiend<br></code></pre></td></tr></table></figure><p>假如箭头函数只有一个变量,那么括号可不写.<br>箭头函数的函数体只有一句话,那么return的值就是求的值.<br>箭头函数的this是上下文的this.</p><h4 id="词法作用域-静态作用域"><a href="#词法作用域-静态作用域" class="headerlink" title="词法作用域(静态作用域)"></a>词法作用域(静态作用域)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">var globall1 = 1<br><span class="hljs-keyword">function</span> fn1(param1)&#123;<br>    var local1 = <span class="hljs-string">'local1'</span><br>    var local2 = <span class="hljs-string">'local2'</span><br>    <span class="hljs-keyword">function</span> fn2(param2)&#123;<br>        var local2 = <span class="hljs-string">'inner local2'</span><br>        console.log(local1)<br>        console.log(local2)<br>    &#125;<br>    <span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn3</span></span>()&#123;<br>        var local2 = <span class="hljs-string">'fn3 local2'</span><br>        fn2(local2)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>JS引擎会先进行词法解析,并形成词法树</p><p>下面是上面函数的词法树</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>   window<br>     |<br> ----------<br>|         |<br>global1  fn1<br>---<br> |<br>------------------------------------<br> |       |          |       |       |<br> param1 local1    local2   fn2     fn3<br>                            |       |<br>                           ---     ---<br>                            |       |<br>                          local2  local2<br></code></pre></td></tr></table></figure><ol><li>当函数寻找变量的时候,会先从函数内部寻找变量</li><li><p>假如没有该变量,则会从词法树往上找.</p></li><li><p>fn2里的console.log(local1)是上层fn1的local2,所以输出’local1’,</p></li><li>fn2里的console.log(local2)是自己的local2,所以输出’inner local2’,</li><li>fn3里的local2是自己的local2,为’fn3 local2’.</li><li>fn3里的fn2(local2),local2是他本身local2,即fn2(‘fn3 local2’),最终结果同2.</li></ol><h4 id="Call-stack"><a href="#Call-stack" class="headerlink" title="Call stack"></a>Call stack</h4><p>Stack(栈),先进后出.</p><ol><li><p>普通调用</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">a</span></span>()&#123;<br>    console.log(<span class="hljs-string">'a'</span>)<br>    <span class="hljs-built_in">return</span> <span class="hljs-string">'a'</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">a</span></span>()&#123;<br>    console.log(<span class="hljs-string">'b'</span>)<br>    <span class="hljs-built_in">return</span> <span class="hljs-string">'b'</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">a</span></span>()&#123;<br>    console.log(<span class="hljs-string">'c'</span>)<br>    <span class="hljs-built_in">return</span> <span class="hljs-string">'c'</span><br>&#125;<br><br>a()<br>b()<br>c()<br></code></pre></td></tr></table></figure><p> 运行函数</p><p> 进行了以下事情</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">先进行词法解析,函数提升<br><br>-&gt;a() //进入a,记下a的位置<br>    -&gt;console.log(<span class="hljs-string">'a'</span>) //进入,记下该位置<br>    &lt;-console.log(<span class="hljs-string">'a'</span>) //退出,回到原位置<br>    -&gt;<span class="hljs-built_in">return</span> <span class="hljs-string">'a'</span> //进入<br>    &lt;-<span class="hljs-built_in">return</span> <span class="hljs-string">'a'</span> //退出<br>&lt;-a() //退出a,回到原来a的位置<br><br>-&gt;b()//进入b,记下a的位置<br><br>    ...<br><br>&lt;-c() `<br></code></pre></td></tr></table></figure></li><li><p>嵌套调用</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">a</span></span>()&#123;<br>    console.log(<span class="hljs-string">'a1'</span>)<br>    b()<br>    console.log(<span class="hljs-string">'a2'</span>)<br>    <span class="hljs-built_in">return</span> <span class="hljs-string">'a'</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">a</span></span>()&#123;<br>    console.log(<span class="hljs-string">'b1'</span>)<br>    c()<br>    console.log(<span class="hljs-string">'b2'</span>)<br>    <span class="hljs-built_in">return</span> <span class="hljs-string">'b'</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">a</span></span>()&#123;<br>    console.log(<span class="hljs-string">'c'</span>)<br>    <span class="hljs-built_in">return</span> <span class="hljs-string">'c'</span><br>&#125;<br></code></pre></td></tr></table></figure><p>运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">-&gt;a()<br>    -&gt;console.log(<span class="hljs-string">'a1'</span>)<br>    &lt;-console.log(<span class="hljs-string">'a1'</span>)<br>    -&gt;b()<br>        -&gt;console.log(<span class="hljs-string">'b1'</span>)<br>        &lt;-console.log(<span class="hljs-string">'b1'</span>)<br>        -&gt;c()<br>            -&gt;console.log(<span class="hljs-string">'c'</span>)<br>            &lt;-console.log(<span class="hljs-string">'c'</span>)<br>            -&gt;<span class="hljs-built_in">return</span> <span class="hljs-string">'c'</span><br>            &lt;-<span class="hljs-built_in">return</span> <span class="hljs-string">'c'</span><br>        &lt;-c()<br>        -&gt;console.log(<span class="hljs-string">'b2'</span>)<br>        &lt;-console.log(<span class="hljs-string">'b2'</span>)<br>        -&gt;<span class="hljs-built_in">return</span> <span class="hljs-string">'b'</span><br>        &lt;-<span class="hljs-built_in">return</span> <span class="hljs-string">'b'</span><br>    &lt;-b()<br>    -&gt;console.log(<span class="hljs-string">'a2'</span>)<br>    &lt;-console.log(<span class="hljs-string">'a2'</span>)<br>    -&gt;<span class="hljs-built_in">return</span> <span class="hljs-string">'a'</span><br>    &lt;-<span class="hljs-built_in">return</span> <span class="hljs-string">'a'</span><br>&lt;-a()<br></code></pre></td></tr></table></figure><ol start="3"><li>递归</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> fab(n)&#123;<br>    console.log(<span class="hljs-string">'strat calc fab'</span> +n)<br>    <span class="hljs-keyword">if</span>(n&gt;=3)&#123;<br>        <span class="hljs-built_in">return</span> fab(n-1) + fab(n-2)<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-built_in">return</span> 1<br>    &#125;<br>&#125;<br><br>fab(5)<br></code></pre></td></tr></table></figure><p>运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs bash">strat calc fab 5<br>    5&gt;3<br>    求fab(4)<br>        strat calc fab 4<br>        fab(3)+fab(2)<br>        4&gt;3<br>        求fab(3)<br>            strat calc fab 3<br>            fab(2)+fab(1)<br>            3=3<br>            求fab(2)<br>                strat calc fab 2<br>                fab(2)+fab(1)<br>                3-1&lt;3<br>                fab(2)=1<br>            求fab(1)<br>                strat calc fab 1<br>                1&lt;3<br>                fab(1)=1<br>        得fab(3) = 1 + 1 = 2<br>        求fab(2)<br>            strat calc fab 2<br>            2&lt;3<br>            fab(2)=1<br>        得fab(2) = 1<br>    得fab(4) = 2 + 1 = 3<br>    求fab(3)<br>        strat calc fab3<br>        fab(2)+fb(1)<br>            求fab(2)<br>            strat calc fab 2<br>            2&lt;3<br>            fab(2)=1<br>            求fab(1)<br>             strat calc fab1<br>             fab(1)=1<br>    得fab(3) = 1 + 1 = 2<br>得fab(5) = 3 + 2 = 5<br></code></pre></td></tr></table></figure><h4 id="this-amp-arguments"><a href="#this-amp-arguments" class="headerlink" title="this&amp;arguments"></a>this&amp;arguments</h4><h5 id="this是隐藏的第一参数-且必须是对象"><a href="#this是隐藏的第一参数-且必须是对象" class="headerlink" title="this是隐藏的第一参数,且必须是对象"></a>this是隐藏的第一参数,且必须是对象</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">f</span></span>()&#123;<br>    console.log(this)<br>    console.log(arguments)<br>&#125;<br><br>f.call() //window (chrome是Window) ,[]<br>f.call(&#123;name:<span class="hljs-string">'a'</span>&#125;) //&#123;name:<span class="hljs-string">'a'</span>&#125; ,[]<br>f.call(&#123;name:<span class="hljs-string">'a'</span>&#125;,1) //&#123;name:<span class="hljs-string">'a'</span>&#125;,[1]<br>f.call(&#123;name:<span class="hljs-string">'a'</span>&#125;,1,2) //&#123;name:<span class="hljs-string">'a'</span>,[1,2]&#125;<br></code></pre></td></tr></table></figure><h5 id="this是函数与对象的羁绊"><a href="#this是函数与对象的羁绊" class="headerlink" title="this是函数与对象的羁绊"></a>this是函数与对象的羁绊</h5><p>函数调用的时候,this只看调用时前面的对象是什么,不看定义时的对象,是独立存在的!<br>this是调用时第一个隐藏参数.<br>如<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">var name = window<br>var person = &#123;<br>    name:<span class="hljs-string">'roxas'</span>,<br>    sayHi:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        console.log(<span class="hljs-string">'I am'</span> + this.name)<br>    &#125;<br>&#125;<br><br>person.sayHi() //I am roxas<br>//相当于perosn.sayHi.call(peroson)<br><br>var fn = person.sayHi<br>fn() //I am window<br>//相当于peroson.sayHi.call()<br></code></pre></td></tr></table></figure></p><h4 id="call-apply"><a href="#call-apply" class="headerlink" title="call/apply"></a>call/apply</h4><p>fn.call(_this,p1,p2)是函数的正常调用方式.<br>当你不确定参数的个数时,就使用apply.<br>fn.apply(_this,params)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">假设数组的长度不确定<br>var arr = [1,2,3,4,5,....]<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">sum</span></span>()&#123;<br>    var n = 0;<br>    <span class="hljs-keyword">for</span>(var i = 0;i&lt; arguments.length;i++)&#123;<br>        n+= arguments[i]<br>    &#125;<br>&#125;<br><br>sum.call(undefined,arr[0],arr[1],....)<br>这时候无法用call,所以要用apply<br>sum.apply(undefined,arr)<br></code></pre></td></tr></table></figure><h4 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h4><p> call和appy都是直接调用函数,而bind则是返回一个新函数.<br> 但是并没有调用,这个函数调用时会call原来的函数,call的参数是bind传入的参数.<br> 也就是说,bind的函数的this是bind参入的第一个参数.</p><h4 id="柯里化"><a href="#柯里化" class="headerlink" title="柯里化"></a>柯里化</h4><h4 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h4><h4 id="回调"><a href="#回调" class="headerlink" title="回调"></a>回调</h4><h4 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h4><h4 id="箭头函数-1"><a href="#箭头函数-1" class="headerlink" title="箭头函数"></a>箭头函数</h4><p>与普通函数区别</p><ol><li>this是上下文的this</li><li>不能指定this,call()无效</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn</span></span>()&#123;<br>    this<br>    <span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn2</span></span>()&#123;<br>        this //通过调用确定<br>    &#125;<br>    var fn3 = ()=&gt;&#123;<br>        this //一定是函数内的this<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>详解Vuex的使用</title>
      <link href="/2019/02/16/%E8%AF%A6%E8%A7%A3Vuex%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/02/16/%E8%AF%A6%E8%A7%A3Vuex%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h4 id="Vuex的引入"><a href="#Vuex的引入" class="headerlink" title="Vuex的引入"></a>Vuex的引入</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">import Vue from <span class="hljs-string">'vue'</span><br>import Vuex from <span class="hljs-string">'vuex'</span><br><br>Vue.use(Vuex)<br></code></pre></td></tr></table></figure><h4 id="vuex的格式"><a href="#vuex的格式" class="headerlink" title="vuex的格式"></a>vuex的格式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">new Vuex.Store(&#123;<br>    state: &#123;<br>        //数据<br>    &#125;,<br>    getters:&#123;<br>        //可理解为state的计算属性,同计算属性一样会被缓存,刷新才重新计算<br>    &#125;<br>    mutations: &#123;<br>        //修改state的同步方法<br>    &#125;,<br>    actions: &#123;<br>        //异步方法,需要调用mutations修改state<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="state的使用"><a href="#state的使用" class="headerlink" title="state的使用"></a>state的使用</h4><p>由于state是响应式的,所以在组件中使用state时,最简单的方法是用计算属性</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">//vuex<br>&#123;<br>    state:&#123;<br>        list:[1,2,3]<br>    &#125;<br>&#125;<br><br>//compoment<br><br>computed:&#123;<br>    <span class="hljs-function"><span class="hljs-title">list</span></span>()&#123;<br>        <span class="hljs-built_in">return</span> this.<span class="hljs-variable">$store</span>.state.list<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="getters的使用"><a href="#getters的使用" class="headerlink" title="getters的使用"></a>getters的使用</h4><p>可理解为state的计算属性,同计算属性一样会被缓存,刷新才重新计算<br>应用场景:当多个组件属性用到这个属性的时候,可以简化代码</p><h4 id="通过属性访问"><a href="#通过属性访问" class="headerlink" title="通过属性访问"></a>通过属性访问</h4><p>可以以属性的形式访问这些值<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>//vuex<br>&#123;<br>    state:&#123;<br>        list:[1,2,3]<br>    &#125;,<br>    getters:&#123;<br>        count:state=&gt;&#123;<br>            <span class="hljs-built_in">return</span> state.list.map((item)=&gt;&#123;<br>                item++<br>            &#125;)<br>        &#125;<br>    &#125;<br>&#125;<br><br>//component<br><br>computed:&#123;<br>    <span class="hljs-function"><span class="hljs-title">count</span></span>()&#123;<br>        <span class="hljs-built_in">return</span> this.<span class="hljs-variable">$store</span>.getters.count<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><h5 id="通过方法访问"><a href="#通过方法访问" class="headerlink" title="通过方法访问"></a>通过方法访问</h5><p>可以通过让getter返回一个函数,来实现给getter传参,在对store数组进行查询时非常有用.<br>注意,getter通过方法访问时,每次都会进行调用,不会缓存.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>//vuex<br>getter:&#123;<br>    getNumber:(state)=&gt;&#123;<br>        (id)=&gt;&#123;<br>            <span class="hljs-built_in">return</span> state.list.find((item)=&gt;&#123;<br>                item === id<br>            &#125;)<br>        &#125;<br>    &#125;<br>&#125;<br><br>//compoment<br><br>this.<span class="hljs-variable">$store</span>.getters.getNumber(1)<br></code></pre></td></tr></table></figure><h5 id="mapGetters辅助函数"><a href="#mapGetters辅助函数" class="headerlink" title="mapGetters辅助函数"></a>mapGetters辅助函数</h5><p>mapGetters辅助函数仅仅是将store中的getter映射到局部计算属性</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">import &#123;mapGetters&#125; from <span class="hljs-string">'vuex'</span><br><br>computed:&#123;<br>    //使用对象展开运算符将getter混入原computed对象中<br>    ...mapGetters([<br>        <span class="hljs-string">'list1'</span>,<br>        <span class="hljs-string">'list2'</span>,<br>        <span class="hljs-string">'list3'</span>,<br>        //...<br>    ])<br>&#125;<br></code></pre></td></tr></table></figure><p>如想讲getter属性另取名字,使用对象形式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">mapGetters(&#123;<br>    //把this.newListname映射为this.<span class="hljs-variable">$store</span>.getters.list1<br>    newListname:<span class="hljs-string">'list1'</span><br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="Mutation"><a href="#Mutation" class="headerlink" title="Mutation"></a>Mutation</h4><p>Mutation是vuex更改state的唯一方法,并且必须是同步的.<br>每个mutation都有一个事件类型(type)和回调函数(hander),并且以state作为第一个参数</p><p>调用只能通过state.commit(‘type’)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>//vuex<br>state:&#123;<br>    count:1<br>&#125;,<br>mutations:&#123;<br>    increment(state)&#123;<br>        state.count++<br>    &#125;<br>&#125;<br><br>//compoment<br><br>store.commit(<span class="hljs-string">'increment'</span>)<br></code></pre></td></tr></table></figure></p><h5 id="提交载荷-payload"><a href="#提交载荷-payload" class="headerlink" title="提交载荷(payload)"></a>提交载荷(payload)</h5><p>store.commit传入额外参数,即mutation的载荷(payload)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">//vuex<br><br>mutations:&#123;<br>    increment(state,n)&#123;<br>        state.count += n<br>    &#125;<br>&#125;<br><br>//component<br>store.commit(<span class="hljs-string">'increment'</span>,10)<br></code></pre></td></tr></table></figure><h5 id="mapMutations"><a href="#mapMutations" class="headerlink" title="mapMutations"></a>mapMutations</h5><p>同mapGetters</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs undefined">//vuex<br><br>mutations:&#123;<br>    increment(state)&#123;<br>        state.count++<br>    &#125;<br>&#125;<br><br>//compoment<br><br>improt &#123;mapMutations&#125; from &apos;vuex&apos;<br><br>methods:&#123;<br>    ..mapMutations([&apos;increment&apos;])<br>    //或<br>    //...mapMutations(&#123;<br>        add:&apos;increment&apos;<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h4><p>vuex需要异步操作时,需要用action,用action调用mutation的方法更改state</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">//vuex<br><br>state:&#123;<br>    count:0<br>&#125;,<br>mutations:&#123;<br>    increment(state)&#123;<br>        state.count++<br>    &#125;<br>&#125;.<br>actions:&#123;<br>    add(context)&#123;<br>        setTimeout(()=&gt;&#123;<br>            context.commit(<span class="hljs-string">'increment'</span>)<br>        &#125;,1000)<br>    &#125;<br>&#125;<br><br>//compoment<br>store.dispatch(<span class="hljs-string">'add'</span>)<br></code></pre></td></tr></table></figure><h5 id="参数context"><a href="#参数context" class="headerlink" title="参数context"></a>参数context</h5><p>action的第一个参数context相当于上下文,可以通过context.state和context.getters获取state与getters<br>可以用ES6的赋值解构进行简写.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">actions:&#123;<br>    add(&#123;commit&#125;)&#123;<br>        setTimeout(()=&gt;&#123;<br>            commit(<span class="hljs-string">'increment'</span>)<br>        &#125;,1000)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="mapActions"><a href="#mapActions" class="headerlink" title="mapActions"></a>mapActions</h5><p>方法同mapMutations</p>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图片延迟加载</title>
      <link href="/2019/01/24/%E5%9B%BE%E7%89%87%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD/"/>
      <url>/2019/01/24/%E5%9B%BE%E7%89%87%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<h4 id="图片延迟加载原理"><a href="#图片延迟加载原理" class="headerlink" title="图片延迟加载原理"></a>图片延迟加载原理</h4><ol><li>通过设置默认图片与图片属性的替换</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;img src=<span class="hljs-string">"默认图片.jpg"</span> data-src=<span class="hljs-string">"真实图片地址.jpg"</span>&gt;<br></code></pre></td></tr></table></figure><ol start="2"><li>通过监听滚动事件,判断图片是否进入视窗内<br>当图片距离视窗顶高度小于窗口高度则表示图片已进入视窗内</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> windowHeight = document.documentElement.clientHeight<br><span class="hljs-built_in">let</span> imgCurrentHeight = img.getBoundingClientRect().top<br><br><span class="hljs-keyword">if</span>(imgCurrentHeight &lt;= widnowHeight)&#123;<br>    //触发<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>由于滚动时一直调用函数会造成性能损失,所以使用函数节流</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> throttle(fn,time)&#123;<br>    <span class="hljs-built_in">let</span> lastTime = 0;<br>    <span class="hljs-built_in">return</span> ()=&gt;&#123;<br>        <span class="hljs-built_in">let</span> currTime = new Date();<br>        <span class="hljs-keyword">if</span>(currTime - lastTime &gt; time|| !lastTime)&#123;<br>            fn();<br>            lastTime = 0;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs bash">//html<br>&lt;img scr=<span class="hljs-string">"默认图片.jpg"</span> data-scr=<span class="hljs-string">"真实地址.jpg"</span>&gt;<br><br>//js<br><span class="hljs-keyword">function</span> throttle(fn,time)&#123;<br>    <span class="hljs-built_in">let</span> lastTime = 0;<br>    <span class="hljs-built_in">return</span> ()=&gt;&#123;<br>        <span class="hljs-built_in">let</span> currTime = new Date();<br>        <span class="hljs-keyword">if</span>(currTime - lastTime &gt; time|| !lastTime)&#123;<br>            fn();<br>            lastTime = 0;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">lazyLoad</span></span>()&#123;<br>    <span class="hljs-built_in">let</span> imgs = document.getElementsByTagName(<span class="hljs-string">'img'</span>)<br>    <span class="hljs-built_in">let</span> imgsLength = imgs.length<br>    <span class="hljs-built_in">let</span> n = 0; //记录每次遍历的图片,防止重新遍历<br>    <span class="hljs-built_in">return</span> ()=&gt;&#123;<br>        <span class="hljs-built_in">let</span> windowHeight = document.documentElement.clientHeight<br>        <span class="hljs-built_in">let</span> scrollHeight = document.documentElement.scrollTop<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> i = n;n &lt; imgsLength;i++)&#123;<br>            <span class="hljs-keyword">if</span>(imgs[i].getBoundingClientRect().top &lt; windowHeight)&#123;//当图片距离视窗顶高度小于窗口高度则表示图片已进入视窗内<br>                <span class="hljs-keyword">if</span>(imgs[i].getAttribute(<span class="hljs-string">'src'</span>) === <span class="hljs-string">'默认图片.jpg'</span> )&#123;<br>                    imgs[i].src = imgs[i].getAttribute(<span class="hljs-string">'data-src'</span>);<br>                &#125;<br>                n += 1<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br>window.addEventListener(<span class="hljs-string">'scroll'</span>,throttle(lazyLoad(),500))<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 业务代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 业务代码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>函数节流与防抖</title>
      <link href="/2019/01/24/%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81%E4%B8%8E%E9%98%B2%E6%8A%96/"/>
      <url>/2019/01/24/%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81%E4%B8%8E%E9%98%B2%E6%8A%96/</url>
      
        <content type="html"><![CDATA[<h4 id="函数防抖-debounce"><a href="#函数防抖-debounce" class="headerlink" title="函数防抖(debounce)"></a>函数防抖(debounce)</h4><h5 id="函数防抖的定义"><a href="#函数防抖的定义" class="headerlink" title="函数防抖的定义"></a>函数防抖的定义</h5><p>事件触发,等待一段时间,假如事件在时间内不再触发,则调用函数,假如触发重新计算时间.</p><h5 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h5><p>设置定时器为null,假如定时器存在则清空,再设置新的定时器,事件结束后触发函数,并清空定时器.</p><h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> debounce(fn,<span class="hljs-built_in">wait</span>)&#123;<br>    <span class="hljs-built_in">let</span> timer = null;<br>    <span class="hljs-built_in">return</span> ()=&gt;&#123;<br>         <span class="hljs-keyword">if</span>(timer)&#123;<br>             clearTimeout(timer);<br>         &#125;<br>         timer = setTimeout(()=&gt;&#123;<br>             fn()<br>            timer = null<br>         &#125;,<span class="hljs-built_in">wait</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h4><ol><li>每次resize或者scroll触发统计事件 </li><li>文本输入调用ajax</li></ol><h4 id="函数节流-throttle"><a href="#函数节流-throttle" class="headerlink" title="函数节流(throttle)"></a>函数节流(throttle)</h4><h5 id="函数节流的定义"><a href="#函数节流的定义" class="headerlink" title="函数节流的定义"></a>函数节流的定义</h5><p>一段时间内只能调用一次函数(技能CD)</p><h5 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h5><p>使用时间戳来判断是否到回调执行时间,记录上次执行时间,当当前时间与上次执行时间间隔大于时间戳则执行回调.</p><p>设置状态doing,触发事件,状态变为true,一段时间后变为false.只有状态为false才回调函数.</p><h5 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">//实现方式1<br><span class="hljs-keyword">function</span> throttle(fn,gapTime)&#123;<br>    <span class="hljs-built_in">let</span> lastTime = 0;<br>    <span class="hljs-built_in">return</span> ()=&gt;&#123;<br>        <span class="hljs-built_in">let</span> currTime = new Date();<br>        <span class="hljs-keyword">if</span>(currTime - lastTime &gt; gapTime || !lastTime)&#123;<br>            fn();<br>            lastTime = currTime<br>        &#125;<br>    &#125;<br>&#125;<br><br>//实现方式2<br><span class="hljs-keyword">function</span> throttle(fn,gapTime)&#123;<br>    <span class="hljs-built_in">let</span> doing = <span class="hljs-literal">false</span>;<br>    <span class="hljs-built_in">return</span> ()=&gt;&#123;<br>        <span class="hljs-keyword">if</span>(doing === <span class="hljs-literal">false</span>)&#123;<br>        fn()<br>        doing = <span class="hljs-literal">true</span><br>        setTimeout(()=&gt;&#123;<br>            doing = <span class="hljs-literal">false</span><br>        &#125;,gapTime)<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="应用场景-1"><a href="#应用场景-1" class="headerlink" title="应用场景"></a>应用场景</h5><ol><li>DOM元素拖动</li><li>Canvas</li><li>计算鼠标移动距离</li><li>自动联想</li><li>滚动到底部加载数据</li></ol>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Promise的使用 &amp; async awit</title>
      <link href="/2019/01/18/Promise%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/01/18/Promise%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><h4 id="Promise-的作用"><a href="#Promise-的作用" class="headerlink" title="Promise 的作用"></a>Promise 的作用</h4><p>当一个异步函数执行的时候,需要回调,可使用 Promise 链式操作进行回调.</p><p>例子:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> fn1(callback)&#123;<br>    setTimeout(()=&gt;&#123;<br>        console.log(<span class="hljs-string">'fn1执行'</span>)<br>    &#125;,1000)<br>&#125;<br><br><span class="hljs-keyword">function</span> fn1(callback)&#123;<br>    setTimeout(()=&gt;&#123;<br>        console.log(<span class="hljs-string">'fn2执行'</span>)<br>        callback()<br>    &#125;,1000)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn1</span></span>()&#123;<br>    setTimeout(()=&gt;&#123;<br>        console.log(<span class="hljs-string">'fn3执行'</span>)<br>        callback()<br>    &#125;,1000)<br>&#125;<br></code></pre></td></tr></table></figure><p>我们以前是这样回调的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs undefined"><br>fn1(()=&gt;&#123;<br>    fn2(()=&gt;&#123;<br>        fn3<br>    &#125;)<br>&#125;)<br>//控制台一秒后输出 fn1,再一秒后输出 fn2,再一秒后输出 fn3<br></code></pre></td></tr></table></figure><p>因为回调函数复杂的时候非常麻烦,所以我们可以使用 promise 改写上面的函数</p><h4 id="Promise-语法"><a href="#Promise-语法" class="headerlink" title="Promise 语法"></a>Promise 语法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">promiseFn</span></span>()&#123;<br>    <span class="hljs-built_in">return</span> new Promise((resolve,reject)=&gt;&#123;<br>        //当异步函数执行成功时<br>        resolve();<br>        //当异步函数执行失败时,<br>        reject();<br>    &#125;)<br>&#125;<br><br>promiseFn().<span class="hljs-keyword">then</span>(()=&gt;&#123;&#125;).catch(()=&gt;&#123;&#125;)<br></code></pre></td></tr></table></figure><p>构造函数 Promise 接收一个参数 function,function 接收两个参数,一个是成功时执行的函数,一个是失败时执行的函数.<br>通过链式操作,我们可以分别对不同的结果分别执行不同的回调函数.</p><p>通过 promise 改写上面的函数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn1</span></span>()&#123;<br>    <span class="hljs-built_in">return</span> new Promise((resolve, reject) =&gt; &#123;<br>        setTimeout(() =&gt; &#123;<br>            console.log(<span class="hljs-string">'fn1执行'</span>)<br>            resolve()<br>        &#125;, 1000)<br>    &#125;)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn2</span></span>()&#123;<br>    <span class="hljs-built_in">return</span> new Promise((resolve, reject) =&gt; &#123;<br>        setTimeout(() =&gt; &#123;<br>            console.log(<span class="hljs-string">'fn2执行'</span>)<br>            resolve()<br>        &#125;, 1000)<br>    &#125;)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn3</span></span>()&#123;<br>    <span class="hljs-built_in">return</span> new Promise((resolve, reject) =&gt; &#123;<br>        setTimeout(() =&gt; &#123;<br>            console.log(<span class="hljs-string">'fn3执行'</span>)<br>            resolve()<br>        &#125;, 1000)<br>    &#125;)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">onerror</span></span>() &#123;<br>    console.log(<span class="hljs-string">'error'</span>)<br>&#125;<br><br>fn1().<span class="hljs-keyword">then</span>(fn2).<span class="hljs-keyword">then</span>(fn3).catch(onerror)<br></code></pre></td></tr></table></figure><p>当异步函数执行时,下一个异步函数需要用上一个异步函数的返回值可以这样写</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs bash">//定义函数获取城市<br><span class="hljs-keyword">function</span> getCity(ip)&#123;<br>    <span class="hljs-built_in">return</span> new Promise((resolve,reject)=&gt;&#123;<br>        <span class="hljs-built_in">let</span> xhr = new XMLHttpRequest();<br>        xhr.open(<span class="hljs-string">'GET'</span>,url/ip,<span class="hljs-literal">true</span>)<br>        xhr.onload = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            var data = JSON.parse(xhr.responseText) //获得数据<br>            resolve(data)<br>        &#125;<br>        xhr.onerror = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            reject(<span class="hljs-string">'获取失败'</span>)<br>        &#125;<br>        xhr.send()<br>    &#125;)<br>&#125;<br>//定义函数获取天气<br><span class="hljs-keyword">function</span> getWeather(city)&#123;<br>    <span class="hljs-built_in">return</span> new Promise((resolve,reject)=&gt;&#123;<br>        <span class="hljs-built_in">let</span> xhr = new XMLHttpRequest();<br>        xhr.open(<span class="hljs-string">'GET'</span>,url/city,<span class="hljs-literal">true</span>)<br>        xhr.onload = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            var data = JSON.parse(xhr.responseText)<br>        &#125;<br>        xhr.onerror = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            reject(<span class="hljs-string">'获取失败'</span>)<br>        &#125;<br>        xhr.send<br>    &#125;)<br>&#125;<br><br>//调用<br><br>getCity(上海).<span class="hljs-keyword">then</span>((city)=&gt;&#123;<br>    <span class="hljs-built_in">return</span> getWeather(city)<br>&#125;).<span class="hljs-keyword">then</span>((res)=&gt;&#123;<br>    console.log(res)<br>&#125;).catch((error)=&gt;&#123;<br>    console.log(error)<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all"></a>Promise.all</h4><p>当有几个 promise 的时候,我们可以用 promise.all 让所有 promise 状态变更之后再回调</p><p>then 的第一个参数是所有成功才执行,第二个参数是只要有一个失败就执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">Promise.all([p1,p2,p3]).<span class="hljs-keyword">then</span>((res1,res2,res3)=&gt;&#123;&#125;,(res1,res2,res3)=&gt;&#123;&#125;)<br></code></pre></td></tr></table></figure><h4 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race"></a>Promise.race</h4><p>当有几个 promise 的时候,我们可以用 promise.race 来获取最快/成功 promise 的 resolve</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">Promise.race([p1,p2,p3]).<span class="hljs-keyword">then</span>(()=&gt;&#123;&#125;)<br></code></pre></td></tr></table></figure><h4 id="Promise-reject"><a href="#Promise-reject" class="headerlink" title="Promise.reject()"></a>Promise.reject()</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs undefined">Promise.reject(&quot;Testing static reject&quot;).then((reason)=&gt;&#123;<br>  // 未被调用<br>&#125;, (reason) =&gt; &#123;<br>  console.log(reason); // &quot;Testing static reject&quot;<br>&#125;);<br><br>Promise.reject(new Error(&quot;fail&quot;)).then((result)=&gt;&#123;<br>  // 未被调用<br>&#125;, (error)=&gt;&#123;<br>  console.log(error); // stacktrace<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="finally"><a href="#finally" class="headerlink" title="finally"></a>finally</h4><p>当 promise 状态变更的时候时候,不管成功与失败,我们都可以执行同一个方法</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">.finally(loading=&gt;&#123;<br>    loding = <span class="hljs-literal">false</span><br>&#125;)<br><br>等价于<br>.<span class="hljs-keyword">then</span>(loading=&gt;&#123;loading = fasle&#125;,loading=&gt;&#123;loading = fasle&#125;)<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">promiseFn().finaly(&#123;&#125;=&gt;&#123;<br>    console.log(<span class="hljs-string">'异步结束'</span>)<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="catch"><a href="#catch" class="headerlink" title="catch"></a>catch</h4><p>只处理错误</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">.catch(error=&gt;&#123;<br>    console.log(error)<br>&#125;)<br><br>等价于<br><br>.<span class="hljs-keyword">then</span>(null,(error)=&gt;&#123;<br>    console.log(error)<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="async-await"><a href="#async-await" class="headerlink" title="async await"></a>async await</h3><h4 id="await"><a href="#await" class="headerlink" title="await"></a>await</h4><p>等待 promise 结束,并返回 resolve 的值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> isDog(name)&#123;<br>    <span class="hljs-built_in">return</span> new Promise((resove,reject)=&gt;&#123;<br>        setTimeout(()=&gt;&#123;<br>           <span class="hljs-keyword">if</span>(name === <span class="hljs-string">'dog'</span>)&#123;<br>               resove(<span class="hljs-string">'yes'</span>)<br>           &#125;<span class="hljs-keyword">else</span>&#123;<br>               reject(<span class="hljs-string">'no'</span>)<br>           &#125;<br>        &#125;,1000)<br>    &#125;)<br>&#125;<br><br> <span class="hljs-built_in">let</span> isWhat = await isDog(<span class="hljs-string">'dog'</span>) //<span class="hljs-string">'yes'</span><br></code></pre></td></tr></table></figure><h4 id="async"><a href="#async" class="headerlink" title="async"></a>async</h4><p>所有 async 函数都会隐式返回 promise 对象</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">async <span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">test</span></span>()&#123;<br>    <span class="hljs-built_in">let</span> isWhat = await isDog(<span class="hljs-string">'dog'</span>)<br>    console.log(isWhat) //yes<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="使用-async-函数-使用-try-catch-获取-promise-结果"><a href="#使用-async-函数-使用-try-catch-获取-promise-结果" class="headerlink" title="使用 async 函数,使用 try catch 获取 promise 结果"></a>使用 async 函数,使用 try catch 获取 promise 结果</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> isDog(name)&#123;<br>    <span class="hljs-built_in">return</span> new Promise((resove,reject)=&gt;&#123;<br>        setTimeout(()=&gt;&#123;<br>           <span class="hljs-keyword">if</span>(name === <span class="hljs-string">'dog'</span>)&#123;<br>               resove(<span class="hljs-string">'yes'</span>)<br>           &#125;<span class="hljs-keyword">else</span>&#123;<br>               reject(<span class="hljs-string">'no'</span>)<br>           &#125;<br>        &#125;,1000)<br>    &#125;)<br>&#125;<br><br>async <span class="hljs-keyword">function</span> <span class="hljs-built_in">test</span>(name)&#123;<br>    try&#123;<br>        <span class="hljs-built_in">let</span> isWhat = await isDog(name)<br>        console.log(isWhat)<br>    &#125;catch(error)&#123;<br>        console.log(error)<br>    &#125;<br><br>&#125;<br><br><span class="hljs-built_in">test</span>(<span class="hljs-string">'dog'</span>) //yes<br><span class="hljs-built_in">test</span>(<span class="hljs-string">'cat'</span>) //no<br></code></pre></td></tr></table></figure><h5 id="使用-async-函数获取两以个-promise-结果"><a href="#使用-async-函数获取两以个-promise-结果" class="headerlink" title="使用 async 函数获取两以个 promise 结果"></a>使用 async 函数获取两以个 promise 结果</h5><p>只有当两个 promise 都成功时,await 才会赋值,否则进入 catch</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> isDog(name)&#123;<br>    <span class="hljs-built_in">return</span> new Promise((resove,reject)=&gt;&#123;<br>        setTimeout(()=&gt;&#123;<br>           <span class="hljs-keyword">if</span>(name === <span class="hljs-string">'dog'</span>)&#123;<br>               resove(<span class="hljs-string">'yes'</span>)<br>           &#125;<span class="hljs-keyword">else</span>&#123;<br>               reject(<span class="hljs-string">'no'</span>)<br>           &#125;<br>        &#125;,1000)<br>    &#125;)<br>&#125;<br><br>async <span class="hljs-keyword">function</span> <span class="hljs-built_in">test</span>(name1,name2)&#123;<br>    try&#123;<br>        <span class="hljs-built_in">let</span> isWhat = await Promise.all([isDog(name1),isDog(name2)])<br>        console.log(isWhat)<br>    &#125;catch(error)&#123;<br>        console.log(error)<br>    &#125;<br><br>&#125;<br><br><span class="hljs-built_in">test</span>(<span class="hljs-string">'dog'</span>,<span class="hljs-string">'dog'</span>) //[yes,yes]<br><span class="hljs-built_in">test</span>(<span class="hljs-string">'dog'</span>,<span class="hljs-string">'cat'</span>) //no<br><span class="hljs-built_in">test</span>(<span class="hljs-string">'cat'</span>,<span class="hljs-string">'cat'</span>) //no<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>密码强度的实现</title>
      <link href="/2019/01/11/%E5%AF%86%E7%A0%81%E5%BC%BA%E5%BA%A6/"/>
      <url>/2019/01/11/%E5%AF%86%E7%A0%81%E5%BC%BA%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<h3 id="密码强度"><a href="#密码强度" class="headerlink" title="密码强度"></a>密码强度</h3><h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><h5 id="使用字符串-函数与运算符"><a href="#使用字符串-函数与运算符" class="headerlink" title="使用字符串,函数与运算符."></a>使用字符串,函数与运算符.</h5><p>一般密码会有数字,字母(大小写),特殊符号四种类型.</p><p>1:密码中只包含一种类型;<br>2:密码中包含两种类型;<br>3:密码中包含三种类型;<br>4:密码中包含所以类型.</p><h5 id="用以下形式表示四种字符的类型"><a href="#用以下形式表示四种字符的类型" class="headerlink" title="用以下形式表示四种字符的类型."></a>用以下形式表示四种字符的类型.</h5><table><thead><tr><th>字符类型</th><th style="text-align:center">二进制数字</th><th style="text-align:left">ASCII</th></tr></thead><tbody><tr><td>数字</td><td style="text-align:center">0001</td><td style="text-align:left">48~57</td></tr><tr><td>小写字母</td><td style="text-align:center">0010</td><td style="text-align:left">97~122</td></tr><tr><td>大写字母</td><td style="text-align:center">0100</td><td style="text-align:left">65~90</td></tr><tr><td>特殊字符</td><td style="text-align:center">1000</td><td style="text-align:left">ohter</td></tr></tbody></table><h5 id="例子"><a href="#例子" class="headerlink" title="例子:"></a>例子:</h5><table><thead><tr><th>字符类型</th><th style="text-align:center">二进制数字</th><th style="text-align:left">十进制</th></tr></thead><tbody><tr><td>1234</td><td style="text-align:center">0001/0001/0001/0001</td><td style="text-align:left">0001-&gt;1</td></tr><tr><td>abcd</td><td style="text-align:center">0010/0010/0010/0010</td><td style="text-align:left">0010-&gt;2</td></tr><tr><td>ABCD</td><td style="text-align:center">0100/0100/0100/0100</td><td style="text-align:left">0100-&gt;4</td></tr><tr><td>!@#$</td><td style="text-align:center">1000/1000/1000/1000</td><td style="text-align:left">1000-&gt;8</td></tr><tr><td>Aa1!</td><td style="text-align:center">0100/0010/0001/1000</td><td style="text-align:left">1111-&gt;15</td></tr></tbody></table><p>即:把密码变成4位二进制数,1的个数越多,密码强度越大.</p><h5 id="把二进数转换为强度"><a href="#把二进数转换为强度" class="headerlink" title="把二进数转换为强度"></a>把二进数转换为强度</h5><p>每次与1做”位于”(&amp;1)运算,假如为真,则强度+1(level++),否则不变,每循环一次,位移(&gt;&gt;&gt;)操作一次.</p><p>如:Abcd1234!:1111</p><ol><li>1111 &amp; 1;level=1;右移一位,得0111;</li><li>0111 &amp; 1;level=2;右移一位,得0011;</li><li>0011 &amp; 1;level=3;右移一位,得0001;</li><li>0001 &amp; 1;level=4;</li></ol><p>所以密码强度为4.</p><h5 id="使用jQuery实现代码"><a href="#使用jQuery实现代码" class="headerlink" title="使用jQuery实现代码"></a>使用jQuery实现代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs undefined">&lt;script&gt;<br>    var $password = $(&apos;#password&apos;);<br>    var $span = $(&apos;span&apos;);<br>    $password.on(&apos;keyup&apos;,()=&gt;&#123;<br>        let password = $password.val();<br>        checkLevel(password);<br>    &#125;)<br>    function Chartype(num)&#123;//检测字符串类型<br>        if(num &gt;= 48 &amp;&amp; num &lt;= 57)&#123;//数字<br>            return 1;<br>        &#125;else if(num &gt;= 97 &amp;&amp; num &lt;= 122)&#123;//小写字母<br>            return 2;<br>        &#125;else if(num &gt;= 65 &amp;&amp; num &lt;= 90)&#123;//大写字母<br>            return 4;<br>        &#125;else&#123;//符号<br>            return 8;<br>        &#125;<br>    &#125;<br>    function checkLevel(str)&#123;//检测密码强度<br>        let check = 0;<br>        let level = 0;<br>        for(let i = 0;i&lt;str.length;i++)&#123;<br>            check |= Chartype(str.charCodeAt(i));<br>        &#125;<br>        for(var i = 0;i &lt;= 4;i++)&#123;<br>            if(check &amp; 1)&#123;//每次循环位于运算<br>                level++;<br>            &#125;<br>            check = check &gt;&gt;&gt; 1;//运算结束后右移一位<br>        &#125;<br>        if(str.length &gt;= 8)&#123;//当密码大于8执行<br>            selectLevel(level);<br>        &#125;else&#123;//小于8清空<br>            level = 0;<br>            $span.removeClass(&apos;active&apos;);<br>        &#125;<br>        <br>    &#125;<br>    function selectLevel(level)&#123;//根据密码强度切换类<br>            switch(level)&#123;<br>                case 1:<br>                    $span.removeClass(&apos;active&apos;);<br>                    $(&apos;.first&apos;).addClass(&apos;active&apos;);<br>                    break;<br>                case 2:<br>                    $span.removeClass(&apos;active&apos;);<br>                    $(&apos;.second&apos;).addClass(&apos;active&apos;);<br>                    break;<br>                case 3:<br>                    $span.removeClass(&apos;active&apos;);<br>                    $(&apos;.thrid&apos;).addClass(&apos;active&apos;);<br>                    break;  <br>                case 4:<br>                    $span.removeClass(&apos;active&apos;);<br>                    $(&apos;.fourth&apos;).addClass(&apos;active&apos;);<br>                    break;  <br>            &#125;<br>    &#125;<br><br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 业务代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 业务代码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS盒子多边框</title>
      <link href="/2018/09/04/CSS%E7%9B%92%E5%AD%90%E5%A4%9A%E8%BE%B9%E6%A1%86/"/>
      <url>/2018/09/04/CSS%E7%9B%92%E5%AD%90%E5%A4%9A%E8%BE%B9%E6%A1%86/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>表单美化</title>
      <link href="/2018/09/03/%E8%A1%A8%E5%8D%95%E7%BE%8E%E5%8C%96/"/>
      <url>/2018/09/03/%E8%A1%A8%E5%8D%95%E7%BE%8E%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h4 id="改变checkbox样式"><a href="#改变checkbox样式" class="headerlink" title="改变checkbox样式"></a>改变checkbox样式</h4><h5 id="1-按钮"><a href="#1-按钮" class="headerlink" title="1.按钮"></a>1.按钮</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;li&gt;<br>    &lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"checkbox"</span> id=<span class="hljs-string">"id"</span> name=<span class="hljs-string">"sectors[]"</span><br>        value=<span class="hljs-string">"id"</span>&gt;<br>    &lt;label <span class="hljs-keyword">for</span>=<span class="hljs-string">"id"</span>&gt;ABC&lt;/label&gt;<br>&lt;/li&gt;<br><br>input[<span class="hljs-built_in">type</span>=checkbox] &#123;<br>    position: absolute;<br>    clip:rect(0,0,0,0);<br>&#125;<br><br>input[<span class="hljs-built_in">type</span>=checkbox] + label &#123;<br>    //样式<br>&#125;<br>input[<span class="hljs-built_in">type</span>=checkbox]:checked + label,<br>input[<span class="hljs-built_in">type</span>=checkbox]:active + label&#123;<br>    //选中后样式<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-改变选中框样式"><a href="#2-改变选中框样式" class="headerlink" title="2.改变选中框样式"></a>2.改变选中框样式</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">input[<span class="hljs-built_in">type</span>=checkbox]&#123;<br>    position: absolute;<br>    clip:rect(0,0,0,0);<br>&#125;<br><br>input[<span class="hljs-built_in">type</span>=checkbox] + label::before&#123;<br>    content:<span class="hljs-string">'\a0'</span>; //空格<br>    //样式<br>&#125;<br><br>input[tyoe=checkbox]:check + label::before&#123;<br>    content:<span class="hljs-string">'\2713'</span>,<br>    //选中后样式<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="去除Chrome浏览器历史记录的黄色"><a href="#去除Chrome浏览器历史记录的黄色" class="headerlink" title="去除Chrome浏览器历史记录的黄色"></a>去除Chrome浏览器历史记录的黄色</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">input:-webkit-autofill &#123;<br>    -webkit-box-shadow: 0 0 0px 1000px white inset;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="去除IOS输入框默认样式"><a href="#去除IOS输入框默认样式" class="headerlink" title="去除IOS输入框默认样式"></a>去除IOS输入框默认样式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">-webkit-appearance: none;<br>border-radius: 0;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bootstrap</title>
      <link href="/2018/08/03/bootstrap/"/>
      <url>/2018/08/03/bootstrap/</url>
      
        <content type="html"><![CDATA[<h4 id="网格系统-栅栏系统"><a href="#网格系统-栅栏系统" class="headerlink" title="网格系统/栅栏系统"></a>网格系统/栅栏系统</h4><p>所有代码在container里面</p><p>row 会有margin负15px,使容器扩大,不使用row会有bug</p><p>row一共12列</p><p>col-md-x 占x列</p><p>col-md-x col-md-offset-y 占x列 偏移y列(左边空出y列)</p><p>默认有4个媒体查询分界值</p><p>1200 992 768 0</p><p>lg(1200-max) 大屏幕   col-lg-1 大屏幕占1格<br>md(992-1200) 中等屏幕 col-md-2 中等屏幕占2格<br>sm(992-768) 小屏幕   col-sm-3 小屏幕占3格<br>xs(0-768) 超小屏幕 col-xs-6 超小屏幕占6格<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div class=<span class="hljs-string">"container"</span>&gt;<br>    &lt;div class=<span class="hljs-string">"row"</span>&gt;<br>        &lt;div class=<span class="hljs-string">"col-lg-1 col-md-2 col-sm-3 col-xs-6"</span>&gt;col&lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/div&gt;<br></code></pre></td></tr></table></figure></p><p>隐藏</p><p>.hidden-xs</p><p>右浮动(要注意宽度)</p><p>pull-right</p><h4 id="复杂组件"><a href="#复杂组件" class="headerlink" title="复杂组件"></a>复杂组件</h4><h5 id="css"><a href="#css" class="headerlink" title="css"></a>css</h5><p>icon</p><p>下拉列表 </p><p>导航栏</p><p>分页</p><p>图片</p><h5 id="js"><a href="#js" class="headerlink" title="js"></a>js</h5><p>弹出框</p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Axios</title>
      <link href="/2018/07/26/Axios/"/>
      <url>/2018/07/26/Axios/</url>
      
        <content type="html"><![CDATA[<h4 id="Axios-的好处"><a href="#Axios-的好处" class="headerlink" title="Axios 的好处"></a>Axios 的好处</h4><p>从浏览器中创建 XMLHttpRequests<br>从 node.js 创建 http 请求<br>支持 Promise API<br>拦截请求和响应<br>转换请求数据和响应数据<br>取消请求<br>自动转换 JSON 数据<br>客户端支持防御 XSRF</p><h4 id="axios-发送-post-请求"><a href="#axios-发送-post-请求" class="headerlink" title="axios 发送 post 请求"></a>axios 发送 post 请求</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">axios.get(<span class="hljs-string">'/user?ID=12345'</span>)<br>  .<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span> (response) &#123;<br>    console.log(response);<br>  &#125;)<br>  .catch(<span class="hljs-keyword">function</span> (error) &#123;<br>    console.log(error);<br>  &#125;);<br><br>// 可选地，上面的请求可以这样做<br>axios.get(<span class="hljs-string">'/user'</span>, &#123;<br>    params: &#123;<br>      ID: 12345<br>    &#125;<br>  &#125;)<br>  .<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span> (response) &#123;<br>    console.log(response);<br>  &#125;)<br>  .catch(<span class="hljs-keyword">function</span> (error) &#123;<br>    console.log(error);<br>  &#125;);<br></code></pre></td></tr></table></figure><h4 id="axios-发送-get-请求"><a href="#axios-发送-get-请求" class="headerlink" title="axios 发送 get 请求"></a>axios 发送 get 请求</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">axios.post(<span class="hljs-string">'/user'</span>, &#123;<br>    firstName: <span class="hljs-string">'Fred'</span>,<br>    lastName: <span class="hljs-string">'Flintstone'</span><br>  &#125;)<br>  .<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span> (response) &#123;<br>    console.log(response);<br>  &#125;)<br>  .catch(<span class="hljs-keyword">function</span> (error) &#123;<br>    console.log(error);<br>  &#125;);<br></code></pre></td></tr></table></figure><h4 id="vue-cli-引入-axios"><a href="#vue-cli-引入-axios" class="headerlink" title="vue-cli 引入 axios"></a>vue-cli 引入 axios</h4><ol><li>npm install axios</li><li>在 vue 的入口文件 main.js 里引入 axios 并使用</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">import axios from <span class="hljs-string">'axios'</span><br><br>Vue.prototype.<span class="hljs-variable">$axios</span> = axios<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-router与vuex</title>
      <link href="/2018/07/25/vue-router%E4%B8%8Evuex/"/>
      <url>/2018/07/25/vue-router%E4%B8%8Evuex/</url>
      
        <content type="html"><![CDATA[<h4 id="前端路由"><a href="#前端路由" class="headerlink" title="前端路由"></a>前端路由</h4><h5 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h5><p>路由,根据一个指定的路径,返回一个指定的页面.</p><h5 id="前端路由-1"><a href="#前端路由-1" class="headerlink" title="前端路由"></a>前端路由</h5><p>只由前端实现的路由称为前端路由.</p><h5 id="用jQuery实现前端路由"><a href="#用jQuery实现前端路由" class="headerlink" title="用jQuery实现前端路由"></a>用jQuery实现前端路由</h5><p>例子1:</p><ol><li>HTML上写上class.</li><li>监听点击事件,获取其index,改变index切换事件,并保存到location.hash;</li><li>新进入页面时,获取location.hash,切换class</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;ul class=<span class="hljs-string">"title"</span>&gt;<br>    &lt;li class=<span class="hljs-string">"active"</span>&gt;1&lt;/li&gt;<br>    &lt;li&gt;2&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;ol class=<span class="hljs-string">"context"</span>&gt;<br>    &lt;li class=<span class="hljs-string">"active"</span>&gt;第一项&lt;/li&gt;<br>    &lt;li&gt;第二项&lt;/li&gt;<br>&lt;/ol&gt;<br><br>//监听点击事件,获取其index,改变index切换事件,并保存到location.hash<br><br>$(<span class="hljs-string">'.title'</span>).on(<span class="hljs-string">'click'</span>,<span class="hljs-string">'li'</span>,(e)=&gt;&#123;<br>    <span class="hljs-built_in">let</span> <span class="hljs-variable">$li</span> = $(e.currentTarget);<br>    <span class="hljs-variable">$li</span>.addClass(<span class="hljs-string">'active'</span>).siblings().removeClass();<br>    <span class="hljs-built_in">let</span> index = <span class="hljs-variable">$li</span>.index();<br>    $(<span class="hljs-string">'.context &gt;li'</span>).eq(index).addClass(<span class="hljs-string">'active'</span>).siblings().removeClass();<br>    location.hash = index;<br>&#125;)<br>//新进入页面时,获取location.hash,切换class<br><span class="hljs-built_in">let</span> index = location.hash.substring(1) || <span class="hljs-string">'#0'</span><br>$(<span class="hljs-string">'.title &gt; li'</span>).eq(index).addClass(<span class="hljs-string">'active'</span>).siblings().removeClass();<br>$(<span class="hljs-string">'.context &gt; li'</span>).eq(index).addClass(<span class="hljs-string">'active'</span>).siblings().removeClass();<br></code></pre></td></tr></table></figure><p>可以改进成:</p><ol><li>HTML写上a标签与class.通过点击a的锚点改变url.</li><li>每次点击a标签改变hash,监听hash的改变切换tab.</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;ul class=<span class="hljs-string">"title"</span>&gt;<br>    &lt;li class=<span class="hljs-string">"active"</span>&gt;&lt;a href=<span class="hljs-string">"#0"</span>&gt;1&lt;/a&gt;&lt;/li&gt;<br>    &lt;li&gt;&lt;a href=<span class="hljs-string">"#1"</span>&gt;2&lt;/a&gt;&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;ol class=<span class="hljs-string">"context"</span>&gt;<br>    &lt;li class=<span class="hljs-string">"active"</span>&gt;第一项&lt;/li&gt;<br>    &lt;li&gt;第二项&lt;/li&gt;<br>&lt;/ol&gt;<br><br>selectedTab();//读取<span class="hljs-built_in">hash</span>,改变class<br><br>window.onhashchange = (e) =&gt; &#123;//每次点击a标签改变<span class="hljs-built_in">hash</span>,监听<span class="hljs-built_in">hash</span>的改变切换tab<br>    selectedTab();<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">selectedTab</span></span>() &#123;<br>    <span class="hljs-built_in">let</span> index = location.hash.substring(1) || <span class="hljs-string">'#0'</span><br>    $(<span class="hljs-string">'.title &gt; li'</span>).eq(index).addClass(<span class="hljs-string">'active'</span>).siblings().removeClass();<br>    $(<span class="hljs-string">'.context &gt; li'</span>).eq(index).addClass(<span class="hljs-string">'active'</span>).siblings().removeClass();<br>&#125;<br></code></pre></td></tr></table></figure><p>但是假如有其他锚点,会影响到index的获取.</p><p>使用history.pushState()实现路由.</p><ol><li>点击a标签(禁止默认事件跳转),获取其href,通过pushState改变pathname,读取pathname,改变hash.</li><li>读取pathname,改变class.</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;ul class=<span class="hljs-string">"title"</span>&gt;<br>    &lt;li class=<span class="hljs-string">"active"</span>&gt;&lt;a href=<span class="hljs-string">"/tab1"</span>&gt;1&lt;/a&gt;&lt;/li&gt;<br>    &lt;li&gt;&lt;a href=<span class="hljs-string">"/tab2"</span>&gt;2&lt;/a&gt;&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;ol class=<span class="hljs-string">"context"</span>&gt;<br>    &lt;li class=<span class="hljs-string">"active"</span>&gt;第一项&lt;/li&gt;<br>    &lt;li&gt;第二项&lt;/li&gt;<br>&lt;/ol&gt;<br><br>$(<span class="hljs-string">'.title &gt; li'</span>).on(<span class="hljs-string">'click'</span>,<span class="hljs-string">'a'</span>,(e)=&gt;&#123;//点击a标签(禁止默认事件跳转),获取其href,通过pushState改变pathname,读取pathname,改变<span class="hljs-built_in">hash</span><br>    e.preventDefault();<br>    <span class="hljs-built_in">let</span> a = e.currentTarget;<br>    <span class="hljs-built_in">let</span> path = a.getAttribute(<span class="hljs-string">'href'</span>);<br>    window.history.pushState(null,null,<span class="hljs-string">'/test3.html'</span> + path)<br>    selectedTab()<br>&#125;)<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">selectedTab</span></span>() &#123;//读取pathname,改变class<br>    <span class="hljs-built_in">let</span> path = location.pathname || <span class="hljs-string">'/test3.html/tab1'</span>;<br>    <span class="hljs-built_in">let</span> index = path.substring(path.length-1);<br>    $(<span class="hljs-string">'.title &gt; li'</span>).eq(index - 1).addClass(<span class="hljs-string">'active'</span>).siblings().removeClass();<br>    $(<span class="hljs-string">'.context &gt; li'</span>).eq(index - 1).addClass(<span class="hljs-string">'active'</span>).siblings().removeClass();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h4><p>简单例子:</p><ol><li>HTML中,使用router-link组件来导航,通过传入to属性指定链接,它默认会被渲染成a标签</li><li>路由匹配组件渲染放在router-view组件中</li><li>定义组件,也可以从其他文件中improt进来.</li><li>定义路由routes,通过路由映射组件.</li><li>创建router实例,传递routes.</li><li>在Vue实例中挂载router.</li></ol><p>该例子是hash模式(改变url锚点)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    // HTML中,使用router-link组件来导航,通过传入to属性指定链接,它默认会被渲染成a标签<br>    &lt;router-link to=<span class="hljs-string">"/tab1"</span>&gt;To tab1&lt;/router-link&gt;<br>    &lt;router-link to=<span class="hljs-string">"/tab2"</span>&gt;To tab2&lt;/router-link&gt;<br><br>    // 路由匹配组件渲染放在router-view组件中<br>    &lt;router-view&gt;&lt;/router-view&gt;<br>&lt;/div&gt;<br><br>&lt;script src=<span class="hljs-string">"https://unpkg.com/vue/dist/vue.js"</span>&gt;&lt;/script&gt;<br>&lt;script src=<span class="hljs-string">"https://unpkg.com/vue-router/dist/vue-router.js"</span>&gt;&lt;/script&gt;<br><br>&lt;script&gt;<br>    //定义组件,也可以从其他文件中improt进来.<br>    //因为没有improt,所以使用命名空间<br>    window.tab1 = &#123;<br>        template: `&lt;div&gt;&#123;&#123;msg&#125;&#125;&lt;/div&gt;`,<br>        <span class="hljs-function"><span class="hljs-title">data</span></span>()&#123;<br>            <span class="hljs-built_in">return</span> &#123;<br>                msg:<span class="hljs-string">'tab1'</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br>    window.tab2 = &#123;<br>        template: `&lt;div&gt;&#123;&#123;msg&#125;&#125;&lt;/div&gt;`,<br>        <span class="hljs-function"><span class="hljs-title">data</span></span>()&#123;<br>            <span class="hljs-built_in">return</span>&#123;<br>                msg:<span class="hljs-string">'tab2'</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br>    Vue.component(<span class="hljs-string">'tab1'</span>,window.tab1);<br>    Vue.component(<span class="hljs-string">'tab2'</span>,window.tab2);<br><br>    //创建router实例<br>    <span class="hljs-built_in">let</span> router = new VueRouter(&#123;<br>        routes: [<br>            &#123; path: <span class="hljs-string">'/tab1'</span>, component: tab1 &#125;,<br>            &#123; path: <span class="hljs-string">'/tab2'</span>, component: tab2 &#125;<br>        ]<br>    &#125;)<br><br>    //在Vue实例中挂载router.<br>    <span class="hljs-built_in">let</span> app = new Vue(&#123;<br>        el: <span class="hljs-string">'#app'</span>,<br>        router: router<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></p><h5 id="在vue-cli使用vue-router"><a href="#在vue-cli使用vue-router" class="headerlink" title="在vue-cli使用vue-router"></a>在vue-cli使用vue-router</h5><p>进入根目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save vue-router<br>``<br><br>在入口文件main.js里引用vue-router<br><br>``` bash<br>improt router form <span class="hljs-string">'vue-router'</span><br>improt 组件名 form <span class="hljs-string">'组件地址'</span><br>Vue.use(router)<br></code></pre></td></tr></table></figure><p>在入口文件main.js中的vue实例中注入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">var myrouter = new router(&#123;<br>    routes:[&#123;<br>        path:<span class="hljs-string">'/路径'</span>,//指定跳转路径<br>        component:组件名//指定要跳转的组件<br>    &#125;]<br>&#125;)<br><br>new Vue(&#123;<br>    el:<span class="hljs-string">'#app'</span>,<br>    component:&#123;App&#125;,<br>    template:<span class="hljs-string">'&lt;App/&gt;'</span><br>    router:myrouter<br>&#125;)<br><br>&lt;router-link to=<span class="hljs-string">"/路径"</span>&gt;&lt;/router-link&gt;<br></code></pre></td></tr></table></figure><h5 id="vue-router路由参数传递"><a href="#vue-router路由参数传递" class="headerlink" title="vue-router路由参数传递"></a>vue-router路由参数传递</h5><p>在路由内假如路由的name,在path后面加:/:+传递的参数<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">//<br>routes:[<br>    &#123;<br>        name:<span class="hljs-string">'路由名'</span><br>        path:<span class="hljs-string">'/路径/:参数名'</span>,<br>        component:组件名<br>    &#125;<br>]<br></code></pre></td></tr></table></figure></p><p>传递参数,在使用router-link的组件中使用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">//组件中<br><br>&lt;router-link :to=<span class="hljs-string">"&#123;name:'路由名',params:&#123;参数名:参数内容&#125;&#125;"</span>&gt;   <br>&lt;/router-link&gt;<br></code></pre></td></tr></table></figure></p><p>读取参数:$route.params.参数名<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">//路由到的组件中<br>&lt;p&gt;<span class="hljs-variable">$route</span>.params.参数名&lt;p&gt;<br></code></pre></td></tr></table></figure></p><h4 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h4><p>用来状态管理,共享数据,在各个组件之间管理的外部状态.</p><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install vuex<br></code></pre></td></tr></table></figure><h5 id="使用vuex"><a href="#使用vuex" class="headerlink" title="使用vuex"></a>使用vuex</h5><ol><li>引入vuex,通过use使用它.</li><li>创建Vuex.Store实例</li><li>组件都可以通过this.$store.state.key拿到数据</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">improt Vuex from <span class="hljs-string">'vuex'</span><br><br>Vue.use(Vuex)<br><br>var store = new Vuex.Store(&#123;<br>    state:&#123;<br>        key:value<br>    &#125;<br>&#125;)<br><br>new Vue(&#123;<br>    el:<span class="hljs-string">'#app'</span>,<br>    router,<br>    state,<br>    components:&#123;App&#125;<br>&#125;)<br><br>////某个组件中<br><br>this.<span class="hljs-variable">$store</span>.state.key 可以直接使用<br></code></pre></td></tr></table></figure><h5 id="组件中改变state-mutation"><a href="#组件中改变state-mutation" class="headerlink" title="组件中改变state-mutation"></a>组件中改变state-mutation</h5><p>mutation只能进行同步操作</p><ol><li>在vuex实例中定义mutations属性</li><li>muations里定义方法,并传入state</li><li>组件中使用this.$store.commit(‘方法’)去改变state</li><li>注意commit传入的是字符串</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">var store = new Vuex.Store(&#123;<br>    state:&#123;<br>        num:0<br>    &#125;,<br>    mutations:&#123;<br>        add(state)&#123;<br>            this.state.num += 1;<br>        &#125;<br>    &#125;<br>&#125;)<br><br>////子组件中<br>this.<span class="hljs-variable">$store</span>.commit(<span class="hljs-string">'add'</span>)<br>&lt;button @click=<span class="hljs-string">"<span class="hljs-variable">$store</span>.commit('add')"</span>&gt;add&lt;/button&gt;<br></code></pre></td></tr></table></figure><h5 id="组件中改变state-actions"><a href="#组件中改变state-actions" class="headerlink" title="组件中改变state-actions"></a>组件中改变state-actions</h5><p>actions可以进行异步操作(也可以同步)<br>它不能直接操作state,只能通过commit mutation中的方法.</p><ol><li>vuex实例中加入actions属性</li><li>acitons属性中定义方法,方法传入参数context表示上下文对象</li><li>通过context.commit(‘mutations中的方法’)</li><li>组件中通过$this.stote.dispatch(‘方法’)使用</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs bash">var store = new Vuex.store(&#123;<br>    state:&#123;<br>        num:0<br>    &#125;,<br>    mutations:&#123;<br>        add(state)&#123;<br>            state.num += 1;<br>        &#125;<br>    &#125;,<br>    actions:&#123;<br>        add(context)&#123; //同步<br>            context.commit(<span class="hljs-string">'add'</span>);<br>        &#125;,<br>        addAfter(context)&#123; //异步<br>            setTimeout(()=&gt;&#123;<br>                context.commit(<span class="hljs-string">'add'</span>);<br>            &#125;,1000)<br>        &#125;<br>    &#125;<br>&#125;)<br><br>///子组件中<br><br>this.<span class="hljs-variable">$store</span>.dispatch(<span class="hljs-string">'add'</span>)<br><br>&lt;button @click=<span class="hljs-string">"<span class="hljs-variable">$store</span>.dispatch('add')"</span>&gt;添加&lt;/button&gt;<br></code></pre></td></tr></table></figure><h5 id="vuex状态管理流程"><a href="#vuex状态管理流程" class="headerlink" title="vuex状态管理流程"></a>vuex状态管理流程</h5><p>view -&gt; actions -&gt; mutations -&gt; state -&gt; view<br>————————^<br>其中actions可以忽略</p><h5 id="getters选项-获取并计算state中的状态"><a href="#getters选项-获取并计算state中的状态" class="headerlink" title="getters选项,获取并计算state中的状态"></a>getters选项,获取并计算state中的状态</h5><p>一般组件都是用getters来获取状态的,而不是用state</p><ol><li>vuex实例中定义getters属性</li><li>getters属性定义方法,传入参数state</li><li>方法操作state</li><li>组件通过this.$store.getters.方法 获取数据</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">var store = new Vuex.Store(&#123;<br>    state:&#123;<br>        num:1<br>    &#125;,<br>    getters:&#123;<br>        getNum(state)&#123;<br>            <span class="hljs-built_in">return</span> state.num + <span class="hljs-string">'元'</span><br>        &#125;<br>    &#125;<br>&#125;)<br><br>//子组件中<br>this.<span class="hljs-variable">$store</span>.getters.getNum<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-cli手脚架</title>
      <link href="/2018/07/25/vue-cli%E6%89%8B%E8%84%9A%E6%9E%B6/"/>
      <url>/2018/07/25/vue-cli%E6%89%8B%E8%84%9A%E6%9E%B6/</url>
      
        <content type="html"><![CDATA[<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -g @vue/cli<br></code></pre></td></tr></table></figure><p>安装成后可运行次命令检测是否成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vue --version<br></code></pre></td></tr></table></figure><h4 id="安装vue-serve"><a href="#安装vue-serve" class="headerlink" title="安装vue serve"></a>安装vue serve</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">npm install -g @vue/cli-service-global<br></code></pre></td></tr></table></figure><h4 id="创建一个项目"><a href="#创建一个项目" class="headerlink" title="创建一个项目"></a>创建一个项目</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">winpty vue.cmd create 项目名称<br></code></pre></td></tr></table></figure><h4 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h4><h5 id="1-选择特性"><a href="#1-选择特性" class="headerlink" title="1.选择特性"></a>1.选择特性</h5><p>有两个路线选择如何加载插件,按Enter确定,上下移动,回车选择/取消.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">1. default 默认<br>2. Manually select features 手动选择<br></code></pre></td></tr></table></figure><h5 id="2-1-默认加载"><a href="#2-1-默认加载" class="headerlink" title="2.1 默认加载"></a>2.1 默认加载</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">```<br> <br><span class="hljs-comment">##### 2.2 手动加载</span><br><br><span class="hljs-comment">##### 2.2.1 选择加载插件</span><br>``` bash<br>1. Babel<br>2. TS<br>3. PWA Support<br>4. Router<br>5. Vuex<br>6. Css Pre-processors 支持CSS预处理器<br>7. Linter / Formatter 支持代码风格检查和格式化<br>8. Uint Testing 支持单元测试<br>9. E2E Testing 支持E2E测试<br></code></pre></td></tr></table></figure><h5 id="2-2-2-router设置"><a href="#2-2-2-router设置" class="headerlink" title="2.2.2 router设置"></a>2.2.2 router设置</h5><p>Use history mode for router?<br>是否使用history模式(需要后台支持)</p><h5 id="2-2-3-CSS预处理器选择"><a href="#2-2-3-CSS预处理器选择" class="headerlink" title="2.2.3 CSS预处理器选择"></a>2.2.3 CSS预处理器选择</h5><p>Sass/SCSS<br>Less<br>Stylus</p><h5 id="2-2-4-配置文件位置"><a href="#2-2-4-配置文件位置" class="headerlink" title="2.2.4 配置文件位置"></a>2.2.4 配置文件位置</h5><p>In dedicated config files 根目录<br>package.json</p><h5 id="2-2-5-未来是否使用该配置"><a href="#2-2-5-未来是否使用该配置" class="headerlink" title="2.2.5 未来是否使用该配置"></a>2.2.5 未来是否使用该配置</h5><h4 id="启动项目"><a href="#启动项目" class="headerlink" title="启动项目"></a>启动项目</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm run server<br></code></pre></td></tr></table></figure><h4 id="输出项目"><a href="#输出项目" class="headerlink" title="输出项目"></a>输出项目</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm run build<br></code></pre></td></tr></table></figure><h4 id="关于vue-config-js"><a href="#关于vue-config-js" class="headerlink" title="关于vue.config.js"></a>关于vue.config.js</h4><p>vue.config.js属于可选文件,需要自己手动去创建</p><h4 id="如何部署本地-github"><a href="#如何部署本地-github" class="headerlink" title="如何部署本地(github)"></a>如何部署本地(github)</h4><p>在根目录下创建vue.config.js</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">module.exports = &#123;<br>    publicPath: <span class="hljs-string">'./'</span><br>  &#125;<br></code></pre></td></tr></table></figure><h4 id="assets-和-static文件夹的区别"><a href="#assets-和-static文件夹的区别" class="headerlink" title="assets 和 static文件夹的区别"></a>assets 和 static文件夹的区别</h4><p>assets目录中的文件会被webpack处理解析为模块依赖,只支持相对路径形式</p><p>static/ 目录下的文件并不会被Webpack处理:它们会直接被复制到最终的打包目录(默认是dist/static)下.必须使用绝对路径引用这些文件,这是通过在 config.js 文件中的 build.assetsPublicPath 和 build.assetsSubDirectory 连接来确定的<br>任何放在 static/ 中文件需要以绝对路径的形式引用: /static/[filename]</p><p>总的来说：static放不会变动的文件 assets放可能会变动的文件</p><h4 id="–save-dev和-save的区别"><a href="#–save-dev和-save的区别" class="headerlink" title="–save-dev和-save的区别"></a>–save-dev和-save的区别</h4><p>即-d和-s的区别</p><p>–save-dev安装依赖的时候会在package.json的devDependencies对象下面</p><p>–save安装依赖的时候会在dependencies对象下面</p><p>总结:–save是发布后依赖的东西,–save-dev是开发依赖的东西.</p>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>render函数</title>
      <link href="/2018/07/25/render%E5%87%BD%E6%95%B0/"/>
      <url>/2018/07/25/render%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h4 id="初步了解"><a href="#初步了解" class="headerlink" title="初步了解"></a>初步了解</h4><p>定义一个组件,使用template<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;comp-child :level=<span class="hljs-string">"level"</span>&gt;<br>        我是组件<br>    &lt;/comp-child&gt;<br>&lt;/div&gt;<br><br>&lt;script&gt;<br>    Vue.component(<span class="hljs-string">'comp-child'</span>,&#123;<br>        props:[<span class="hljs-string">'level'</span>],<br>        template:`<br>        &lt;div&gt;<br>            &lt;h1 v-if=<span class="hljs-string">"level===1"</span>&gt;<br>                &lt;slot&gt;&lt;/slot&gt;<br>            &lt;/h1&gt;<br>            &lt;h2 v-if=<span class="hljs-string">"level===2"</span>&gt;<br>                &lt;slot&gt;&lt;/slot&gt;<br>            &lt;/h2&gt;<br>            &lt;h3 v-if=<span class="hljs-string">"level===3"</span>&gt;<br>                &lt;slot&gt;&lt;/slot&gt;<br>            &lt;/h3&gt;<br>        &lt;/div&gt;<br>        `<br>    &#125;)<br>    var app = new Vue(&#123;<br>        el:<span class="hljs-string">'#app'</span>,<br>        data:&#123;<br>            level:1<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></p><p>再定义一个组件,使用render函数,其效果和上面例子一样</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">Vue.component(<span class="hljs-string">'comp-child'</span>,&#123;<br>    props:[<span class="hljs-string">'level'</span>],<br>    render:<span class="hljs-keyword">function</span>(createElement)&#123;<br>        <span class="hljs-built_in">return</span> createElement(<span class="hljs-string">'h'</span>+this.level,this.<span class="hljs-variable">$slots</span>.default);<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="render函数的第一个参数-必须"><a href="#render函数的第一个参数-必须" class="headerlink" title="render函数的第一个参数(必须)"></a>render函数的第一个参数(必须)</h4><p>在render函数的方法中,参数必须是createElement,它是类型是function.</p><p>render函数的第一个参数可以是:</p><ol><li><p>String<br> html标签</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">Vue.component(<span class="hljs-string">'child'</span>,&#123;<br>    render:<span class="hljs-keyword">function</span>(createElement)&#123;<br>        <span class="hljs-built_in">return</span> createElement(<span class="hljs-string">'div'</span>)<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>Object<br> 一个含有数据选项的对象</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">Vue.component(<span class="hljs-string">'child'</span>,&#123;<br>    render:<span class="hljs-keyword">function</span>(createElement)&#123;<br>        <span class="hljs-built_in">return</span> createElement(&#123;<br>            template:<span class="hljs-string">'&lt;div&gt;&lt;/div&gt;'</span><br>        &#125;)<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>Function<br> 方法返回含有数据选项的对象</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">Vue.component(<span class="hljs-string">'child'</span>,&#123;<br>    render:<span class="hljs-keyword">function</span>(createElement)&#123;<br>        var domFn = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            <span class="hljs-built_in">return</span> &#123;<br>                template:<span class="hljs-string">'&lt;div&gt;&lt;/div&gt;'</span><br>            &#125;<br>        &#125;<br>        <span class="hljs-built_in">return</span> createElement(domFn());<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure></li></ol><h4 id="render函数的第二个参数"><a href="#render函数的第二个参数" class="headerlink" title="render函数的第二个参数"></a>render函数的第二个参数</h4><p>第二个参数是可选,第二个参数是数据对象(只能是Object)</p><ol><li>class</li><li>style</li><li>attrs:正常的html属性</li><li>domProps:原生的DOM属性<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">Vue.component(<span class="hljs-string">'child-4'</span>, &#123;<br>    render: <span class="hljs-keyword">function</span> (createElement) &#123;<br>        <span class="hljs-built_in">return</span> createElement(<span class="hljs-string">'div'</span>,&#123;<br>            class:&#123;<br>                active:<span class="hljs-literal">true</span>,<br>                danger:<span class="hljs-literal">false</span><br>            &#125;,<br>            style:&#123;<br>                color:<span class="hljs-string">'red'</span>,<br>                fontSize:<span class="hljs-string">'16px'</span><br>            &#125;,<br>            attrs:&#123;<br>                id:<span class="hljs-string">'foo'</span>,<br>                src:<span class="hljs-string">'http://baidu.com'</span><br>            &#125;,<br>            domProps:&#123;<br>                innerText:<span class="hljs-string">'Hello World!'</span><br>            &#125;<br>        &#125;)<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure></li></ol><h4 id="render函数的第三个参数"><a href="#render函数的第三个参数" class="headerlink" title="render函数的第三个参数"></a>render函数的第三个参数</h4><p>第三个参数是可选的</p><ol><li>String:创建文本子节点</li><li>Array:创建元素子节点(VNODE)</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">Vue.component(<span class="hljs-string">'child-5'</span>, &#123;<br>    render: <span class="hljs-keyword">function</span> (createElement) &#123;<br>        <span class="hljs-built_in">return</span> createElement(<span class="hljs-string">'div'</span>,[ //:array创建元素节点<br>            createElement(<span class="hljs-string">'span'</span>,<span class="hljs-string">'Hello world!'</span>) //string:创建文本节点<br>        ])<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="this-slots-插槽-在render函数中的应用"><a href="#this-slots-插槽-在render函数中的应用" class="headerlink" title="this.$slots(插槽)在render函数中的应用"></a>this.$slots(插槽)在render函数中的应用</h4><p>第三个参数的数组存的是VNODE</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;child&gt;<br>    &lt;h3 slot=<span class="hljs-string">"header"</span>&gt;标题&lt;/h3&gt;<br>    &lt;p&gt;第一段&lt;/p&gt;<br>    &lt;p&gt;第二段&lt;/p&gt;<br>    &lt;h5 slot=<span class="hljs-string">"footer"</span>&gt;结尾&lt;/h5&gt;<br>&lt;/child&gt;<br><br>Vue.component(<span class="hljs-string">'child'</span>, &#123;<br>    render: <span class="hljs-keyword">function</span> (createElement) &#123;<br>        var header = this.<span class="hljs-variable">$slots</span>.header; //返回的内容就是含有VNODE的数组<br>        var main = this.<span class="hljs-variable">$slots</span>.default;<br>        var footer = this.<span class="hljs-variable">$slots</span>.footer;<br>        <span class="hljs-built_in">return</span> createElement(<span class="hljs-string">'div'</span>,[<br>            createElement(<span class="hljs-string">'header'</span>,header),//返回的内容就是VNODE<br>            createElement(<span class="hljs-string">'main'</span>,main),<br>            createElement(<span class="hljs-string">'footer'</span>,footer)<br>        ])<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="在rander函数中使用props传递数据"><a href="#在rander函数中使用props传递数据" class="headerlink" title="在rander函数中使用props传递数据"></a>在rander函数中使用props传递数据</h4><p>在render函数中,props传递过来的数据,可以用this.绑定的数据直接在render函数中使用.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;child :color=<span class="hljs-string">"colorchange"</span>&gt;&lt;/child&gt;<br>    &lt;button @click=<span class="hljs-string">"clickMe"</span>&gt;换色&lt;/button&gt;<br>&lt;/div&gt;<br><br>&lt;script&gt;<br>    Vue.component(<span class="hljs-string">'child'</span>, &#123;<br>        props:[<span class="hljs-string">'color'</span>],<br>        render: <span class="hljs-keyword">function</span> (createElement) &#123;<br>            var color<br>            <span class="hljs-keyword">if</span>(this.color)&#123;<br>                color = <span class="hljs-string">'red'</span><br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                color = <span class="hljs-string">'blue'</span><br>            &#125;<br>            <span class="hljs-built_in">return</span> createElement(<span class="hljs-string">'div'</span>,&#123;<br>                style:&#123;<br>                    color:color<br>                &#125;<br>            &#125;,<span class="hljs-string">'hello world!'</span>)<br>        &#125;<br>    &#125;)<br><br>    var app6 = new Vue(&#123;<br>        el: <span class="hljs-string">'#app'</span>,<br>        data: &#123;<br>            colorchange:<span class="hljs-literal">false</span><br>        &#125;,<br>        methods:&#123;<br>            clickMe:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                this.colorchange = !this.colorchange<br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="v-model在render函数中的使用"><a href="#v-model在render函数中的使用" class="headerlink" title="v-model在render函数中的使用"></a>v-model在render函数中的使用</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;comp v-model=<span class="hljs-string">"name"</span>&gt;&lt;/comp&gt;<br>    &#123;&#123;name&#125;&#125;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    Vue.component(<span class="hljs-string">'comp'</span>,&#123;<br>        render:<span class="hljs-keyword">function</span>(createElement)&#123;<br>            var _this = this;<br>            <span class="hljs-built_in">return</span> createElement(<span class="hljs-string">'input'</span>,&#123;<br>                domProps:&#123;<br>                    value:_this.name<br>                &#125;,<br>                on:&#123;<br>                    input:<span class="hljs-keyword">function</span>(e)&#123;<br>                        _this.<span class="hljs-variable">$emit</span>(<span class="hljs-string">'input'</span>,e.target.value)<br>                    &#125;<br>                &#125;<br>            &#125;)<br>        &#125;<br>    &#125;)<br><br>    var app = new Vue(&#123;<br>        el:<span class="hljs-string">'#app'</span>,<br>        data:&#123;<br>            name:<span class="hljs-string">''</span><br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="作用域插槽在render函数中的使用"><a href="#作用域插槽在render函数中的使用" class="headerlink" title="作用域插槽在render函数中的使用"></a>作用域插槽在render函数中的使用</h4><h4 id="函数化组件的应用"><a href="#函数化组件的应用" class="headerlink" title="函数化组件的应用"></a>函数化组件的应用</h4>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定义指令</title>
      <link href="/2018/07/25/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/"/>
      <url>/2018/07/25/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h4 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h4><p>跟组件类似分全局注册和局部注册,区别就是把component换成derective</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">Vue.derective(<span class="hljs-string">'nanme'</span>,&#123;<br>    钩子函数:<span class="hljs-keyword">function</span>(el,binding)&#123;<br><br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="钩子函数"><a href="#钩子函数" class="headerlink" title="钩子函数"></a>钩子函数</h4><p>指令定义提供了几个钩子函数(可选)</p><p>bind:只调用一次,指令第一次绑定到元素时调用,用这个钩子函数可以定义一个在绑定时执行一次的初始化动作.</p><p>inserted:被绑定元素插入父接点时调用(父节点存在即可调用,不必存在于document中).</p><p>update:被绑定元素所在的模板更新时调用,而不论绑定值是否变化.通过比较更新后的绑定值,可以忽略不必要的模板更新.</p><p>componentUpdated:被绑定元素所在模板完成一次更新周期时调用.</p><p>unbind:只调用一次,指令与元素解绑时调用.</p><h4 id="钩子函数的参数"><a href="#钩子函数的参数" class="headerlink" title="钩子函数的参数"></a>钩子函数的参数</h4><p>el:指令所绑定的元素,可以直接用来操作DOM.</p><p>binding:一个对象.包含以下属性:</p><ol><li>name:指令名,不包括v-前缀.</li><li>value:指令的绑定值,例如v-mydirective=”1 + 1”,value=”2”.</li><li>oldValue:指令绑定的前一个值,仅在update和componentUpdated钩子中可用.无论值是否改变都可用.</li><li>expression:绑定值的字符串形式.如上例:expression=”1+1”.</li><li>arg:传给指令的参数. 如:v-my-directive:foo,arg=”foo”.</li><li>modifiers:一个包含修饰符的对象.例如v-my-directive.a.b modifiers的值是{a:true,b:true}</li><li>vnode:Vue编译生成的虚拟节点.</li><li>oldVnode:上一个虚拟节点,仅在update和componentUpdated钩子中可用.</li></ol><p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;p v-test:goudan.a.b.c=<span class="hljs-string">"obq"</span>&gt;&lt;/p&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    Vue.directive(<span class="hljs-string">'test'</span>,&#123;<br>        <span class="hljs-built_in">bind</span>:<span class="hljs-keyword">function</span>(el,binding)&#123;<br>            el.innerHTML = <span class="hljs-string">'v-test:goudan.a.b.c="obq"'</span> + <span class="hljs-string">'&lt;br/&gt;'</span> + <br>                            <span class="hljs-string">'name'</span> + <span class="hljs-string">':'</span> + binding.name + <span class="hljs-string">'&lt;br&gt;'</span> +  //<span class="hljs-built_in">test</span><br>                            <span class="hljs-string">'value'</span> + <span class="hljs-string">':'</span> + binding.value + <span class="hljs-string">'&lt;br&gt;'</span> + //我是value<br>                            <span class="hljs-string">'argument'</span> + <span class="hljs-string">':'</span> + binding.arg + <span class="hljs-string">'&lt;br&gt;'</span> + //goudan<br>                            <span class="hljs-string">'modifiers'</span> + <span class="hljs-string">':'</span> + JSON.stringify(binding.modifiers)  + <span class="hljs-string">'&lt;br&gt;'</span> //&#123;a:<span class="hljs-literal">true</span>,b:<span class="hljs-literal">true</span>,c:<span class="hljs-literal">true</span>&#125;<br>        &#125;<br>    &#125;)<br>    var app = new Vue(&#123;<br>        el:<span class="hljs-string">'#app'</span>,<br>        data:&#123;<br>            obq:<span class="hljs-string">'我是value'</span><br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>v-model的使用</title>
      <link href="/2018/07/25/v-model%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2018/07/25/v-model%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h4 id="v-model"><a href="#v-model" class="headerlink" title="v-model:"></a>v-model:</h4><p>vue提供了v-model指令,用于在表单类元素上双向绑定.</p><h4 id="input和textarea"><a href="#input和textarea" class="headerlink" title="input和textarea"></a>input和textarea</h4><p>可以用于input框以及textarea等.</p><p>注意:所显示的值只依赖于所绑定的数据,不再关系初始化时插入的value.</p><h4 id="单选按钮"><a href="#单选按钮" class="headerlink" title="单选按钮"></a>单选按钮</h4><ol><li>单个单选按钮,直接用v-bind绑定一个布尔值,用v-model是不可以的.</li><li>如果组合使用,就需要v-model来配合value使用,绑定所选中你的单选框的value值,此处所绑定初始值可以随意给</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app5"</span>&gt;<br>    &lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"radio"</span> id=<span class="hljs-string">"one"</span> value=<span class="hljs-string">"One"</span> v-model=<span class="hljs-string">"picked"</span>&gt;<br>    &lt;label <span class="hljs-keyword">for</span>=<span class="hljs-string">"one"</span>&gt;One&lt;/label&gt;<br>    &lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"radio"</span> id=<span class="hljs-string">"two"</span> value=<span class="hljs-string">"Two"</span> v-model=<span class="hljs-string">"picked"</span>&gt;<br>    &lt;label <span class="hljs-keyword">for</span>=<span class="hljs-string">"two"</span>&gt;Two&lt;/label&gt;<br>    &lt;br&gt;<br>    &lt;span&gt;&#123;&#123;picked&#125;&#125;&lt;/span&gt;        <br>&lt;/div&gt;<br>&lt;script&gt;<br>    var app5 = new Vue(&#123;<br>        el:<span class="hljs-string">'#app5'</span>,<br>        data:&#123;<br>            picked:<span class="hljs-string">''</span><br>        &#125;<br>    &#125;)<br>    &lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="复选框"><a href="#复选框" class="headerlink" title="复选框"></a>复选框</h4><ol><li>单个复选框,直接用一个布尔值,可以用v-model,也可以用v-bind.</li><li>多个复选框,如果是组合使用,就需要v-model来配合value使用,v-model绑定一个数组,如果绑定是字符串,则会转化为true.与所有绑定的复选框的checked属性相对应.</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app3"</span>&gt;<br>    &lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"checkbox"</span> name=<span class="hljs-string">""</span> id=<span class="hljs-string">"checkbox"</span> v-model=<span class="hljs-string">"checked"</span>&gt;<br>    &lt;label <span class="hljs-keyword">for</span>=<span class="hljs-string">"checkbox"</span>&gt;&#123;&#123;checked&#125;&#125;&lt;/label&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    var app3 = new Vue(&#123;<br>        el:<span class="hljs-string">'#app3'</span>,<br>        data:&#123;<br>            checked:<span class="hljs-literal">false</span><br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br><br>&lt;div id=<span class="hljs-string">"app4"</span>&gt;<br>    &lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"checkbox"</span>  id=<span class="hljs-string">"jack"</span> value=<span class="hljs-string">"Jack"</span> v-model=<span class="hljs-string">"checkedNames"</span>&gt;<br>    &lt;label <span class="hljs-keyword">for</span>=<span class="hljs-string">"jack"</span>&gt;Jack&lt;/label&gt;<br>    &lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"checkbox"</span>  id=<span class="hljs-string">"john"</span> value=<span class="hljs-string">"John"</span> v-model=<span class="hljs-string">"checkedNames"</span>&gt;<br>    &lt;label <span class="hljs-keyword">for</span>=<span class="hljs-string">"john"</span>&gt;John&lt;/label&gt;<br>    &lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"checkbox"</span>  id=<span class="hljs-string">"mike"</span> value=<span class="hljs-string">"Mike"</span> v-model=<span class="hljs-string">"checkedNames"</span>&gt;<br>    &lt;label <span class="hljs-keyword">for</span>=<span class="hljs-string">"mike"</span>&gt;Mike&lt;/label&gt;<br>    &lt;br&gt;<br>    &lt;span&gt;&#123;&#123;checkedNames&#125;&#125;&lt;/span&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    var app4 = new Vue(&#123;<br>        el:<span class="hljs-string">'#app4'</span>,<br>        data:&#123;<br>            checkedNames:[]<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="下拉框"><a href="#下拉框" class="headerlink" title="下拉框"></a>下拉框</h4><ol><li>如果是单选,所绑定的value值初始化可以为数组,也可以为字符串,有value直接有限匹配一个value值,没有value就匹配一个text值.</li><li>如果是多选,就需要v-model来配合value使用,v-model绑定一个数组,与复选框类似.</li><li>v-model一定是绑定在select标签上.</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app6"</span>&gt;<br>    &lt;select v-model=<span class="hljs-string">"selected"</span>&gt;<br>        &lt;option disabled value=<span class="hljs-string">""</span>&gt;请选择&lt;/option&gt;<br>        &lt;option&gt;A&lt;/option&gt;<br>        &lt;option&gt;B&lt;/option&gt;<br>        &lt;option&gt;C&lt;/option&gt;<br>    &lt;/select&gt;<br>    &lt;span&gt;&#123;&#123;selected&#125;&#125;&lt;/span&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    var app6 = new Vue(&#123;<br>        el:<span class="hljs-string">'#app6'</span>,<br>        data:&#123;<br>            selected:<span class="hljs-string">''</span><br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="绑定值"><a href="#绑定值" class="headerlink" title="绑定值"></a>绑定值</h4><ol><li>单选按钮,只需要v-bind给单选框绑定一个value值,此时,v-model绑定的就是他的value值.</li><li>复选框</li><li>下拉框,在select标签上绑定value值对option并没有影响.</li></ol><h4 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h4><ol><li>lazy v-model默认是在input输入时实时同步输入框的数据,而lazy修饰符,可以使其爱失去焦点或敲回车后更新.</li><li>number 将输入的字符串转化为number类型.</li><li>trim 自动过滤输入过程中首尾的空格.</li></ol>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue的内置指令</title>
      <link href="/2018/07/25/vue%E7%9A%84%E5%86%85%E7%BD%AE%E6%8C%87%E4%BB%A4/"/>
      <url>/2018/07/25/vue%E7%9A%84%E5%86%85%E7%BD%AE%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h4 id="v-cloak"><a href="#v-cloak" class="headerlink" title="v-cloak"></a>v-cloak</h4><p>与dispaly:none进行结合使用.</p><p>作用:解决初始化慢导致页面闪动.</p><p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;style&gt;<br>    *[v-cloak]&#123;<br>        display:none;<br>    &#125;<br>&lt;style&gt;<br>&lt;comp<span class="hljs-_">-a</span> v-show=<span class="hljs-string">"isShow"</span> v-cloak&gt;&lt;/comp<span class="hljs-_">-a</span>&gt;<br><br>data&#123;<br>    isShow:<span class="hljs-literal">false</span><br>&#125;<br></code></pre></td></tr></table></figure></p><h4 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a>v-once</h4><p>定义它的元素和组件只渲染一次</p><h4 id="v-if-v-else-if-v-esle"><a href="#v-if-v-else-if-v-esle" class="headerlink" title="v-if,v-else-if,v-esle"></a>v-if,v-else-if,v-esle</h4><p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app3"</span>&gt;<br>    &lt;div v-if=<span class="hljs-string">"type === 'A'"</span>&gt;A&lt;/div&gt;<br>    &lt;div v-else-if=<span class="hljs-string">"type === 'B'"</span>&gt;B&lt;/div&gt;<br>    &lt;div v-else-if=<span class="hljs-string">"type === 'C'"</span>&gt;C&lt;/div&gt;<br>    &lt;div v-else&gt;Not A/B/C&lt;/div&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    var app3 = new Vue(&#123;<br>        el:<span class="hljs-string">'#app3'</span>,<br>        data:&#123;<br>            <span class="hljs-built_in">type</span>:<span class="hljs-string">'A'</span><br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></p><p>弊端:Vue在渲染元素时,出于效率考虑,会尽可能地复用已有的元素而非重新渲染,因此会出现乌龙,只会渲染变化的云阿苏,也就是说input元素被复用了.<br>解决方法:加key,唯一,提供key值可以来决定是否复用该元素.</p><h4 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h4><p>只改变了css属性display</p><p>v-if:实时渲染,显示就渲染,不显示就销毁.<br>v-show:元素永远存在于页面中,只是改变了css的display的属性.</p><h4 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h4><p>遍历数组,每个项渲染到列表之中.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;ul id=<span class="hljs-string">"example2"</span>&gt;<br>    &lt;li v-for=<span class="hljs-string">"(item,index) in items"</span>&gt;<br>        &#123;&#123;parentMessage&#125;&#125; - &#123;&#123;index&#125;&#125; - &#123;&#123;item.message&#125;&#125;<br>    &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;script&gt;<br>    var example2 = new Vue(&#123;<br>        el:<span class="hljs-string">'#example2'</span>,<br>        data:&#123;<br>            parentMessage:<span class="hljs-string">'Parent'</span>,<br>            items:[<br>                &#123;message:<span class="hljs-string">'Foo'</span>&#125;,<br>                &#123;message:<span class="hljs-string">'Bar'</span>&#125;<br>            ]<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br><br>&lt;ul id=<span class="hljs-string">"example3"</span>&gt;<br>    &lt;li v-for=<span class="hljs-string">"(value,key,index) in object"</span>&gt;<br>      &#123;&#123;index&#125;&#125;. &#123;&#123;key&#125;&#125; : &#123;&#123;value&#125;&#125;<br>    &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;script&gt;<br>    var example3 = new Vue(&#123;<br>        el:<span class="hljs-string">'#example3'</span>,<br>        data:&#123;<br>            object:&#123;<br>                firstName:<span class="hljs-string">'John'</span>,<br>                lastName:<span class="hljs-string">'Doe'</span>,<br>                age:30<br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></p><h5 id="数组更新-过滤排序"><a href="#数组更新-过滤排序" class="headerlink" title="数组更新,过滤排序"></a>数组更新,过滤排序</h5><p>改变数组的方法:</p><ol><li><p>push()在末尾添加元素</p></li><li><p>pop()移除数组最后一个元素</p></li><li><p>shift()删除数组的第一个元素</p></li><li><p>unshift()在第一个元素之前添加一个元素</p></li><li><p>splice()添加或删除函数,返回删除的元素<br> 第一个参数:开始操作的位置.<br> 第二个参数:操作的长度.<br> 第三个可选参数:排序:sort(),reverse()</p></li></ol><h5 id="两个数组变动vue检测不到"><a href="#两个数组变动vue检测不到" class="headerlink" title="两个数组变动vue检测不到:"></a>两个数组变动vue检测不到:</h5><ol><li>改变数组的指定项</li><li>改变数组长度<br> 过滤:filter</li></ol><p>解决方法:</p><ol><li><p>set(改变指定项)<br> Vue.set(app.arr,1,”car”);</p></li><li><p>splice(改变长度)<br> app.arr.splice(1)</p></li></ol><h4 id="方法和事件"><a href="#方法和事件" class="headerlink" title="方法和事件"></a>方法和事件</h4><p>v-on</p><p>methods</p><h5 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h5><p>在vue中传入event对象用$event,方式是冒泡.</p><p>stop:阻止单击事件向上冒泡.<br>prevent:提交事件并且不重载页面.<br>self:只作用在元素本身而非子元素的时候调用.<br>once:只执行一次方法.</p><p>可以监听键盘事件:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;input @keyup.13=<span class="hljs-string">"fn"</span>&gt;----指定的keyCode<br></code></pre></td></tr></table></figure></p><p>可以用.enter .tab .delete等</p>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>v-bind以及class与style的绑定</title>
      <link href="/2018/07/25/v-bind%E4%BB%A5%E5%8F%8Aclass%E4%B8%8Estyle%E7%9A%84%E7%BB%91%E5%AE%9A/"/>
      <url>/2018/07/25/v-bind%E4%BB%A5%E5%8F%8Aclass%E4%B8%8Estyle%E7%9A%84%E7%BB%91%E5%AE%9A/</url>
      
        <content type="html"><![CDATA[<h4 id="了解bind指令"><a href="#了解bind指令" class="headerlink" title="了解bind指令"></a>了解bind指令</h4><p>作用:绑定vue实例里的data或者computed属性</p><ol><li>变量语法</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">:title=<span class="hljs-string">"message"</span><br><br>data:&#123;<br>    message:<span class="hljs-string">'abc'</span><br>&#125;<br><br>title=<span class="hljs-string">"abc"</span><br></code></pre></td></tr></table></figure><ol start="2"><li>对象语法</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">:title=<span class="hljs-string">"msgObj"</span><br><br>data:&#123;<br>    msgOjb:&#123;<br>        msg1:<span class="hljs-literal">true</span>,<br>        msg2:<span class="hljs-literal">false</span><br>    &#125;<br>&#125;<br><br>title=<span class="hljs-string">"msg1"</span><br></code></pre></td></tr></table></figure><ol start="3"><li>数组语法<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">:title=[msg1,msg2]<br><br>data:&#123;<br>    msg1:1,<br>    msg2:2<br>&#125;<br><br>title=<span class="hljs-string">"msg1=1 msg2=2"</span><br></code></pre></td></tr></table></figure></li></ol><h4 id="绑定class的几种方式"><a href="#绑定class的几种方式" class="headerlink" title="绑定class的几种方式"></a>绑定class的几种方式</h4><h5 id="对象语法"><a href="#对象语法" class="headerlink" title="对象语法"></a>对象语法</h5><ol><li><p>用表达式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">:class=<span class="hljs-string">"&#123;'active':isActive,'danger':isDanger&#125;"</span><br><br>data:&#123;<br>    isActive:<span class="hljs-literal">true</span>,<br>    isDanger:<span class="hljs-literal">false</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><ol><li><p>对象变量名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">:class=<span class="hljs-string">"classObject"</span><br><br>data:&#123;<br>    classObject:&#123;<br>        active:<span class="hljs-literal">true</span>,<br>        danger:<span class="hljs-literal">false</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>对象变量名+计算属性</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">:class=<span class="hljs-string">"classObject"</span><br><br>data:&#123;<br>    isActive:<span class="hljs-literal">true</span>,<br>    error:null<br>&#125;,<br>computed:&#123;<br>    classObject:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        <span class="hljs-built_in">return</span> &#123;<br>            active:this.active &amp;&amp; !this.error,<br>            danger:this.error &amp;&amp; this.error.type === <span class="hljs-string">'fatal'</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol></li></ol><h5 id="数组语法"><a href="#数组语法" class="headerlink" title="数组语法"></a>数组语法</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">:class=<span class="hljs-string">"[activeClass,errorClass]"</span><br><br>data:&#123;<br>    activeClass:<span class="hljs-string">'active'</span>,<br>    errorClass:<span class="hljs-string">'text-danger'</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="绑定style的几种方式"><a href="#绑定style的几种方式" class="headerlink" title="绑定style的几种方式"></a>绑定style的几种方式</h4><ol><li>表达式</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">:style=<span class="hljs-string">"&#123;color:activeColor,fontSize:fontSize + 'px'&#125;"</span><br><br>data:&#123;<br>    activeColor:<span class="hljs-string">'red'</span>,<br>    fontSize:30<br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li>对象变量名</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">:style=<span class="hljs-string">"styleObject"</span><br><br>data:&#123;<br>    styleObject:&#123;<br>        color:red,<br>        fontSize:30px<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>数组</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">:style=<span class="hljs-string">"[styleObject1,styleObject2]"</span><br><br>data:&#123;<br>    styleObject1:&#123;<br>        color:<span class="hljs-string">'red'</span>,<br>        background:<span class="hljs-string">'blue'</span><br>    &#125;<br>    styleObject2:&#123;<br>        fontSize:<span class="hljs-string">'30px'</span>,<br>        fontWeight:<span class="hljs-string">'bold'</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS的类与继承</title>
      <link href="/2018/07/25/JS%E7%9A%84%E7%B1%BB%E4%B8%8E%E7%BB%A7%E6%89%BF/"/>
      <url>/2018/07/25/JS%E7%9A%84%E7%B1%BB%E4%B8%8E%E7%BB%A7%E6%89%BF/</url>
      
        <content type="html"><![CDATA[<h4 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h4><p>继承的作用是:子类可以具有父类的属性和方法</p><p>JS没有继承,只有原型链引用</p><p>一个对象的<strong>proto</strong>指向构造他的函数的protype</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">obj._proto_ = Object.prototype<br></code></pre></td></tr></table></figure><p>如:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">var a = new Array();<br>a.push() //实例属性<br>a.valueOf() //继承Object<br></code></pre></td></tr></table></figure></p><p>push是Array.protoype的属性;<br>valueOf是继承子Ojbect.prototype的;<br>因为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">Array.protoype.__proto__ = Object.protoype<br></code></pre></td></tr></table></figure></p><p>隔了两层的才是继承,对于a;push是自身有的,valueOf才是继承的.</p><h4 id="类"><a href="#类" class="headerlink" title="类"></a>类</h4><p>能产生对象的东西即为类</p><p>自己写一个继承类</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> Human(name)&#123;<br>    this.name = name;<br>&#125;<br>Human.prototype.run = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    console.log(<span class="hljs-string">'跑跑跑'</span>);<br>    <span class="hljs-built_in">return</span> undefined;<br>&#125;<br><br><span class="hljs-keyword">function</span> Man(name)&#123;<br>    Human.call(this,name); //使子类有父类的属性,假如不写this,那么this就是window<br>    this.gender = <span class="hljs-string">'男'</span>;<br>&#125;<br><br>Man.prototype.__proto__ = Human.prototype //插入父类原型链,但是IE不支持<br><br>Man.prototype.fight = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    console.log(<span class="hljs-string">'打击'</span>);<br>    <span class="hljs-built_in">return</span> undefined;<br>&#125; <br><br>var f = new Man(<span class="hljs-string">'某个男人'</span>); //假如不写new,那么this就是window,因为new的时候this会绑定到这个对象名为Man的对象上<br><br>输出:<br>f.name  //<span class="hljs-string">'某个男人'</span><br>f.gender //<span class="hljs-string">'男'</span><br>f.fight()  //<span class="hljs-string">'打击'</span><br>f.run() //<span class="hljs-string">'跑'</span><br><br>f.__proto__ === Man.prototype;//<span class="hljs-literal">true</span><br>f.__proto__.proto__ === Human.prototype;//<span class="hljs-literal">true</span><br>Man.prototype.__proto__ === Human.prototype;//<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h5 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h5><p>prototype,存放共有属性对象的地址</p><h5 id="ES5和ES6的写法"><a href="#ES5和ES6的写法" class="headerlink" title="ES5和ES6的写法"></a>ES5和ES6的写法</h5><p>ES5:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">var f = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;&#125;<br>f.protype = Human.protype<br>Man.protype = new f()<br></code></pre></td></tr></table></figure></p><p>为什么?</p><p>当var obj = new Fn()时,会做以下几件事</p><ol><li>产生一个空对象</li><li>this = 该空对象</li><li>this.<strong>proto</strong> = Fn.protype</li><li>执行Fn.call(this,x,y..)</li><li>return this</li></ol><p>Man.prtotype = New Human();会执行this.name,使得有多余属性<br>因为第4步不想要,所以构造一个空函数,只要他的protype</p><p>空函数.protype = Human.prototype;<br>Man.protype = new f() // 1,2,3,5步<br>f.protype === Human.prototype //true<br>Man.protype.<strong>proto</strong> === f.prototype //true </p><p>ES6:<br>constructor构造自有属性,共有属性写在constructor外面<br>super,执行超类(父类)的constructor<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs bash">class Human&#123;<br>    constructor(name)&#123;<br>        this.name = name<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">run</span></span>()&#123;<br>        console.log(<span class="hljs-string">'run'</span>)<br>    &#125;<br>&#125;<br><br>class Man extends Human&#123;//等价于Man.protype.__protype = Human.protype<br>    constructor(name)&#123;<br>        super(name) //等价于Human.call(this,name),super意为超类,即父类<br>        this.gender = <span class="hljs-string">'Man'</span><br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">fight</span></span>()&#123;<br>        console.log(<span class="hljs-string">'fight'</span>)<br>    &#125;<br>&#125;<br><br>var author = new Man(<span class="hljs-string">'roxas'</span>)<br>atuhor//&#123;<br>    name:<span class="hljs-string">'roxas'</span>,<br>    gender:<span class="hljs-string">'Man'</span><br>    __proto__:&#123;<br>        <span class="hljs-function"><span class="hljs-title">fight</span></span>()&#123;&#125;,<br>        ...<br>        __proto__:&#123;<br>            <span class="hljs-function"><span class="hljs-title">run</span></span>()&#123;&#125;<br>            ...<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><h5 id="get-set"><a href="#get-set" class="headerlink" title="get set"></a>get set</h5><p>//属性封装<br>用get来控制只读属性.属性可通过set来条件控制<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">class Animal&#123;<br>    constructor(name)&#123;<br>        this.name = name<br>        this._race = <span class="hljs-string">'moving'</span><br>    &#125;<br>    get <span class="hljs-function"><span class="hljs-title">race</span></span>()&#123;<br>        <span class="hljs-built_in">return</span> this._race<br>    &#125;<br>    <span class="hljs-built_in">set</span> race(value)&#123;<br>        this._race = value<br>    &#125;<br>&#125;<br><br>//<span class="hljs-built_in">let</span> dog = new Animal(<span class="hljs-string">'dog'</span>)<br>dog.race //moving<br>dog.race = <span class="hljs-string">'donig'</span><br>dog.race //doing<br></code></pre></td></tr></table></figure></p><h5 id="static静态方法"><a href="#static静态方法" class="headerlink" title="static静态方法"></a>static静态方法</h5><p>不需要实例化就可以调用的方法<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">class Animal&#123;<br>    constructor(name)&#123;<br>        this.name = name<br>        this._race = <span class="hljs-string">'moving'</span><br>    &#125;<br>    static <span class="hljs-function"><span class="hljs-title">die</span></span>()&#123;<br>        console.log(<span class="hljs-string">'Animal Die'</span>)<br>    &#125;<br>&#125;<br><br>Animal.die //Animal Die<br></code></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WEB性能优化</title>
      <link href="/2018/07/25/WEB%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
      <url>/2018/07/25/WEB%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h4 id="Web性能优化之分析"><a href="#Web性能优化之分析" class="headerlink" title="Web性能优化之分析"></a>Web性能优化之分析</h4><p>优化:用户觉得网站加载速度快.</p><p>占用CPU少不算,它属于服务器性能优化.</p><p>先来了解用户浏览器输入url,按回车后,前端部分</p><ol><li>缓存</li><li>DNS查询</li><li>建立TCP链接</li><li>发送HTTP请求<br>(后台处理),等待中</li><li>接收响应</li><li>接收完成,得到HTML</li><li>浏览器解析HTML,先查看DOCTYPE</li><li>逐行解析</li><li>如果看到标签,部分浏览器直接渲染,部分浏览器不渲染(因为W3C没有规定以何种形式渲染)<br>例如chrome,假如直接渲染那么css下载完毕后,要再次渲染,IE与Firefox则是直接渲染,css下载结束后再渲染一次.</li><li>看到CSS,下载CSS,继续往下看还有没有CSS,假如有则同时下载另外的CSS,最多可以同时下载单个域名同时8个(chrome)/4个(ie8).逐个解析.(并行下载,解析串行).</li><li>看到JS,并行下载,解析串行,一定阻塞HTML渲染.</li></ol><h4 id="WEb性能优化之对策"><a href="#WEb性能优化之对策" class="headerlink" title="WEb性能优化之对策"></a>WEb性能优化之对策</h4><p>对以上步骤进行分治.</p><ol><li><p>DNS查询:</p><ol><li>减少域名,以减少DNS查询时间,把资源放到同一个域名内.</li></ol></li><li><p>建立TCP链接:</p><ol><li>开启keep-alive,使得TCP链接复用.</li><li>开启HTTP2.0,进行多路复用,效率更高.</li></ol></li><li><p>发送HTTP请求</p><ol><li>减少Cookie体积,从而减少请求体积.不要滥用Cookie.</li><li>使用CahcheControl(缓存),一定时间内不发请求.</li><li>增加请求域名,可以同时发送更多个请求.(浏览器单域名8/4个).<br> 与DNS查询优化冲突:权衡利弊,假如文件少则减少域名,从而减少DNS查询时间,假如文件多则增加域名,让其同时下载文件数变多,加快下载时间.</li><li>把多个JS/CSS文件合并成一个,减少请求数.</li></ol></li><li><p>接收响应 </p><ol><li>利用ETAG,返回304响应,不进行下载,直接用上次的文件.</li><li>用Gzip压缩,缺点:耗费CPU.权衡:文件越大收益越高,反之越低,比如文件只有1K.</li></ol></li><li><p>DOCTYPE</p><ol><li>一定要写对,不能写错,或者不写.写错了浏览器会猜.</li></ol></li><li><p>标签</p><ol><li>尽量减少标签使用</li></ol></li><li><p>CSS/JS文件下载</p><ol><li>尽量把JS放CDN,增加并发下载数,同时让资源分布到全球各地,资源 下载速度更快.</li><li>把CSS放在head里:因为CSS一定会柱塞渲染,就算放最后也会柱塞,所以尽早下载.保证用户看到完整的画面.<br> JS放在body最后,尽早显示页面,而且让JS可以获取到之前渲染好的节点.</li></ol></li><li><p>延迟组件加载<br> 节约流量</p></li><li><p>预加载<br> 还没看的时候就加载了.</p></li><li><p>加个Loading动画</p></li></ol><h4 id="测试优化"><a href="#测试优化" class="headerlink" title="测试优化"></a>测试优化</h4><p>Chrome浏览器,点击Audtis,点击perform,点击run.</p>]]></content>
      
      
      <categories>
          
          <category> 业务代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 业务代码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue组件</title>
      <link href="/2018/07/13/Vue%E7%BB%84%E4%BB%B6/"/>
      <url>/2018/07/13/Vue%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h3 id="vue组件"><a href="#vue组件" class="headerlink" title="vue组件"></a>vue组件</h3><h4 id="为什么要使用组件"><a href="#为什么要使用组件" class="headerlink" title="为什么要使用组件"></a>为什么要使用组件</h4><p>提高代码的复用性</p><h4 id="组件注册"><a href="#组件注册" class="headerlink" title="组件注册"></a>组件注册</h4><h5 id="全局注册"><a href="#全局注册" class="headerlink" title="全局注册"></a>全局注册</h5><p>优点:都可以使用</p><p>缺点:权限太大,容错率降低</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs undefined">Vue.component(&apos;my-component&apos;,&#123;<br>    template:&apos;&lt;div&gt;...&lt;div&gt;&apos;<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="局部注册"><a href="#局部注册" class="headerlink" title="局部注册"></a>局部注册</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">//实例内包含组件A<br><br>var componentA = &#123;<br>    template:<span class="hljs-string">'&lt;div&gt;A&lt;/div&gt;'</span><br>&#125;<br><br>new Vue(&#123;<br>    el:<span class="hljs-string">''</span>,<br>    components:&#123;<br>        <span class="hljs-string">'component-a'</span>:componentA<br>    &#125;<br>&#125;)<br><br>//局部组件B内使用局部组件A<br><br>var componentB = &#123;<br>    template:<span class="hljs-string">'&lt;div&gt;A&lt;/div&gt;'</span>,<br>    components:&#123;<br>        <span class="hljs-string">'compontent-a'</span>:componentA<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="标签受限下使用组件"><a href="#标签受限下使用组件" class="headerlink" title="标签受限下使用组件"></a>标签受限下使用组件</h4><p>table 直接使用会踢出去,因为table只能用tr td tbody 等元素</p><p>要使用is属性,把原标签替换成组件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs undefined">//不能正常运行<br>&lt;table&gt;<br>    &lt;component-a&gt;/&lt;component-a&gt;<br>&lt;/table&gt;<br><br>//使用is属性替换<br><br>&lt;table&gt;<br>    &lt;tbody is=&quot;component-a&quot;&gt;&lt;/tobdy&gt;<br>&lt;/table&gt;<br></code></pre></td></tr></table></figure><h4 id="组件注意事项"><a href="#组件注意事项" class="headerlink" title="组件注意事项"></a>组件注意事项</h4><ol><li><p>组件名称使用小写字母加-进行命名 如my-component</p></li><li><p>template内只能有一个根元素</p></li><li><p>组件除了template还可以有data,computed,methods</p></li><li><p>组件的data必须是一个方法,返回一个对象,因为对象的内存地址不一样</p><p> 例</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs undefined">template:&apos;&lt;p&gt;&#123;&#123;count&#125;&#125;&lt;p&gt;&apos;<br>data:function()&#123;<br>    return &#123;<br>        count:0<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h4 id="props"><a href="#props" class="headerlink" title="props"></a>props</h4><ol><li>使用props接收从父组件传递的参数,props中定义的属性都可以直接在组件中的使用</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;child-component msg=<span class="hljs-string">"父组件传递过来的内容"</span>&gt;&lt;/child-component&gt;<br>&lt;/div&gt;<br><br>&lt;script&gt;<br>    var app = new Vue(&#123;<br>        el:<span class="hljs-string">'#app'</span>,<br>        components:&#123;<br>            <span class="hljs-string">'child-component'</span>:&#123;<br>                props:[<span class="hljs-string">'msg'</span>],<br>                template:<span class="hljs-string">'&lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;p&gt;'</span><br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>2.props来自父级,而组件中data return的数据是组件自己的数据,两种情况作用域就是组件本身,可以在template,computed,methods中直接使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">components:&#123;<br>    <span class="hljs-string">'child-component'</span>:&#123;<br>        props:[<span class="hljs-string">'msg'</span>],<br>        data:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            <span class="hljs-built_in">return</span> &#123;<br>                count:0<br>            &#125;<br>        &#125;,<br>        methods:&#123;<br>            method1:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                <span class="hljs-built_in">return</span> this.count<br>            &#125;<br>        &#125;,<br>        computed:&#123;<br>            computed1:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                <span class="hljs-built_in">return</span> this.count<br>            &#125;<br>        &#125;,<br>        template:<span class="hljs-string">'&lt;p&gt;&#123;&#123;msg&#125;&#125; &#123;&#123;count&#125;&#125; &#123;&#123;method1()&#125;&#125; &#123;&#123;computed1&#125;&#125;&lt;p&gt;'</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li><p>props的值是字符串数组与对象</p></li><li><p>可以v-bind拿到来自父组件的动态数据</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;child-component msg=<span class="hljs-string">"父组件传递过来的内容"</span>&gt;&lt;/child-component&gt;<br>    &lt;child-component v-bind:msg=<span class="hljs-string">"msg"</span>&gt;&lt;/child-component&gt;<br>&lt;/div&gt;<br><br>&lt;script&gt;<br>    var app = new Vue(&#123;<br>        el: <span class="hljs-string">'#app'</span>,<br>        data:&#123;<br>            msg:<span class="hljs-string">'父组件data中传递过来的内容'</span><br>        &#125;,<br>        components: &#123;<br>            <span class="hljs-string">'child-component'</span>: &#123;<br>                props: [<span class="hljs-string">'msg'</span>],<br>                template: <span class="hljs-string">'&lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;p&gt;'</span><br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>v:bind传递一个数组与直接传递一个数组的区别</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;component arr=<span class="hljs-string">"[0,1,2]"</span>&gt;&lt;/component&gt; //输出7,解析成字符串,长度为7<br><br>&lt;component :arr=<span class="hljs-string">"[0,1,2]"</span>&gt;&lt;/component&gt; //输出3,解析成数组,长度为3<br><br>....<br>props:[<span class="hljs-string">'arr'</span>],<br>template:<span class="hljs-string">'&lt;p&gt;arr.length&lt;/p&gt;'</span><br></code></pre></td></tr></table></figure><h4 id="单向数据流"><a href="#单向数据流" class="headerlink" title="单向数据流"></a>单向数据流</h4><h5 id="解析"><a href="#解析" class="headerlink" title="解析:"></a>解析:</h5><p>通过props传递数据是单向的,父组件数据变化会传递给子组件,反过来不行.</p><h5 id="目的"><a href="#目的" class="headerlink" title="目的:"></a>目的:</h5><p>将父子租借解耦,避免子组件无意中修改了父组件的状态</p><h5 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景:"></a>应用场景:</h5><h5 id="场景1"><a href="#场景1" class="headerlink" title="场景1"></a>场景1</h5><p>父组件传递初始值,子组件将它作为初始值保存起来,在自己的作用域下随意使用和修改,这样情况可以在组件data内再声明一个数据,引用父组件的prop</p><p>步骤1: 注册组件<br>步骤2: 将父组件的数据传递尽力啊,并在子组件中用props接受<br>步骤3: 将传递进来的数据通过初始值保存起来</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;my-comp v-bind:msg=<span class="hljs-string">"msg"</span>&gt;&lt;/my-comp&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    var app = new Vue(&#123;<br>        el:<span class="hljs-string">'#app'</span>,<br>        data:&#123;<br>            msg:1<br>        &#125;,<br>        components:&#123;<br>            <span class="hljs-string">'my-comp'</span>:&#123;<br>                props:[<span class="hljs-string">'msg'</span>],<br>                template:<span class="hljs-string">'&lt;p&gt;&#123;&#123;childMsg&#125;&#125;&lt;/p&gt;'</span>,<br>                data:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                    <span class="hljs-built_in">return</span> &#123;<br>                       childMsg : this.msg<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h5 id="场景2"><a href="#场景2" class="headerlink" title="场景2"></a>场景2</h5><p>prop作为需要被转变的原始值传入.这种情况用计算属性</p><p>步骤1:注册组件<br>步骤2:父组件传递数据,子组件props接收<br>步骤3:传递过来的数据通过计算属性进行重新计算</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"text"</span> v-model=<span class="hljs-string">"width"</span>&gt;<br>    &lt;my-comp v-bind:width=<span class="hljs-string">"width"</span>&gt;&lt;/my-comp&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    var app = new Vue(&#123;<br>        el:<span class="hljs-string">'#app'</span>,<br>        data:&#123;<br>            width:0<br>        &#125;,<br>        components:&#123;<br>            <span class="hljs-string">'my-comp'</span>:&#123;<br>                props:[<span class="hljs-string">'width'</span>],<br>                template:<span class="hljs-string">'&lt;div :style="style"&gt;&lt;div&gt;'</span>,<br>                computed:&#123;<br>                    style:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                        <span class="hljs-built_in">return</span> &#123;<br>                            width:this.width + <span class="hljs-string">'px'</span>,<br>                            background:<span class="hljs-string">'red'</span>,<br>                            height:<span class="hljs-string">'30px'</span><br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="数据验证"><a href="#数据验证" class="headerlink" title="数据验证"></a>数据验证</h4><p>可以验证tpye类型可以是<br>Stiring<br>Number<br>Boolean<br>Object<br>Array<br>Function</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;script&gt;<br>    var app = new Vue(&#123;<br>        el:<span class="hljs-string">'#app'</span>,<br>        components:&#123;<br>            <span class="hljs-string">'my-comp'</span>:&#123;<br>                template:<span class="hljs-string">'&lt;div"&gt;&lt;div&gt;'</span>,<br>                props:&#123;<br>                    propA:Number,//数字<br>                    propB:[String,Number],//字符串或数字<br>                    propC:&#123;<br>                        <span class="hljs-built_in">type</span>:Boolean,<br>                        default:<span class="hljs-literal">true</span>//当不传入时的默认值<br>                    &#125;,<br>                    propD:&#123;<br>                        <span class="hljs-built_in">type</span>:Number,<br>                        required:<span class="hljs-literal">true</span>//必须传入<br>                    &#125;,<br>                    propE:&#123;<br>                        <span class="hljs-built_in">type</span>:Array,<br>                        default:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;//当数组时默认值必须是一个函数并返回一个数组<br>                            <span class="hljs-built_in">return</span> []<br>                        &#125;<br>                    &#125;,<br>                    propF:&#123;<br>                        validator:<span class="hljs-keyword">function</span>(val)&#123;//条件判断<br>                            <span class="hljs-built_in">return</span> val &gt; 10;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="组件通信"><a href="#组件通信" class="headerlink" title="组件通信"></a>组件通信</h4><h4 id="自定义事件"><a href="#自定义事件" class="headerlink" title="自定义事件"></a>自定义事件</h4><p>子组件给父组件传递数据</p><p>子组件用$emit()发布事件,父组件用v-on监听子组件的事件</p><p>步骤1:自定义事件<br>步骤2:在子组件用$emit发布事件,第一个参数是事件名,后面参数是传递的数据<br>步骤3:在自定义事件用一个参数来接受</p><p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;p&gt;库存:&#123;&#123;total&#125;&#125;&lt;/p&gt;<br>    &lt;btn-comp <br>        @change=<span class="hljs-string">"handleTotal"</span>&gt;&lt;/btn-comp&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>        var app = new Vue(&#123;<br>            el: <span class="hljs-string">'#app'</span>,<br>            data: &#123;<br>                total: 0<br>            &#125;,<br>            components: &#123;<br>                <span class="hljs-string">'btn-comp'</span>: &#123;<br>                    template: `<br>                    &lt;div&gt;<br>                        &lt;button @click=<span class="hljs-string">"plusOne"</span>&gt;+1&lt;/button&gt;<br>                        &lt;button @click=<span class="hljs-string">"minOne"</span>&gt;-1&lt;/button&gt;<br>                    &lt;/div&gt;<br>                    `<br>                    ,<br>                    data: <span class="hljs-function"><span class="hljs-title">function</span></span> () &#123;<br>                        <span class="hljs-built_in">return</span> &#123;<br>                            count: 0<br>                        &#125;<br>                    &#125;,<br>                    methods: &#123;<br>                        plusOne: <span class="hljs-function"><span class="hljs-title">function</span></span> () &#123;<br>                            this.count++;<br>                            this.<span class="hljs-variable">$emit</span>(<span class="hljs-string">'change'</span>, this.count)<br>                        &#125;,<br>                        minOne: <span class="hljs-function"><span class="hljs-title">function</span></span> () &#123;<br>                            this.count--;<br>                            this.<span class="hljs-variable">$emit</span>(<span class="hljs-string">'change'</span>, this.count)<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;,<br>            methods:&#123;<br>                handleTotal:<span class="hljs-keyword">function</span>(val)&#123;<br>                    this.total = val<br>                &#125;<br>            &#125;<br>        &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></p><h4 id="在组件用使用v-model"><a href="#在组件用使用v-model" class="headerlink" title="在组件用使用v-model"></a>在组件用使用v-model</h4><p>$emit发布一个input事件,参数是传递给v-model绑定属性的值</p><h5 id="v-model是一个语法糖-背后做了两步操作"><a href="#v-model是一个语法糖-背后做了两步操作" class="headerlink" title="v-model是一个语法糖,背后做了两步操作:"></a>v-model是一个语法糖,背后做了两步操作:</h5><ol><li>v-bind绑定</li><li>v-on给当前元素绑定input事件</li></ol><p>v-model其实就是绑定input事件,当触发input时,input事件就会自动接收传递过来的参数,并赋值给v-model绑定的属性</p><h5 id="要使用v-model要做到"><a href="#要使用v-model要做到" class="headerlink" title="要使用v-model要做到"></a>要使用v-model要做到</h5><ol><li>接收一个value属性</li><li>在新的value时触发input事件</li></ol><p>例<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;p&gt;库存:&#123;&#123;total&#125;&#125;&lt;/p&gt;<br>    &lt;btn-comp v-model=<span class="hljs-string">"total"</span>&gt;&lt;/btn-comp&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>        var app = new Vue(&#123;<br>            el: <span class="hljs-string">'#app'</span>,<br>            data: &#123;<br>                total: 0<br>            &#125;,<br>            components: &#123;<br>                <span class="hljs-string">'btn-comp'</span>: &#123;<br>                    template: `<br>                    &lt;div&gt;<br>                        &lt;button @click=<span class="hljs-string">"plusOne"</span>&gt;+1&lt;/button&gt;<br>                        &lt;button @click=<span class="hljs-string">"minOne"</span>&gt;+1&lt;/button&gt;<br>                    &lt;/div&gt;<br>                    `<br>                    ,<br>                    data: <span class="hljs-function"><span class="hljs-title">function</span></span> () &#123;<br>                        <span class="hljs-built_in">return</span> &#123;<br>                            count: 0<br>                        &#125;<br>                    &#125;,<br>                    methods: &#123;<br>                        plusOne: <span class="hljs-function"><span class="hljs-title">function</span></span> () &#123;<br>                            this.count++;<br>                            this.<span class="hljs-variable">$emit</span>(<span class="hljs-string">'input'</span>, this.count)<br>                        &#125;,<br>                        minOne: <span class="hljs-function"><span class="hljs-title">function</span></span> () &#123;<br>                            this.count--;<br>                            this.<span class="hljs-variable">$emit</span>(<span class="hljs-string">'input'</span>, this.count)<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></p><h4 id="非父组件之间的通信"><a href="#非父组件之间的通信" class="headerlink" title="非父组件之间的通信"></a>非父组件之间的通信</h4><h5 id="子组件间通信"><a href="#子组件间通信" class="headerlink" title="子组件间通信"></a>子组件间通信</h5><p>父组件data中定义<br>bus:new Vue()<br>通过this.$root.bus这条链,子组件A emit一个事件并发送数据,子组件B在created的时候订阅事件,并接收数据</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;my-comp<span class="hljs-_">-a</span>&gt;&lt;/my-comp<span class="hljs-_">-a</span>&gt;<br>    &lt;my-comp-b&gt;&lt;/my-comp-b&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    var app = new Vue(&#123;<br>        el:<span class="hljs-string">'#app'</span>,<br>        data:&#123;<br>            bus:new Vue()<br>        &#125;,<br>        components:&#123;<br>            <span class="hljs-string">'my-comp-a'</span>:&#123;<br>                template:<span class="hljs-string">'&lt;button @click="putDatatoB"&gt;点击向b组件传递数据&lt;/button&gt;'</span>,<br>                data:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                    <span class="hljs-built_in">return</span>&#123;<br>                        aaa:<span class="hljs-string">'A内容'</span><br>                    &#125;<br>                &#125;,<br>                methods:&#123;<br>                    putDatatoB:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                        this.<span class="hljs-variable">$root</span>.bus.<span class="hljs-variable">$emit</span>(<span class="hljs-string">'atob'</span>,this.aaa)<br>                    &#125;<br>                &#125;<br>            &#125;,<br>            <span class="hljs-string">'my-comp-b'</span>:&#123;<br>                template:<span class="hljs-string">'&lt;div&gt;&lt;/div&gt;'</span>,<br>                created:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                    this.<span class="hljs-variable">$root</span>.bus.<span class="hljs-variable">$on</span>(<span class="hljs-string">'atob'</span>,<span class="hljs-keyword">function</span>(val)&#123;<br>                        alert(val)<br>                    &#125;)<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h5 id="任意组件的通信"><a href="#任意组件的通信" class="headerlink" title="任意组件的通信"></a>任意组件的通信</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> eventHub = new Vue();<br>Vue.prototype.<span class="hljs-variable">$eventHub</span> = eventHub;<br>Vue.component(<span class="hljs-string">'comp-a'</span>,&#123;<br>    template:`<br>    &lt;div&gt;&lt;button @click=<span class="hljs-string">"aTob"</span>&gt;A&lt;/button&gt;&lt;/div&gt;<br>    `,<br>    methods:&#123;<br>        aTo:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            this.<span class="hljs-variable">$evntHub</span>.<span class="hljs-variable">$emit</span>(<span class="hljs-string">'atob'</span>,<span class="hljs-string">'form a'</span>);<br>        &#125;<br>    &#125;<br>&#125;)<br>Vue.component(<span class="hljs-string">'comp-b'</span>,&#123;<br>    tempalte:<span class="hljs-string">'<br>    &lt;div&gt;&lt;span&gt;B&lt;span&gt;&lt;span ref='</span>formA<span class="hljs-string">'&gt;&lt;/span&gt;&lt;div&gt;<br>    '</span>,<br>    created:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        this.<span class="hljs-variable">$eventHub</span>.<span class="hljs-variable">$on</span>(<span class="hljs-string">'atob'</span>,(data)=&gt;&#123;<br>            this.<span class="hljs-variable">$refs</span>.formA.textContent = data;<br>        &#125;)<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h5 id="父组件获得子组件数据"><a href="#父组件获得子组件数据" class="headerlink" title="父组件获得子组件数据"></a>父组件获得子组件数据</h5><p>父链this.$parent<br>子链this.$refs<br>提供了为子链提供索引的方法,用特殊的属性ref为其增加一个索引</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app2"</span>&gt;<br>        &#123;&#123;msg&#125;&#125;<br>        &lt;child-comp ref=<span class="hljs-string">"a"</span>&gt;&lt;/child-comp&gt;<br>        &lt;button @click=<span class="hljs-string">"getChildData"</span>&gt;点我拿到B组件数据&lt;/button&gt;<br>        &#123;&#123;formChild&#125;&#125;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    var app2 = new Vue(&#123;<br>        el:<span class="hljs-string">'#app2'</span>,<br>        data:&#123;<br>            bus:new Vue(),<br>            msg:<span class="hljs-string">'数据还没修改'</span>,<br>            formChild:<span class="hljs-string">'还未拿到'</span><br>        &#125;,<br>        methods:&#123;<br>            getChildData:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                this.formChild = this.<span class="hljs-variable">$refs</span>.a.msg //从子组件拿数据<br>            &#125;<br>        &#125;,<br>        components:&#123;<br>            <span class="hljs-string">'child-comp'</span>:&#123;<br>                template:<span class="hljs-string">'&lt;button @click="setFatherData"&gt;点我修改父组件数据&lt;/button&gt;'</span>,<br>                methods:&#123;<br>                    setFatherData:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                        this.<span class="hljs-variable">$parent</span>.msg = <span class="hljs-string">'数据已修改了'</span> //修改父组件数据<br>                    &#125;<br>                &#125;,<br>                data:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                    <span class="hljs-built_in">return</span>&#123;<br>                        msg:<span class="hljs-string">'我是子组件数据'</span><br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h5 id="父子组件间使用独立的eventbus"><a href="#父子组件间使用独立的eventbus" class="headerlink" title="父子组件间使用独立的eventbus"></a>父子组件间使用独立的eventbus</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs bash">//parent<br><br><span class="hljs-function"><span class="hljs-title">data</span></span>()&#123;<br>    eventBus:new Vue()<br>&#125;,<br><span class="hljs-function"><span class="hljs-title">provide</span></span>()&#123;//向子组件注入<br>    <span class="hljs-built_in">return</span> &#123;<br>        eventBus:this.eventBus<br>    &#125;<br>&#125;,<br><span class="hljs-function"><span class="hljs-title">mounted</span></span>()&#123;<br>    this.evenBus.<span class="hljs-variable">$on</span>(<span class="hljs-string">'event'</span>,(val)=&#123;//父组件b监听事件<br>        console.log(val)<br>    &#125;)<br>&#125;<br><br>//child<br>inject:[<span class="hljs-string">'eventBus'</span>],<br>methods:&#123;<br>    <span class="hljs-function"><span class="hljs-title">emitEvent</span></span>()&#123;<br>        this.evenBus.<span class="hljs-variable">$emit</span>(<span class="hljs-string">'event'</span>,<span class="hljs-string">'hi'</span>)//子组件a发布事件<br>    &#125;<br>&#125;,<br><span class="hljs-function"><span class="hljs-title">mounted</span></span>()&#123;<br>    this.evenBus.<span class="hljs-variable">$on</span>(<span class="hljs-string">'event'</span>,(val)=&#123;//子组件b监听事件<br>        console.log(val)<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h4><p>为了让组件可以组合,我们需要一种方式来混合父组件的内容与子组件自己的模板,这个过程被称为内容分发.<br>Vue实现了一个内容分发api,使用特殊的slot元素作为原始内容的插槽.</p><p>父组件的内容在父组件作用域内编译,<br>子组件的内容在子组件作用域内编译</p><p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;comp v-show=<span class="hljs-string">"childshow"</span>&gt;&lt;/comp&gt;//这里的childshow是父组件data里的<br><br>data:&#123;<br>    childshow:fasle<br>&#125;,<br>component:&#123;<br>    <span class="hljs-string">'comp'</span>:&#123;<br>        template:<span class="hljs-string">'&lt;div v-show="childshow"&gt;&lt;/div&gt;'</span> //这里的childshow是子组件data例的<br>    &#125;,<br>    data:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        <span class="hljs-built_in">return</span> &#123;<br>            childshow:<span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><h5 id="插槽用法"><a href="#插槽用法" class="headerlink" title="插槽用法:"></a>插槽用法:</h5><p>父组件的内容与子组件相混合,从而弥补了试图的不足</p><p>混合父组件的内容与子组件自己的模板</p><h5 id="单个插槽"><a href="#单个插槽" class="headerlink" title="单个插槽:"></a>单个插槽:</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;my-comp&gt;<br>        &lt;p&gt;父组件内容&lt;/p&gt;<br>    &lt;/my-comp&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    var app = new Vue(&#123;<br>        el:<span class="hljs-string">'#app'</span>,<br>        data:&#123;<br>            <br>        &#125;,<br>        components:&#123;<br>            <span class="hljs-string">'my-comp'</span>:&#123;<br>                template:`<br>                &lt;div&gt;<br>                    &lt;slot&gt;假如父组件没有内容,我就默认出现&lt;/slot&gt;<br>                &lt;div&gt;`,<br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h5 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽:"></a>具名插槽:</h5><p>下面的</p><p solot="heaer">与<slot name="header">替换<br>变成 <h1><p></p></h1></slot></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;my-comp&gt;<br>        &lt;p slot=<span class="hljs-string">"header"</span>&gt;标题&lt;/p&gt;<br>        &lt;p&gt;内容&lt;/p&gt;<br>        &lt;p slot=<span class="hljs-string">"footer"</span>&gt;底部&lt;/p&gt;<br>    &lt;/my-comp&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    var app = new Vue(&#123;<br>        el:<span class="hljs-string">'#app'</span>,<br>        data:&#123;<br>            <br>        &#125;,<br>        components:&#123;<br>            <span class="hljs-string">'my-comp'</span>:&#123;<br>                template:`<br>                &lt;div&gt;<br>                    &lt;h1&gt;<br>                        &lt;slot name=<span class="hljs-string">"header"</span>&gt;&lt;/slot&gt;<br>                    &lt;/h1&gt;<br>                    &lt;div&gt;<br>                        &lt;slot&gt;&lt;slot&gt;<br>                    &lt;/div&gt;<br>                    &lt;footer&gt;<br>                        &lt;slot name=<span class="hljs-string">"footer"</span>&gt;&lt;slot&gt;<br>                    &lt;footer&gt;<br>                &lt;div&gt;`,<br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h5 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h5><p>作用域插槽是一种特殊的slot,使用一个可以复用的模板来替换已经渲染的元素—从子组件获取数据</p><p>slot-scope的属性值指向插槽中的属性值,2.5.0版本下要使用template元素包裹</p><p>例:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app3"</span>&gt;<br>    &lt;my-comp-abc&gt;<br>        &lt;p slot=<span class="hljs-string">"abc"</span> slot-scope=<span class="hljs-string">"props"</span>&gt;<br>            &lt;button @click=<span class="hljs-string">"props.b"</span>&gt;&#123;&#123;props.a&#125;&#125;&lt;/button&gt;<br>        &lt;/p&gt;<br>    &lt;/my-comp-abc&gt;<br>    //也可以用es6赋值解构<br>    &lt;my-comp-abc&gt;<br>        &lt;p slot=<span class="hljs-string">"abc"</span> slot-scope=<span class="hljs-string">"&#123;a,b&#125;"</span>&gt;<br>            &lt;button @click=<span class="hljs-string">"b"</span>&gt;&#123;&#123;a&#125;&#125;&lt;/button&gt;<br>        &lt;/p&gt;<br>    &lt;/my-comp-abc&gt;<br>&lt;/div&gt;<br>&lt;script &gt;<br>    var app3 = new Vue(&#123;<br>        el:<span class="hljs-string">'#app3'</span>,<br>        components:&#123;<br>            <span class="hljs-string">'my-comp-abc'</span>:&#123;<br>                template:`<br>                &lt;div&gt;<br>                    &lt;slot :a=<span class="hljs-string">"a"</span> :b=<span class="hljs-string">"b"</span> name=<span class="hljs-string">"abc"</span>&gt;&lt;/slot&gt;<br>                &lt;/div&gt;<br>                `,<br>                <span class="hljs-function"><span class="hljs-title">data</span></span>()&#123;<br>                    <span class="hljs-built_in">return</span> &#123;<br>                        a:<span class="hljs-string">'click'</span><br>                    &#125;<br>                &#125;,<br>                methods:&#123;<br>                    <span class="hljs-function"><span class="hljs-title">b</span></span>()&#123;<br>                        console.log(<span class="hljs-string">'b'</span>)<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="访问slot"><a href="#访问slot" class="headerlink" title="访问slot"></a>访问slot</h4><p>通过this.$slots.name</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">mounted:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    <span class="hljs-built_in">let</span> header = this.<span class="hljs-variable">$slots</span>.header;<br>    <span class="hljs-built_in">let</span> text = header[0].elm.innerText;<br>    <span class="hljs-built_in">let</span> html = header[0].elm.innerHTML;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="动态组件"><a href="#动态组件" class="headerlink" title="动态组件"></a>动态组件</h4><p>Vue提供一个元素教component<br>作用是:用来动态挂载不同的组件<br>实现:使用is属性来进行实现</p><p>v-bind:is=”组件名”,可以把compoent变成该组件名的组件</p><p>通过动态组件切换视图的小demo:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;components :is=<span class="hljs-string">"view"</span>&gt;&lt;/components&gt;<br>    &lt;button @click=<span class="hljs-string">"handview('a')"</span>&gt;A&lt;/button&gt;<br>    &lt;button @click=<span class="hljs-string">"handview('b')"</span>&gt;B&lt;/button&gt;<br>    &lt;button @click=<span class="hljs-string">"handview('c')"</span>&gt;C&lt;/button&gt;<br>    &lt;button @click=<span class="hljs-string">"handview('d')"</span>&gt;D&lt;/button&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    var app = new Vue(&#123;<br>        el:<span class="hljs-string">'#app'</span>,<br>        data:&#123;<br>            view:<span class="hljs-string">'comp-a'</span><br>        &#125;,<br>        components:&#123;<br>            <span class="hljs-string">'comp-a'</span>:&#123;<br>                template:<span class="hljs-string">'&lt;div&gt;A&lt;div&gt;'</span>,<br>            &#125;,<br>            <span class="hljs-string">'comp-b'</span>:&#123;<br>                template:<span class="hljs-string">'&lt;div&gt;B&lt;div&gt;'</span>,<br>            &#125;,<br>            <span class="hljs-string">'comp-c'</span>:&#123;<br>                template:<span class="hljs-string">'&lt;div&gt;C&lt;div&gt;'</span>,<br>            &#125;,<br>            <span class="hljs-string">'comp-d'</span>:&#123;<br>                template:<span class="hljs-string">'&lt;div&gt;D&lt;div&gt;'</span>,<br>            &#125;,<br>        &#125;,<br>        methods:&#123;<br>            handview:<span class="hljs-keyword">function</span>(tag)&#123;<br>                this.view = <span class="hljs-string">'comp-'</span> + tag<br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue基础</title>
      <link href="/2018/07/13/Vue%E5%9F%BA%E7%A1%80/"/>
      <url>/2018/07/13/Vue%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><h4 id="MVVM是什么"><a href="#MVVM是什么" class="headerlink" title="MVVM是什么?"></a>MVVM是什么?</h4><p>MVVM是Model-View-ViewModel的缩写。MVVM是一种设计思想。Model 层代表数据模型，也可以在Model中定义数据修改和操作的业务逻辑；View 代表UI 组件，它负责将数据模型转化成UI 展现出来，ViewModel 是一个同步View 和 Model的对象。</p><p>在MVVM架构下，View 和 Model 之间并没有直接的联系，而是通过ViewModel进行交互，Model 和 ViewModel 之间的交互是双向的， 因此View 数据的变化会同步到Model中，而Model 数据的变化也会立即反应到View 上。</p><p>ViewModel 通过双向数据绑定把 View 层和 Model 层连接了起来，而View 和 Model 之间的同步工作完全是自动的，无需人为干涉，因此开发者只需关注业务逻辑，不需要手动操作DOM, 不需要关注数据状态的同步问题，复杂的数据状态维护完全由 MVVM 来统一管理。</p><h4 id="Vue-js优点"><a href="#Vue-js优点" class="headerlink" title="Vue.js优点"></a>Vue.js优点</h4><p>Vue.js是一个轻巧,高性能,可组件化的MVVM库.它是MVVM模式,视图层和数据层的双向绑定,让我们无需再去关心DOM操作的事情,更多的精力放在数据和业务逻辑上去.</p><h5 id="低耦合"><a href="#低耦合" class="headerlink" title="低耦合:"></a>低耦合:</h5><p>视图6（View）可以独立于Model变化和修改，一个ViewModel可以绑定到不同的”View”上，当View变化的时候Model可以不变，当Model变化的时候View也可以不变。</p><h5 id="可重用性"><a href="#可重用性" class="headerlink" title="可重用性:"></a>可重用性:</h5><p>你可以把一些视图逻辑放在一个ViewModel里面，让很多view重用这段视图逻辑。</p><h5 id="独立开发"><a href="#独立开发" class="headerlink" title="独立开发:"></a>独立开发:</h5><p>开发人员可以专注于业务逻辑和数据的开发（ViewModel），设计人员可以专注于页面设计。</p><h5 id="可测试"><a href="#可测试" class="headerlink" title="可测试:"></a>可测试:</h5><p>界面素来是比较难于测试的，而现在测试可以针对ViewModel来写</p><h5 id="易用灵活高效"><a href="#易用灵活高效" class="headerlink" title="易用灵活高效"></a>易用灵活高效</h5><h3 id="数据绑定-指令-事件"><a href="#数据绑定-指令-事件" class="headerlink" title="数据绑定,指令,事件"></a>数据绑定,指令,事件</h3><h4 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;script src=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"</span>&gt;&lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>最基本实例,其中el是必须的,是一个选择器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">var app = new Vue(&#123;<br>    el:<span class="hljs-string">''</span><br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="数据绑定data"><a href="#数据绑定data" class="headerlink" title="数据绑定data"></a>数据绑定data</h4><p>声明双向绑定的数据</p><h4 id="访问Vue实例的属性"><a href="#访问Vue实例的属性" class="headerlink" title="访问Vue实例的属性"></a>访问Vue实例的属性</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>var app = new (&#123;<br>    el:<span class="hljs-string">''</span>,<br>    data:&#123;<br>        msg:<span class="hljs-string">''</span><br>    &#125;,<br>    methods:&#123;<br>        ///<br>    &#125;<br>&#125;)<br><br>//访问el<br><br>app.<span class="hljs-variable">$el</span><br><br>//访问methods<br><br>app.<span class="hljs-variable">$methods</span><br><br>//访问data中的msg<br><br>app.msg<br></code></pre></td></tr></table></figure><h4 id="生命周期钩子"><a href="#生命周期钩子" class="headerlink" title="生命周期钩子"></a>生命周期钩子</h4><p>created 实例创建完成后调用,还没挂载到el上. —还没挂载</p><p>mounted el挂载到实例后. —刚挂载</p><p>beforeDestroy 实例销毁之前.主要用于解绑</p><p>运用例子:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &#123;&#123;date&#125;&#125;<br>&lt;/div&gt;<br><br>&lt;script&gt;<br>    var app = new Vue(&#123;<br>        el: <span class="hljs-string">'#app'</span>,<br>        data: &#123;<br>            date: new Date()<br>        &#125;,<br>        mounted:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;//挂载成功后进行每秒刷新1次当前时间<br>            var _this = this;<br>            this.timer = setInterval(<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                _this.date = new Date();<br>            &#125;,1000)<br>        &#125;,<br>        beforeDestory:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;//销毁前清除定时器<br>            <span class="hljs-keyword">if</span>(this.timer)&#123;<br>                clearInterval(this.timer)<br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="文本插值和表达式"><a href="#文本插值和表达式" class="headerlink" title="文本插值和表达式"></a>文本插值和表达式</h4><h5 id="文本插值"><a href="#文本插值" class="headerlink" title="文本插值:"></a>文本插值:</h5><p>使用,将data中的数据显示</p><h5 id="表达式"><a href="#表达式" class="headerlink" title="表达式:"></a>表达式:</h5><p>只能是单个表达式,不能是语句</p><h5 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>&#123;&#123;6 + 6&#125;&#125;<br></code></pre></td></tr></table></figure><h5 id="三元运算"><a href="#三元运算" class="headerlink" title="三元运算"></a>三元运算</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;&#123; 2&gt;1 ? <span class="hljs-string">'yes'</span> : <span class="hljs-string">'no'</span>&#125;&#125;<br></code></pre></td></tr></table></figure><h5 id="JS"><a href="#JS" class="headerlink" title="JS:"></a>JS:</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;&#123;Date.now()&#125;&#125;<br></code></pre></td></tr></table></figure><h4 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h4><p>Vue尾部插入|,通常用于格式化文本,过滤规则是自定义的,通过给Vue实例添加filters来设置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;&#123; data.数据名 | 过滤器1&#125;&#125;<br></code></pre></td></tr></table></figure><h5 id="串联"><a href="#串联" class="headerlink" title="串联:"></a>串联:</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;&#123; data.数据名 | 过滤器1 | 过滤器2&#125;&#125;<br></code></pre></td></tr></table></figure><h5 id="过滤器的参数"><a href="#过滤器的参数" class="headerlink" title="过滤器的参数"></a>过滤器的参数</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;&#123;date.数据表 | 过滤器1(a,b)&#125;&#125;<br></code></pre></td></tr></table></figure><p>传入的第一二个参数是过滤器1中的第二三个参数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">filters:&#123;<br>    过滤器1:<span class="hljs-keyword">function</span>(val,a,b)&#123;<br>        ///对val进行操作 val是  data.数据名 传入的<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="指令和事件"><a href="#指令和事件" class="headerlink" title="指令和事件"></a>指令和事件</h4><h5 id="v-text"><a href="#v-text" class="headerlink" title="v-text"></a>v-text</h5><p>解析文本和作用一样</p><p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;p v-text=<span class="hljs-string">"msg"</span>&gt;&lt;/p&gt;<br><br>&lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;<br>...<br>data&#123;<br>    msg:<span class="hljs-string">'msg'</span><br>&#125;<br></code></pre></td></tr></table></figure></p><h5 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a>v-html</h5><p>解析html</p><p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div v-html=<span class="hljs-string">"html"</span>&gt;&lt;/div&gt;<br><br>...<br>data&#123;<br>    html:<span class="hljs-string">'&lt;h1&gt;hello&lt;/h1&gt;'</span><br>&#125;<br></code></pre></td></tr></table></figure></p><h5 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind:"></a>v-bind:</h5><p>动态更新HTML元素上的属性,语法糖v-bind  === :</p><p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;p v-bind:title=<span class="hljs-string">"title"</span>&gt;&lt;/p&gt;<br><br>&lt;p :title=<span class="hljs-string">"title"</span>&gt;&lt;/p&gt;<br><br>&lt;p :class=<span class="hljs-string">"active"</span>&gt;&lt;/p&gt;<br>...<br>data&#123;<br>    title:<span class="hljs-string">'title'</span>,<br>    class:<span class="hljs-string">'active'</span><br>&#125;<br></code></pre></td></tr></table></figure></p><h4 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h4><p>语法:v-on:事件=”方法”</p><p>其中方法挂载到vue实例用的methods属性内,并且是一个函数,函数内的this指向vue实例本身.<br>所以可以直接访问或修改data内的数据.<br>注意:不能用箭头函数,因为会改成this,也就是把this变成对象’methods’</p><p>简单例子:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"app"</span>&gt;<br>    &lt;button v-on:click=<span class="hljs-string">"doSomething"</span>&gt;点击我&lt;/button&gt;<br>    &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;<br>&lt;/div&gt;<br><br>&lt;script&gt;<br>    var app = new Vue(&#123;<br>        el:<span class="hljs-string">'#app'</span>,<br>        data:&#123;<br>            msg:<span class="hljs-string">'this is a msg in data'</span><br>        &#125;,<br>        methods:&#123;<br>            doSomething:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                alert(<span class="hljs-string">'你点击我了!'</span>)<br>                alert(this.msg)<br>            &#125;<br>        &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS布局套路</title>
      <link href="/2018/06/16/CSS%E5%B8%83%E5%B1%80%E5%A5%97%E8%B7%AF/"/>
      <url>/2018/06/16/CSS%E5%B8%83%E5%B1%80%E5%A5%97%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<h3 id="CSS布局"><a href="#CSS布局" class="headerlink" title="CSS布局"></a>CSS布局</h3><h4 id="流程图-要支持IE8吗"><a href="#流程图-要支持IE8吗" class="headerlink" title="流程图:要支持IE8吗?"></a>流程图:要支持IE8吗?</h4><ol><li>是:float布局,定宽</li><li>否:flex布局,弹性宽</li></ol><h4 id="Float布局"><a href="#Float布局" class="headerlink" title="Float布局"></a>Float布局</h4><ol><li>给子元素加上float:left</li><li>给父元素加上clearfix</li></ol><p>clearfix</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">.clearfix::after&#123;<br>    content:<span class="hljs-string">''</span>;<br>    display:block;<br>    clear:both;<br>&#125;<br><br> /兼容IE6/<br><br>.clearfix&#123;<br>    zoom:1<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="浮动实现平均布局"><a href="#浮动实现平均布局" class="headerlink" title="浮动实现平均布局"></a>浮动实现平均布局</h4><p>父元素变成祖先,建新的父元素,父元素加上一个负margin<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">.pic&#123;<br>    width:800px;<br>    margin:0 auto;<br>&#125;<br>.pic &gt; .item &#123;<br>    width:194px;<br>    height:194px;<br>    margin:4px;<br>    <span class="hljs-built_in">float</span>:left;<br>&#125;<br>变成<br>.pic&#123;<br>    width:800px;<br>    margin:0 auto;<br>&#125;<br>.pic .xxx &#123;<br>    margin-left:-4px;<br>    margin-right:-8px;<br>&#125;<br>.pic &gt; .xxx &gt; .item&#123;<br>    width:194px;<br>    height:194px;<br>    margin:4px;<br>    <span class="hljs-built_in">float</span>:left;    <br>&#125;<br></code></pre></td></tr></table></figure></p><h4 id="Flex布局"><a href="#Flex布局" class="headerlink" title="Flex布局"></a>Flex布局</h4><ol><li>给父元素加display:flex;</li><li>给父元素加上justify-content:spance-between;</li></ol><h4 id="FLEX实现平均布局"><a href="#FLEX实现平均布局" class="headerlink" title="FLEX实现平均布局"></a>FLEX实现平均布局</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">.pic&#123;<br>    width:800px;<br>    margin:0 auto;<br>    display:flex;<br>    flex-wrap:wrap;<br>    justify-content:space-between;<br>&#125;<br>.pic &gt; .item &#123;<br>    width:194px;<br>    height:194px;<br>    margin:4px;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="使用calc"><a href="#使用calc" class="headerlink" title="使用calc"></a>使用calc</h5><p>百分之25,减去8像素</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">width:calc (25% - 8px);<br></code></pre></td></tr></table></figure><h5 id="如何防止banner图片变型"><a href="#如何防止banner图片变型" class="headerlink" title="如何防止banner图片变型"></a>如何防止banner图片变型</h5><ol><li>不要用img标签</li></ol><p>用background<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">background:transparent url() no-repeat center;<br>background-size:cover;<br></code></pre></td></tr></table></figure></p><ol start="2"><li>也可以搜索固定比例的div</li></ol>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flex布局</title>
      <link href="/2018/06/15/Flex%E5%B8%83%E5%B1%80/"/>
      <url>/2018/06/15/Flex%E5%B8%83%E5%B1%80/</url>
      
        <content type="html"><![CDATA[<h3 id="FLEX布局"><a href="#FLEX布局" class="headerlink" title="FLEX布局"></a>FLEX布局</h3><h3 id="flex-container的属性"><a href="#flex-container的属性" class="headerlink" title="flex container的属性"></a>flex container的属性</h3><h4 id="flex-direction-方向"><a href="#flex-direction-方向" class="headerlink" title="flex-direction 方向"></a>flex-direction 方向</h4><h5 id="属性"><a href="#属性" class="headerlink" title="属性:"></a>属性:</h5><ol><li>row 水平</li><li>row-reverse 水平反向</li><li>column 垂直</li><li>column-reverse 垂直反向</li></ol><h4 id="flex-wrap-换行"><a href="#flex-wrap-换行" class="headerlink" title="flex-wrap 换行"></a>flex-wrap 换行</h4><h5 id="属性-1"><a href="#属性-1" class="headerlink" title="属性"></a>属性</h5><ol><li>nowrap 不换行(默认)</li><li>wrap 换行</li></ol><h4 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a>flex-flow</h4><p>direction 与 wrap 的简写</p><h4 id="justify-content-主轴方向对齐方式"><a href="#justify-content-主轴方向对齐方式" class="headerlink" title="justify-content 主轴方向对齐方式"></a>justify-content 主轴方向对齐方式</h4><p>假如是默认或者row主轴就是横着的<br>假如是column主轴就是竖着的</p><h5 id="属性-2"><a href="#属性-2" class="headerlink" title="属性"></a>属性</h5><ol><li>flex-start 主轴起点开始</li><li>flex-end 主轴起点结束</li><li>center 主轴居中</li><li>space-between 空的放在中间 </li><li>space-around 空的放在两边</li></ol><h4 id="align-items-子元素对齐方式"><a href="#align-items-子元素对齐方式" class="headerlink" title="align-items 子元素对齐方式"></a>align-items 子元素对齐方式</h4><h4 id="属性-3"><a href="#属性-3" class="headerlink" title="属性"></a>属性</h4><ol><li>stretch 默认,把所有元素高度伸长到一样高.</li><li>flex-start 所有元素往起点靠</li><li>flex-end  所有元素往终点靠</li><li>center    所有元素居中对齐</li></ol><h4 id="align-content-垂直行对齐"><a href="#align-content-垂直行对齐" class="headerlink" title="align-content 垂直行对齐"></a>align-content 垂直行对齐</h4><ol><li>stretch </li><li>flex-start 靠近起点</li><li>flex-end  靠近终点</li><li>center 主轴居中</li><li>space-between 空的放在中间 </li><li>space-around 空的放在两边</li></ol><h3 id="flex-item-的属性"><a href="#flex-item-的属性" class="headerlink" title="flex item 的属性"></a>flex item 的属性</h3><h4 id="flex-grow-增长比例-空间过多时"><a href="#flex-grow-增长比例-空间过多时" class="headerlink" title="flex-grow 增长比例(空间过多时)"></a>flex-grow 增长比例(空间过多时)</h4><p>属性数字:按比例分配 默认是0<br>假如某div是任意数字,其他是0,那么这个div占其余所有空间</p><h4 id="flex-shrink-收缩比例-一般不用"><a href="#flex-shrink-收缩比例-一般不用" class="headerlink" title="flex-shrink 收缩比例 (一般不用)"></a>flex-shrink 收缩比例 (一般不用)</h4><p>属性数字:比例分配 默认是0</p><h4 id="flex-basis-默认大小-一般不用"><a href="#flex-basis-默认大小-一般不用" class="headerlink" title="flex-basis 默认大小(一般不用)"></a>flex-basis 默认大小(一般不用)</h4><p>不写就是原始大小,写了就是写的小</p><h4 id="flex-上面3个的缩写"><a href="#flex-上面3个的缩写" class="headerlink" title="flex 上面3个的缩写"></a>flex 上面3个的缩写</h4><h4 id="order-顺序"><a href="#order-顺序" class="headerlink" title="order 顺序"></a>order 顺序</h4><p>属性数字:是一个index,改变顺序</p><h4 id="align-self-自身的对齐方式"><a href="#align-self-自身的对齐方式" class="headerlink" title="align-self 自身的对齐方式"></a>align-self 自身的对齐方式</h4><p>item自身的对齐方式</p><p>同justify-content,align-content.</p><h3 id="使用flex布局"><a href="#使用flex布局" class="headerlink" title="使用flex布局"></a>使用flex布局</h3><ol><li>手机页面布局 (topbar+main+tabs)</li></ol><p>预览:<a href="https://roxas332519096.github.io/flex-demo/手机页面布局.html" target="_blank" rel="noopener">https://roxas332519096.github.io/flex-demo/手机页面布局.html</a></p><ol start="2"><li>产品列表(ul&gt;li*9)</li></ol><p>预览:<a href="https://roxas332519096.github.io/flex-demo/产品列表.html" target="_blank" rel="noopener">https://roxas332519096.github.io/flex-demo/产品列表.html</a></p><ol start="3"><li>PC页面布局(双飞翼)</li></ol><p>预览:<a href="https://roxas332519096.github.io/flex-demo/PC页面布局.html" target="_blank" rel="noopener">https://roxas332519096.github.io/flex-demo/PC页面布局.html</a></p><ol start="4"><li>完美居中</li></ol><p>预览:<a href="https://roxas332519096.github.io/flex-demo/完美居中.html" target="_blank" rel="noopener">https://roxas332519096.github.io/flex-demo/完美居中.html</a></p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack</title>
      <link href="/2018/06/13/webpack/"/>
      <url>/2018/06/13/webpack/</url>
      
        <content type="html"><![CDATA[<h3 id="前端目录"><a href="#前端目录" class="headerlink" title="前端目录"></a>前端目录</h3><p>src source 未经翻译的代码<br>dist distribution 发布代码<br>vendors 第三方库<br>node_modules 第三方包</p><h3 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><h5 id="安装webpack3"><a href="#安装webpack3" class="headerlink" title="安装webpack3"></a>安装webpack3</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm init<br>npm i webpack@3<br></code></pre></td></tr></table></figure><h5 id="新建webpack-config-js文件"><a href="#新建webpack-config-js文件" class="headerlink" title="新建webpack.config.js文件"></a>新建webpack.config.js文件</h5><p>编辑文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs bash">const path = require(<span class="hljs-string">'path'</span>);<br><br>module.exports = &#123;<br>    entry: <span class="hljs-string">'./src/js/app.js'</span>, //入口文件<br>    output: &#123;<br>      filename: <span class="hljs-string">'bundle.js'</span>,//输出文件<br>      path: path.resolve(__dirname, <span class="hljs-string">'dist/js/'</span>) //输出路径<br>    &#125;,<br>    module: &#123;<br>      rules: [<br>        &#123;<br>          <span class="hljs-built_in">test</span>: /\.js$/,<br>          exclude: /(node_modules|bower_components)/,<br>          use: &#123;<br>            loader: <span class="hljs-string">'babel-loader'</span>,<br>            options: &#123;<br>              presets: [<span class="hljs-string">'env'</span>]<br>            &#125;<br>          &#125;<br>        &#125;,<br>        &#123;<br>          <span class="hljs-built_in">test</span>: /\.scss$/,<br>          use: [&#123;<br>            loader: <span class="hljs-string">"style-loader"</span> // creates style nodes from JS strings<br>          &#125;, &#123;<br>            loader: <span class="hljs-string">"css-loader"</span>, // translates CSS into CommonJS<br>            options: &#123; importLoaders: 1 &#125;<br>          &#125;, &#123;<br>            loader: <span class="hljs-string">'postcss-loader'</span><br>          &#125;,&#123;<br>            loader: <span class="hljs-string">"sass-loader"</span> // compiles Sass to CSS<br>          &#125;]<br>        &#125;<br>      ]<br>    &#125;<br>  &#125;;<br></code></pre></td></tr></table></figure></p><h5 id="安装babel-loader与scss-loader"><a href="#安装babel-loader与scss-loader" class="headerlink" title="安装babel-loader与scss-loader"></a>安装babel-loader与scss-loader</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev babel-loader babel-core babel-preset-env webpack<br>npm install sass-loader node-sass webpack --save-dev<br></code></pre></td></tr></table></figure><h5 id="安装其他必须插件"><a href="#安装其他必须插件" class="headerlink" title="安装其他必须插件"></a>安装其他必须插件</h5><p>它提示确实什么就npm i 缺少的东西</p><h5 id="使用将babel-loader将es6转成es5"><a href="#使用将babel-loader将es6转成es5" class="headerlink" title="使用将babel-loader将es6转成es5"></a>使用将babel-loader将es6转成es5</h5><p>编辑app.js文件(入口文件)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn</span></span>()&#123;<br>    <span class="hljs-built_in">let</span> b = <span class="hljs-string">'I am b'</span>;<br>    console.log(b);<br>&#125;<br><span class="hljs-built_in">export</span> default fn;<br></code></pre></td></tr></table></figure><h5 id="编辑模块文件"><a href="#编辑模块文件" class="headerlink" title="编辑模块文件"></a>编辑模块文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">//1.js<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn</span></span>()&#123;<br>    <span class="hljs-built_in">let</span> a = <span class="hljs-string">'I am a'</span>;<br>    console.log(a);<br>&#125;<br><span class="hljs-built_in">export</span> default fn;<br>//2.js<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn</span></span>()&#123;<br>    <span class="hljs-built_in">let</span> b = <span class="hljs-string">'I am b'</span>;<br>    console.log(b);<br>&#125;<br><span class="hljs-built_in">export</span> default fn;<br></code></pre></td></tr></table></figure><h5 id="在html中引入-dist-js-bundle-js"><a href="#在html中引入-dist-js-bundle-js" class="headerlink" title="在html中引入./dist/js/bundle.js"></a>在html中引入./dist/js/bundle.js</h5><h5 id="运行webpack"><a href="#运行webpack" class="headerlink" title="运行webpack"></a>运行webpack</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npx webpack<br></code></pre></td></tr></table></figure><h5 id="将scss转成css"><a href="#将scss转成css" class="headerlink" title="将scss转成css"></a>将scss转成css</h5><p>根目录创建 postcss.config.js文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">module.exports = &#123;<br>    plugins: &#123;<br>      <span class="hljs-string">'postcss-cssnext'</span>: &#123;&#125;,<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure></p><h5 id="入口文件引入scss文件"><a href="#入口文件引入scss文件" class="headerlink" title="入口文件引入scss文件"></a>入口文件引入scss文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">import <span class="hljs-string">'../css/main.scss'</span><br></code></pre></td></tr></table></figure><h5 id="运行webpack-1"><a href="#运行webpack-1" class="headerlink" title="运行webpack"></a>运行webpack</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npx webpack<br></code></pre></td></tr></table></figure><p>////////////<br>caniuse 插兼容性问题</p><p>autoprefixer 自动解决兼容性</p>]]></content>
      
      
      <categories>
          
          <category> webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sass</title>
      <link href="/2018/06/13/sass/"/>
      <url>/2018/06/13/sass/</url>
      
        <content type="html"><![CDATA[<h3 id="SASS"><a href="#SASS" class="headerlink" title="SASS"></a>SASS</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装:"></a>安装:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install  node-sass  -g<br></code></pre></td></tr></table></figure><p>安装成功<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">node-sass -v<br></code></pre></td></tr></table></figure></p><h4 id="编译"><a href="#编译" class="headerlink" title="编译:"></a>编译:</h4><p>将路径src/css的sass翻译到dist/css,并监听<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">node-sass src/css/ -o dist/css/ -w<br></code></pre></td></tr></table></figure></p><h4 id="语法"><a href="#语法" class="headerlink" title="语法:"></a>语法:</h4><h5 id="1-嵌套"><a href="#1-嵌套" class="headerlink" title="1.嵌套"></a>1.嵌套</h5><p>css:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">div &#123;<br>    margin:20px;<br>&#125;<br>div p &#123;<br>    padding:20px;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>scss:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">div&#123;<br>    margin:20px;<br>    p&#123;padding:20px;&#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><h5 id="2-变量"><a href="#2-变量" class="headerlink" title="2.变量"></a>2.变量</h5><p>css:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">a&#123;<br>    color:<span class="hljs-comment">#ddd;</span><br>&#125;<br>p&#123;<br>    color:<span class="hljs-comment">#ddd;</span><br>&#125;<br></code></pre></td></tr></table></figure></p><p>scss:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-variable">$color</span>-<span class="hljs-built_in">test</span>:<span class="hljs-comment">#ddd;</span><br>a&#123;<br>    color:<span class="hljs-variable">$color</span>-<span class="hljs-built_in">test</span>;<br>&#125;<br>p&#123;<br>    color:<span class="hljs-variable">$color</span>-<span class="hljs-built_in">test</span>;<br>&#125;<br></code></pre></td></tr></table></figure></p><h5 id="3-引用-用-amp-引用父选择器"><a href="#3-引用-用-amp-引用父选择器" class="headerlink" title="3.引用,用&amp;引用父选择器"></a>3.引用,用&amp;引用父选择器</h5><p>css:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">a&#123;<br>    color:<span class="hljs-comment">#111;</span><br>&#125;<br>a:hover&#123;<br>    color:<span class="hljs-comment">#222;</span><br>&#125;<br>a:active&#123;<br>    color:<span class="hljs-comment">#333;</span><br>&#125;<br></code></pre></td></tr></table></figure></p><p>scss:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">a&#123;<br>    color:<span class="hljs-comment">#111;</span><br>    &amp;:hover&#123;<br>        color:<span class="hljs-comment">#222;</span><br>    &#125;<br>    &amp;:active&#123;<br>        color:<span class="hljs-comment">#333;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><h5 id="4-导入-import"><a href="#4-导入-import" class="headerlink" title="4.导入,@import"></a>4.导入,@import</h5><p>Sass 的 @import 指令用于导入其他样式模块。</p><p>假设现有 _variables.scss _buttons.scss _forms.scss 三个模块，可以通过一个 main.scss 导入这些模块。</p><p>scss:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">// main.scss<br>@import <span class="hljs-string">"variables"</span>;<br>@import <span class="hljs-string">"buttons"</span>;<br>@import <span class="hljs-string">"forms"</span>;<br></code></pre></td></tr></table></figure></p><p>子模块文件前面的下划线用于告知 Sass 编译器不要把这个模块编译成单独的 CSS 文件</p><h5 id="5-嵌套-import"><a href="#5-嵌套-import" class="headerlink" title="5.嵌套@import"></a>5.嵌套@import</h5><p>Sass 的 @import 指令可以嵌套在选择器内，产生嵌套效果</p><p>scss:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">@import <span class="hljs-string">"variables"</span>;<br>@import <span class="hljs-string">"mixins"</span>;<br><br>.slamdunk &#123;<br>  min-width: 320px;<br>  @import <span class="hljs-string">"navbar"</span>;<br>  @import <span class="hljs-string">"content"</span>;<br>  @import <span class="hljs-string">"players"</span>;<br>&#125;<br></code></pre></td></tr></table></figure></p><p> 注意:CSS 也有 @import，在 IE 6-8 上会导致多个 CSS 文件不能同时下载的情况，影响网页性能</p><h5 id="6-运算"><a href="#6-运算" class="headerlink" title="6.运算"></a>6.运算</h5><p> Sass 支持对数字标准的算术运算(加法 +，减法 - ，乘法 *，除法 / 和取模 %) 并保留单位;</p><p>由于 CSS 中 / 可作为分隔符，因此除法运算要稍微注意以下情况。</p><p>scss:<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"> p &#123;<br>  font: 10px/8px;                // 原生的CSS，不作为除法<br>  <span class="hljs-variable">$width</span>: 1000px;<br>  width: <span class="hljs-variable">$width</span>/2;               // 使用了变量, 作为除法<br>  width: round(1.5)/2;           // 使用了函数, 作为除法<br>  height: (500px/2);             // 使用了括号, 作为除法<br>  margin-left: 5px + 8px/2px;    // 使用了 +, 作为除法<br>  font: (italic bold 10px/8px);  // 在一个列表（list）中，括号可以被忽略。<br>&#125;<br></code></pre></td></tr></table></figure></p><p> css:<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"> p &#123;<br>  font: 10px/8px;<br>  width: 500px;<br>  height: 250px;<br>  margin-left: 9px;<br>&#125;<br></code></pre></td></tr></table></figure></p><h5 id="7-注释"><a href="#7-注释" class="headerlink" title="7.注释:"></a>7.注释:</h5><p> 单行注释 // 会在 .scss 被编译成 .css 后移除</p><p> scss:<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">// Header<br>.header&#123;<br>    height:60px;<br>&#125;<br></code></pre></td></tr></table></figure></p><p> css:<br> .header {<br>     height:60px;<br> }</p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Session/LocalStorage/Cache-Control/Expires/ETag</title>
      <link href="/2018/06/11/Seesion--LocalStorage--Cache-Control--Expires--ETag/"/>
      <url>/2018/06/11/Seesion--LocalStorage--Cache-Control--Expires--ETag/</url>
      
        <content type="html"><![CDATA[<h4 id="Session-与-Cookie-的关系与区别"><a href="#Session-与-Cookie-的关系与区别" class="headerlink" title="Session 与 Cookie 的关系与区别"></a>Session 与 Cookie 的关系与区别</h4><p>关系:</p><p>Session 基于 Cookie 实现的.</p><p>区别:</p><p>Cookie 保存在客户端，每次都随请求发送给 Server.<br>Session 保存在 Server 的内存里，其 Session ID 是通过 Cookie 发送给客户端的.</p><h4 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h4><ol><li>服务器通过 Set-Cookie 头给客户端一串字符串;</li><li>客户端每次访问相同域名的网页时,必须带上这段字符串;</li><li>客户端要在一段时间内保存这个Cookie.</li><li>Cookie最大存储量4K.</li><li>Cookie默认在用户关闭页面后就失效,后台代码可以任意设置 Cookeie 的过期时间.</li></ol><h4 id="什么是Seesion"><a href="#什么是Seesion" class="headerlink" title="什么是Seesion?"></a>什么是Seesion?</h4><ol><li>服务器将SessionID(随机数)通过Cookie发给客户端;</li><li>客户端访问服务器时,服务器读取SessionID;</li><li>服务器有一块内存(哈希表)保存了所有Session</li><li>通过SessionID我们可以得到用户的隐私信息,如id,email;</li><li>这块内存(哈希表)就是服务器上的所有session.</li></ol><h4 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h4><h5 id="什么是localStorage"><a href="#什么是localStorage" class="headerlink" title="什么是localStorage?"></a>什么是localStorage?</h5><p>持久化存储</p><p>HTML5里的API<br>window.localStorage</p><h5 id="方法"><a href="#方法" class="headerlink" title="方法:"></a>方法:</h5><ol><li>localStorage.setItem();</li><li>localStorage.getItem();</li><li>localStorage.removeItem();</li></ol><h5 id="特点"><a href="#特点" class="headerlink" title="特点:"></a>特点:</h5><ol><li>localStorage 跟 HTTP 无关;</li><li>HTTP不会带上 localStorage 的值;</li><li>只有相同域名的页面才能互相读取 localStorage(没有同源那么严格);</li><li>每个域名localStorage 最大存储量为5 MB 左右 (每个浏览器不一样);</li><li>常用场景: 记录有没有提示过用户 (没有用的信息,不能记录密码);</li><li>localStorage 永久有效,除非用户清除缓存.</li></ol><h6 id="LocalStorage与Cookie的区别"><a href="#LocalStorage与Cookie的区别" class="headerlink" title="LocalStorage与Cookie的区别."></a>LocalStorage与Cookie的区别.</h6><p>Cookie在客户端每次发送请求跟服务器响应都会带上,通过服务器设置过期时间,最大4KB.<br>LocalStorage跟HTTP无关,请求时不会带上它的值,它永久有效.最大5MB.</p><h5 id="SessionStorage-会话存储"><a href="#SessionStorage-会话存储" class="headerlink" title="SessionStorage(会话存储)"></a>SessionStorage(会话存储)</h5><ol><li>SessionStorage 跟 HTTP 无关;</li><li>HTTP不会带上 SessionStorage 的值;</li><li>只有相同域名的页面才能互相读取 SessionStorage(没有同源那么严格);</li><li>每个域名lSessionStorage 最大存储量为5 MB 左右 (每个浏览器不一样);</li><li>SessionStorage 在用户关闭页面(会话结束)后失效.</li></ol><h5 id="SessionStorage与LocalStorage区别"><a href="#SessionStorage与LocalStorage区别" class="headerlink" title="SessionStorage与LocalStorage区别"></a>SessionStorage与LocalStorage区别</h5><p>LocalStorage永久有效,SessionStorage页面关闭后失效.</p><h4 id="HTTP-缓存-Cache"><a href="#HTTP-缓存-Cache" class="headerlink" title="HTTP 缓存(Cache)"></a>HTTP 缓存(Cache)</h4><h5 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h5><p>用来区分对应缓存机制的支持情况,在请求头和响应头都支持这个属性.</p><p>假如在缓存有效期内,对于同样的URL,浏览器不会对服务器发出HTTP请求,而是从内存中获取数据.</p><p>时间是经过多久时间后过期.</p><h5 id="更新缓存"><a href="#更新缓存" class="headerlink" title="更新缓存"></a>更新缓存</h5><p>可以做入口改动,利用URL的查询参数更新缓存.<br>比如:<br>在HTML文件里改对应文件的URL.<link rel="stylesheet" href="css/style.css?v2">,</p><h5 id="为什么首页不能设置Cache-Control"><a href="#为什么首页不能设置Cache-Control" class="headerlink" title="为什么首页不能设置Cache-Control"></a>为什么首页不能设置Cache-Control</h5><p>因为用户不能从服务器中获取最新网页.</p><h5 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h5><p>如果设置Cache-Control那么Expires会被忽略.</p><p>时间是一个时间点,即几分几秒过期,时间指的是本地时间,不靠谱.</p><h5 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h5><p>一个摘要算法</p><p>Bash里 输入md5 文件名即转成MD5.</p><p>如果内容差异越小,那么MD5值越大.</p><h5 id="ETag"><a href="#ETag" class="headerlink" title="ETag"></a>ETag</h5><p>服务器返回一个ETag,内容是MD5给浏览器,浏览器下次发送请求时,请求时带上请求头if-none-match,那么内容不需要下载,服务器返回状态码304,304返回的第四部分是空的.</p><h5 id="Cache-Control和ETag"><a href="#Cache-Control和ETag" class="headerlink" title="Cache-Control和ETag"></a>Cache-Control和ETag</h5><p>Cache-Control是未过期不发送请求,ETag是发送请求假如不匹配,但是不返回内容,即响应体是空的.</p>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cookie-注册与登陆</title>
      <link href="/2018/06/10/Cookie-%E6%B3%A8%E5%86%8C%E4%B8%8E%E7%99%BB%E9%99%86/"/>
      <url>/2018/06/10/Cookie-%E6%B3%A8%E5%86%8C%E4%B8%8E%E7%99%BB%E9%99%86/</url>
      
        <content type="html"><![CDATA[<h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><h4 id="Cookie是什么"><a href="#Cookie是什么" class="headerlink" title="Cookie是什么?"></a>Cookie是什么?</h4><p>Cookie 是服务器保存在浏览器的一小段文本信息，每个 Cookie 的大小一般不能超过4KB。浏览器每次向服务器发出请求，就会自动附上这段信息。Cookie 主要用来分辨两个请求是否来自同一个浏览器，以及用来保存一些状态信息。它的常用场合有以下一些。</p><ol><li>对话（session）管理：保存登录、购物车等需要记录的信息。</li><li>个性化：保存用户的偏好，比如网页的字体大小、背景色等等。</li><li>追踪：记录和分析用户行为。</li></ol><h4 id="Cookie属性"><a href="#Cookie属性" class="headerlink" title="Cookie属性"></a>Cookie属性</h4><p>名称 name (必须)<br>值 value<br>域 domain<br>路径 path<br>失效时间 expires<br>安全标志 secure 一个带有安全属性的 cookie 只有在请求使用SSL和HTTPS协议的时候才会被发送到服务器<br>HttpOnly 设置该属性js不能从document.cookie;XMLHttpRequest;Request APIs访问Cookie</p><h4 id="Cookie-特点"><a href="#Cookie-特点" class="headerlink" title="Cookie 特点"></a>Cookie 特点</h4><ol><li>服务器通过 Set-Cookie 响应头设置 Cookie</li><li>浏览器得到 Cookie 之后，每次请求都要带上 Cookie</li><li>服务器读取 Cookie 就知道登录用户的信息,例如:account,email,password等.</li><li>不同的浏览器对Cookie数量和大小限制不一样,一般来说,单个域名的Cookdie不应超过30个,每个大小不超过4KB.</li></ol><h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><ol><li><p>我在 Chrome 登录了得到 Cookie，用 Safari 访问，Safari 会带上 Cookie 吗?<br> 不会,Cookie只有用之前获得Cookie的浏览器才会有.</p></li><li><p>Cookie 存在哪?<br> Windows 存在 C 盘的一个文件里</p></li><li><p>Cookie会被用户篡改吗？<br> 可以,Session 来解决这个问题，防止用户篡改.</p></li><li><p>Cookie 有效期吗？<br> 默认有效期20分钟左右，不同浏览器策略不同<br> 后端可以强制设置有效期，具体语法看 MDN</p></li><li><p>Cookie 遵守同源策略吗？<br> 当请求 qq.com 下的资源时,浏览器会默认带上 qq.com 对应的 Cookie,不会带上 baidu.com 对应的 Cookie;<br> 当请求 v.qq.com 下的资源时,浏览器不仅会带上 v.qq.com 的Cookie,还会带上 qq.com 的 Cookie;<br> 二级域名,三级域名的Cookie都会带上.<br> 另外 Cookie 还可以根据路径做限制,这个功能用得比较少.;</p></li><li><p>.服务器端可以通过设置 Expires、max-age 两个标签将 Cookie 设置为过期状态;JavaScript 可以通过document.cookie API 删除 Cookie.</p></li></ol><p>下面是一个带Cookie响应头<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">HTTP /1.1 200 OK<br>Content-type:text/html<br>Set-Cookie:name=value; expires = Mon, 22-Jan-07 07:10:24 GMT; domain=.wrox.com path=/; secure; HttpOnly<br></code></pre></td></tr></table></figure></p><h4 id="用户注册过程中浏览器与服务器发生了什么"><a href="#用户注册过程中浏览器与服务器发生了什么" class="headerlink" title="用户注册过程中浏览器与服务器发生了什么?"></a>用户注册过程中浏览器与服务器发生了什么?</h4><h5 id="前端-浏览器"><a href="#前端-浏览器" class="headerlink" title="前端(浏览器)"></a>前端(浏览器)</h5><ol><li>HTML里做一个Form表单,填入账号,Email,密码,确认密码等信息.</li><li>HTML表单里每行隐藏一个span标签,显示error属性.</li><li>用JS获取用户填入的信息后,先进行前端认证,如填入的格式,密码是否相同等</li><li>假如错误,将错误信息返回给error标签,显示信息.</li><li>假如正确,用AJAX发送post请求(这是一个Promise对象),路径为服务器端注册页面,内容为用户提交的数据.</li><li>服务器处理信息,返回给浏览器,假如正确执行XXX,假如错误则返回错误信息,前端把信息翻译后传到浏览器上.</li></ol><h5 id="后端-服务器"><a href="#后端-服务器" class="headerlink" title="后端(服务器)"></a>后端(服务器)</h5><ol><li>如果请求为GET,读取数据库数据,返回状态码200,并返回html字符串给浏览器.</li><li>如果请求为POST,先解析浏览器发送过来的request字符串,变为对象,分析传过来的数据,如格式,长度,密码是否相同等,账号是否存在,假如错误,则返回状态码400,并返回错误信息给浏览器.</li><li>假如都正确,则写入数据库,返回状态码200.</li></ol><h4 id="用户登录程中浏览器与服务器发生了什么"><a href="#用户登录程中浏览器与服务器发生了什么" class="headerlink" title="用户登录程中浏览器与服务器发生了什么?"></a>用户登录程中浏览器与服务器发生了什么?</h4><h5 id="前端-浏览器-1"><a href="#前端-浏览器-1" class="headerlink" title="前端(浏览器)"></a>前端(浏览器)</h5><ol><li>HTML里做一个Form表单,填入账号,Email,密码,确认密码等信息.</li><li>HTML表单里每行隐藏一个span标签,显示error属性.</li><li>用JS获取用户填入的信息后,先进行前端认证,如填入的格式,密码是否相同等</li><li>假如错误,将错误信息返回给error标签,显示信息.</li><li>假如正确,用AJAX发送GET请求,路径为服务器端登陆页面,内容为账号密码.</li><li>服务器处理信息,返回给浏览器,并给浏览器一个Cookie假如验证成功则转跳页面,假如失败则错误提示.</li><li>以后每次进入该页面,HTTP请求头都会包含之前服务器所返回的Cookie.</li><li>页面渲染服务器传来这个Cookie的信息.</li></ol><h5 id="后端-服务器-1"><a href="#后端-服务器-1" class="headerlink" title="后端(服务器)"></a>后端(服务器)</h5><ol><li>假如用第一次登陆,服务器在数据库查询该账号的信息是否匹配.</li><li>假如不匹配,则返回401.</li><li>假如匹配.则返回200状态码,并返回一个Cookie给浏览器.并返回该Cookie对应的信息,渲染页面.</li><li>用户发送请求,请求中带该Cookie,则服务器返回相应的Cookie的信息的页面信息,给浏览器渲染.</li><li>用户发送请求,不带有该Cookie,则服务器返回共用的页面信息,交给浏览渲染.</li></ol>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>异步同步与回调</title>
      <link href="/2018/06/09/%E5%BC%82%E6%AD%A5%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%9B%9E%E8%B0%83/"/>
      <url>/2018/06/09/%E5%BC%82%E6%AD%A5%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%9B%9E%E8%B0%83/</url>
      
        <content type="html"><![CDATA[<h3 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h3><p>不等结果,直接进行下一步</p><h5 id="异步与同步例子"><a href="#异步与同步例子" class="headerlink" title="异步与同步例子"></a>异步与同步例子</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> 异步()&#123;<br>    setTimeout(<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        console.log(<span class="hljs-string">'异步做事'</span>);<br>    &#125;,5000)<br>&#125;<br><br><br><span class="hljs-keyword">function</span> 同步()&#123;<br>    console.log(<span class="hljs-string">'同步做事'</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>调用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">异步();<br>console.log(1);<br>//1<br>//异步做事<br></code></pre></td></tr></table></figure></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">同步();<br>console.log(1);<br>//同步做事<br>//1<br></code></pre></td></tr></table></figure><p>如果是做完事再打1 —同步<br>如果是不做完就打1 —异步</p><h3 id="回调"><a href="#回调" class="headerlink" title="回调"></a>回调</h3><p>回调是拿到异步结果的一种方式,回调也可以拿同步结果.<br>fn1将别人传给它的fn2调用了,这种调用就是回调.</p><h5 id="使用异步回调"><a href="#使用异步回调" class="headerlink" title="使用异步回调"></a>使用异步回调</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> fn1(callback)&#123;<br>    var n = 0;<br>    var id = setInterval(()=&gt;&#123;<br>        console.log(n);<br>        n += 1;<br>        <span class="hljs-keyword">if</span>(n &gt;= 5)&#123;<br>        window.clearInterval(id);<br>        callback();<br>        &#125;<br>    &#125;,500)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">fn2</span></span>()&#123;<br>    console.log(<span class="hljs-string">'异步结束后再回调该函数'</span>);<br>&#125;<br><br>fn1(()=&gt;&#123;<br>    fn2();<br>&#125;);<br></code></pre></td></tr></table></figure><p>当打印完n后,,再执行回调函数</p>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>面向对象编程</title>
      <link href="/2018/06/07/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/"/>
      <url>/2018/06/07/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h3 id="面向对象编程"><a href="#面向对象编程" class="headerlink" title="面向对象编程"></a>面向对象编程</h3><p>Object  - Oriented</p><p>OOP </p><p>以对象为面向的编程</p><h4 id="请背诵"><a href="#请背诵" class="headerlink" title="请背诵:"></a>请背诵:</h4><h5 id="Class-类"><a href="#Class-类" class="headerlink" title="Class 类"></a>Class 类</h5><p>定义对象的特征。它是对象的属性和方法的模板定义.</p><h5 id="Object-对象"><a href="#Object-对象" class="headerlink" title="Object 对象"></a>Object 对象</h5><p>类的一个实例。</p><h5 id="Property-属性"><a href="#Property-属性" class="headerlink" title="Property 属性"></a>Property 属性</h5><p>对象的特征，比如颜色。</p><h5 id="Method-方法"><a href="#Method-方法" class="headerlink" title="Method 方法"></a>Method 方法</h5><p>对象的能力，比如行走。</p><h5 id="Constructor-构造函数"><a href="#Constructor-构造函数" class="headerlink" title="Constructor 构造函数"></a>Constructor 构造函数</h5><p>对象初始化的瞬间, 被调用的方法. 通常它的名字与包含它的类一致.</p><h5 id="Inheritance-继承"><a href="#Inheritance-继承" class="headerlink" title="Inheritance 继承"></a>Inheritance 继承</h5><p>一个类可以继承另一个类的特征。</p><h5 id="Encapsulation-封装"><a href="#Encapsulation-封装" class="headerlink" title="Encapsulation 封装"></a>Encapsulation 封装</h5><p>一种把数据和相关的方法绑定在一起使用的方法.</p><h5 id="Abstraction-抽象"><a href="#Abstraction-抽象" class="headerlink" title="Abstraction 抽象"></a>Abstraction 抽象</h5><p>结合复杂的继承，方法，属性的对象能够模拟现实的模型。</p><h5 id="Polymorphism-多态"><a href="#Polymorphism-多态" class="headerlink" title="Polymorphism 多态"></a>Polymorphism 多态</h5><p>多意为‘许多’，态意为‘形态’。不同类可以定义相同的方法或属性。</p><h4 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间:"></a>命名空间:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">var a = a || &#123;&#125;;<br></code></pre></td></tr></table></figure><p>对于<br>a || b<br>c &amp;&amp; d</p><p>值基本不可能是true/fasle</p><p>&amp;&amp; 找第一个fasle值<br>例如<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">1 &amp;&amp; 0 &amp;&amp; 1<br></code></pre></td></tr></table></figure></p><p>返回0<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">1 &amp;&amp; 0 &amp;&amp; console.log(2)<br>返回0,并且console.log不执行<br></code></pre></td></tr></table></figure></p><p>|| 找第一个true值<br>例如<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">var a = b || &#123;&#125;<br>返回&#123;&#125;<br></code></pre></td></tr></table></figure></p><h4 id="类Class"><a href="#类Class" class="headerlink" title="类Class"></a>类Class</h4><p>造一个模板</p><h5 id="View"><a href="#View" class="headerlink" title="View"></a>View</h5><p>封装view<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">window.View = <span class="hljs-keyword">function</span>(selector)&#123;<br>    <span class="hljs-built_in">return</span> document.querySelector(selector)<br>&#125;<br></code></pre></td></tr></table></figure></p><p>引用View<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">var view = View(<span class="hljs-string">'#leaveMessages'</span>);<br></code></pre></td></tr></table></figure></p><h5 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h5><p>封装Model<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">window.Model = <span class="hljs-keyword">function</span>(options)&#123;<br>    <span class="hljs-built_in">let</span> resourceName = options.resourceName;<br>    <span class="hljs-built_in">return</span> &#123;<br>        init:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            var APP_ID = <span class="hljs-string">'6lvWkua1rf93YuTrlvBN8GVR-gzGzoHsz'</span>;<br>            var APP_KEY = <span class="hljs-string">'uPlBTdzbkh8JANXfgEN8j0Lv'</span>;<br>            AV.init(&#123;<br>            appId: APP_ID,<br>            appKey: APP_KEY&#125;)<br>        &#125;,<br>        fetch:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            var query = new AV.Query(resourceName);<br>            <span class="hljs-built_in">return</span> query.find();<br>        &#125;,<br>        save:<span class="hljs-keyword">function</span>(username,content)&#123;<br>            var Messages = AV.Object.extend(resourceName);<br>            var messages = new Messages();<br>            <span class="hljs-built_in">return</span> messages.save(object)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>调用Model</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">var model = Model(&#123;resourceName:<span class="hljs-string">'Messages'</span>&#125;);<br> model.init();<br> model.fetch();<br> model.save(&#123;<span class="hljs-string">'username'</span>: username,<span class="hljs-string">'content'</span>:content&#125;);<br></code></pre></td></tr></table></figure><h5 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h5><p>封装Controller</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">window.Controller = <span class="hljs-keyword">function</span>(options)&#123;<br>    var init = options.init;<br>    <span class="hljs-built_in">let</span> object = &#123;<br>        view: null,<br>        model: null,<br>        init: <span class="hljs-keyword">function</span>(view,model)&#123;<br>            this.view = view;<br>            this.model = model;<br>            this.model.init();<br>            init.call(this,view,model);<br>            options.bindEvents.call(this);<br>        &#125;,<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> key <span class="hljs-keyword">in</span> options)&#123;<br>        <span class="hljs-keyword">if</span>(key !== <span class="hljs-string">'init'</span>)&#123;<br>            object[key] = options[key]<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>调用Controller</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs bash">var controller = Controller(&#123;<br>        init: <span class="hljs-keyword">function</span>(view,controller)&#123;<br>            this.messageList = view.querySelector(<span class="hljs-string">'#messageList'</span>);<br>            this.form = view.querySelector(<span class="hljs-string">'form'</span>);<br>            this.loadMessages();<br>        &#125;,<br>        loadMessages: <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            this.model.fetch().<span class="hljs-keyword">then</span>(<br>                (messages) =&gt; &#123;<br>                    <span class="hljs-built_in">let</span> array = messages.map((item) =&gt; item.attributes);<br>                    array.forEach((item) =&gt; &#123;<br>                        <span class="hljs-built_in">let</span> li = document.createElement(<span class="hljs-string">'li'</span>);<br>                        li.innerText = `<span class="hljs-variable">$&#123;item.username&#125;</span> : <span class="hljs-variable">$&#123;item.content&#125;</span>`;<br>                        this.messageList.appendChild(li);<br>                    &#125;)<br>                &#125;<br>            )<br>        &#125;,<br>        bindEvents: <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            this.form.addEventListener(<span class="hljs-string">'submit'</span>,(e) =&gt; &#123;<br>                e.preventDefault();<br>                this.saveMessage();<br>            &#125;)<br>        &#125;,<br>        saveMessage: <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            <span class="hljs-built_in">let</span> myForm = this.form;<br>            <span class="hljs-built_in">let</span> content = myForm.querySelector(<span class="hljs-string">'input[name=content]'</span>).value;<br>            <span class="hljs-built_in">let</span> username = myForm.querySelector(<span class="hljs-string">'input[name=username]'</span>).value;<br>            <span class="hljs-keyword">if</span>(content !== <span class="hljs-string">''</span> &amp;&amp; username !== <span class="hljs-string">''</span>)&#123;<br>                this.model.save(username,content).<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span>(object)&#123;<br>                    <span class="hljs-built_in">let</span> li = document.createElement(<span class="hljs-string">'li'</span>);<br>                    li.innerText = `<span class="hljs-variable">$&#123;object.attributes.username&#125;</span> : <span class="hljs-variable">$&#123;object.attributes.content&#125;</span>`;<br>                    <span class="hljs-built_in">let</span> messagesList = document.querySelector(<span class="hljs-string">'#messageList'</span>);<br>                    messagesList.appendChild(li);<br>                    myForm.querySelector(<span class="hljs-string">'input[name=content]'</span>).value = <span class="hljs-string">''</span>;<br>                &#125;)<br>          &#125;<span class="hljs-keyword">else</span>  &#123;<br>              alert(<span class="hljs-string">'请输入用户名或者留言内容'</span>);<br>          &#125;<br>        &#125;<br>    &#125;<br>);<br></code></pre></td></tr></table></figure><h4 id="如何寻找this"><a href="#如何寻找this" class="headerlink" title="如何寻找this?"></a>如何寻找this?</h4><ol><li><p>controller === object</p></li><li><p>controller.init(view, model)<br>controller.init.call(controller, view, model)<br>那么 controller.init 里面的 this 当然 TM 是 controller<br>也就是这个1里面的object<br>controller.init 里面的 this 就是 object<br>object.init 里面的 this 就是 object</p></li></ol><ol start="3"><li>initB.call(this)<br>initB 里面的 this === call 后面的this<br>call 后面 this === 第二条里的 this<br>第二条里面的 this === object<br>=&gt; initB 里面的 this 就是 object</li></ol><h4 id="复习this"><a href="#复习this" class="headerlink" title="复习this"></a>复习this</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">X</span></span>()&#123;<br>    <span class="hljs-built_in">return</span> object = &#123;<br>        name:<span class="hljs-string">'object'</span>,<br>        f1(x)&#123;<br>            x.f2();<br>        &#125;,<br>        <span class="hljs-function"><span class="hljs-title">f2</span></span>()&#123;<br>            console.log(this); //A<br>        &#125;<br>    &#125;<br>&#125;<br><br>var options = &#123;<br>    name:<span class="hljs-string">'options'</span>,<br>    <span class="hljs-function"><span class="hljs-title">f1</span></span>()&#123;&#125;,<br>    <span class="hljs-function"><span class="hljs-title">f2</span></span>()&#123;<br>        console.log(this); //B<br>    &#125;<br>&#125;<br><br>var x = X();<br>x.f1(options);<br></code></pre></td></tr></table></figure><p>B options</p><p>why?</p><p>x=X(),那么X().f1(options)<br>X()return object,那么object.f1(options)<br>object里的f1那么就是f1(x){x.f2()}<br>x是options,那么就是f1(options){options.f2()};<br>f2是console.log(this),this是options,打印options</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">X</span></span>()&#123;<br>    <span class="hljs-built_in">return</span> object = &#123;<br>        name:<span class="hljs-string">'object'</span>,<br>        f1(x)&#123;<br>            x.f2.call(this);<br>        &#125;,<br>        <span class="hljs-function"><span class="hljs-title">f2</span></span>()&#123;<br>            console.log(this); //C <br>        &#125;<br>    &#125;<br>&#125;<br><br>var options = &#123;<br>    name:<span class="hljs-string">'options'</span>,<br>    <span class="hljs-function"><span class="hljs-title">f1</span></span>()&#123;&#125;,<br>    <span class="hljs-function"><span class="hljs-title">f2</span></span>()&#123;<br>        console.log(this);  //D<br>    &#125;<br>&#125;<br><br>var x = X();<br>x.f1(options);<br></code></pre></td></tr></table></figure><p>D object</p><p>why?</p><p>x.f2.call(this) this === object<br>x.f2 === options.console.log(this)<br>this === object</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">X</span></span>()&#123;<br>    <span class="hljs-built_in">return</span> object = &#123;<br>        name:<span class="hljs-string">'object'</span>,<br>        options:null,<br>        f1(x)&#123;<br>            this.options = x;<br>            this.f2();<br>        &#125;,<br>        <span class="hljs-function"><span class="hljs-title">f2</span></span>()&#123;<br>            this.options.f2.call(this);<br>        &#125;<br>    &#125;<br>&#125;<br><br>var options = &#123;<br>    name:<span class="hljs-string">'options'</span>,<br>    <span class="hljs-function"><span class="hljs-title">f1</span></span>()&#123;&#125;,<br>    <span class="hljs-function"><span class="hljs-title">f2</span></span>()&#123;<br>        console.log(this);  //this === ?<br>    &#125;<br>&#125;<br><br>var x = X();<br>x.f1(options);<br></code></pre></td></tr></table></figure><p>this === object;</p><p>why?</p><p>this = object;<br>object.options = x;//object.options = options;<br>this.f2() === object.f2() === object.options.f2.call(this);</p><h4 id="new"><a href="#new" class="headerlink" title="new"></a>new</h4><p>var object = new Object();</p><p>自有属性 空</p><p>oject.<strong>proto</strong> === Object.prototype;</p><p>var array = new Array(‘a’,’b’,’c’);</p><p>自有属性 0:’a’,1:’b’,2:’c’,length:3</p><p>array.<strong>proto</strong> === Array.prototype;<br>Array.prototype.<strong>proto</strong> === Object.prototype;</p><p>Array is a function!<br>Array.<strong>proto</strong> === function.prototype;</p><p>构造一个new</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> Human(options)&#123;<br>   this.name = options.name;<br>   this.city = options.city;<br>&#125;<br><br>Human.prototype.species = <span class="hljs-string">'Human'</span>;<br>Human.prototype.walk = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;&#125;;<br>Human.prototype.useTools = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;&#125;;<br></code></pre></td></tr></table></figure><p>调用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">var human = new Human(&#123;name:<span class="hljs-string">'Frank'</span>, city: <span class="hljs-string">'Hangzhou'</span>&#125;)<br>var human2 = new Human(&#123;name:<span class="hljs-string">'Jack'</span>, city: <span class="hljs-string">'Hangzhou'</span>&#125;)<br></code></pre></td></tr></table></figure></p><p>其中<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">human.__proto__.constructor === Human //<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MVC与Leancloud数据库使用</title>
      <link href="/2018/06/06/MVC%E4%B8%8ELeancloud%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%BF%E7%94%A8/"/>
      <url>/2018/06/06/MVC%E4%B8%8ELeancloud%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>Unsplash 找图</p><h3 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h3><h4 id="M-Model-模块化操作数据"><a href="#M-Model-模块化操作数据" class="headerlink" title="M:Model 模块化操作数据"></a>M:Model 模块化操作数据</h4><p>把JS分文件</p><h4 id="解决全局变量-用闭包-匿名函数"><a href="#解决全局变量-用闭包-匿名函数" class="headerlink" title="解决全局变量,用闭包,匿名函数"></a>解决全局变量,用闭包,匿名函数</h4><p>!function(){}.call();</p><p>(function(){}).call();不推荐</p><p>使用window.xxx读取函数信息</p><p>第一个函数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">!<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    var person = &#123;<br>        name : <span class="hljs-string">'frank'</span>,<br>        age : 18<br>    &#125;<br>    window.frankGrowUp = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        person.age += 1;<br>        <span class="hljs-built_in">return</span> person.age;<br>    &#125;<br>&#125;.call();<br></code></pre></td></tr></table></figure><p>另外一个函数<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">!<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    var frankGrowUp = window.frankGrowUp;<br>    console.log(frankGrowUp);<br>&#125;.call();<br></code></pre></td></tr></table></figure></p><h4 id="如何使用闭包"><a href="#如何使用闭包" class="headerlink" title="如何使用闭包"></a>如何使用闭包</h4><ol><li>立即执行函数使得 person 无法被外部访问</li><li>闭包使得匿名函数可以操作 person</li><li>window.frankGrowUp 保存了匿名函数的地址</li><li>任何地方都可以使用 window.frankGrowUp<br> =&gt; 任何地方都可以使用 window.frankGrowUp 操作 person，但是不能直接访问 person</li></ol><h4 id="立即执行函数"><a href="#立即执行函数" class="headerlink" title="立即执行函数"></a>立即执行函数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">var accessor =  <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    var person = &#123;<br>        name : <span class="hljs-string">'frank'</span>,<br>        age : 18<br>    &#125;<br>    <span class="hljs-built_in">return</span> <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        person.age += 1;<br>        <span class="hljs-built_in">return</span> person.age;<br>    &#125;<br>&#125;<br><br>var growUp = accessor().call(); //实际是执行 <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;person.age +=1;<span class="hljs-built_in">return</span> person.age&#125;;<br><br>growUp.call(); //实际是执行 person.age<br></code></pre></td></tr></table></figure><h3 id="MVC的V和C"><a href="#MVC的V和C" class="headerlink" title="MVC的V和C"></a>MVC的V和C</h3><h4 id="V-View-视图-即用户看得见的"><a href="#V-View-视图-即用户看得见的" class="headerlink" title="V:View 视图,即用户看得见的."></a>V:View 视图,即用户看得见的.</h4><p>JS代码加入<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">var view = docmuent.querySelector(<span class="hljs-string">''</span>);<br></code></pre></td></tr></table></figure></p><h4 id="C-Controller-控制器"><a href="#C-Controller-控制器" class="headerlink" title="C:Controller 控制器"></a>C:Controller 控制器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">var controller = &#123;<br>    view: null,<br>    init: <span class="hljs-keyword">function</span>(view)&#123;<br>        this.view = view;<br>        this.bindEvents();<br>        // this.bindEvents.call(this);<br>    &#125;,<br>    bindEvents : <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        var view = this.view;<br>        //代码<br>    &#125;<br>&#125;.<br><br>contorller.init.(view);<br>// controller.init.call(controller, view);<br></code></pre></td></tr></table></figure><h5 id="对象调用一个函数-那么this就是这个对象"><a href="#对象调用一个函数-那么this就是这个对象" class="headerlink" title="对象调用一个函数,那么this就是这个对象"></a>对象调用一个函数,那么this就是这个对象</h5><ol><li>可以用bind(this)绑定this;</li><li>可以用箭头函数,箭头函数没有this,它this就是外面的this;</li></ol><h4 id="引入数据库"><a href="#引入数据库" class="headerlink" title="引入数据库:"></a>引入数据库:</h4><ol><li>创建一个应用</li><li>引入av-min.js 得到window.AV</li><li>初始化AV对象(代码直接拷)</li><li>新建一条数据(代码直接拷)</li></ol><p>表单提交监听事件 </p><p>不监听button.click是因为也要监听回车.<br>但form.addEventListener(‘sumbmit’,()=&gt;{})中的sumbit包含点击事件与回车事件.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> myForm = document.querySelector(<span class="hljs-string">'#postMessageForm'</span>);<br>myForm.addEventListener(<span class="hljs-string">'submit'</span>,<span class="hljs-keyword">function</span>(e)&#123;<br>    e.preventDefault();<br>    <span class="hljs-built_in">let</span> content = myForm.querySelector(<span class="hljs-string">'input[name=content]'</span>).value;<br>    var Message = AV.Object.extend(<span class="hljs-string">'Message'</span>);<br>    var message = new Message();<br>    message.save(&#123;<br>        <span class="hljs-string">'content'</span> : content<br>    &#125;).<span class="hljs-keyword">then</span>(<span class="hljs-keyword">function</span>(object)&#123;<br>        <span class="hljs-built_in">let</span> li = document.createElement(<span class="hljs-string">'li'</span>);<br>        li.innerText = `<span class="hljs-variable">$&#123;object.attributes.name&#125;</span> : <span class="hljs-variable">$&#123;object.attributes.content&#125;</span>`;<br>        <span class="hljs-built_in">let</span> messageList = document.querySelector(<span class="hljs-string">'#messageList'</span>);<br>        messageList.appendChild(li);<br>        myForm.querySelector(<span class="hljs-string">'input[name=content]'</span>).value = <span class="hljs-string">''</span>;<br>    &#125;)<br>&#125;)<br></code></pre></td></tr></table></figure></p><p>页面读取数据库信息:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">var query = new AV.Query(<span class="hljs-string">'Message'</span>);<br>query.find()<br>    .<span class="hljs-keyword">then</span>(<br>        <span class="hljs-keyword">function</span>(messages)&#123;<br>            <span class="hljs-built_in">let</span> array = messages.map((item)=&gt; item.attributes);<br>            array.forEach((item)=&gt;&#123;<br>                <span class="hljs-built_in">let</span> li = document.createElement(<span class="hljs-string">'li'</span>);<br>                li.innerText = `<span class="hljs-variable">$&#123;item.name&#125;</span> : <span class="hljs-variable">$&#123;item.content&#125;</span>`;<br>                <span class="hljs-built_in">let</span> messageList = document.querySelector(<span class="hljs-string">'#messageList'</span>);<br>                messageList.appendChild(li);<br>            &#125;)<br>        &#125;<br>    )<br></code></pre></td></tr></table></figure></p><h4 id="MVC总结"><a href="#MVC总结" class="headerlink" title="MVC总结"></a>MVC总结</h4><ol><li>Model 操作数据</li><li>View 表示视图</li><li>Controller 是控制器</li></ol><p>Model 和服务器交互，Model 将得到的数据交给 Controller，Controller 把数据填入 View，并监听 View<br>用户操作 View，如点击按钮，Controller 就会接受到点击事件，Controller 这时会去调用 Model，Model 会与服务器交互，得到数据后返回给 Controller，Controller 得到数据就去更新 View</p>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从一个页面输入URL到页面显示完成,这个过程中都发生了什么?</title>
      <link href="/2018/06/04/%E4%BB%8E%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E6%98%BE%E7%A4%BA%E5%AE%8C%E6%88%90-%E8%BF%99%E4%B8%AA%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/"/>
      <url>/2018/06/04/%E4%BB%8E%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E6%98%BE%E7%A4%BA%E5%AE%8C%E6%88%90-%E8%BF%99%E4%B8%AA%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/</url>
      
        <content type="html"><![CDATA[<ol><li><p>浏览器地址栏输入url</p></li><li><p>浏览器会先查看浏览器缓存–系统缓存–路由缓存，如有存在缓存，就直接显示。如果没有，接着第三步</p></li><li><p>域名解析（DNS）获取相应的ip</p></li><li><p>浏览器向服务器发起tcp连接，与浏览器建立tcp三次握手</p></li><li><p>握手成功，浏览器向服务器发送http请求，请求数据包</p></li><li><p>服务器请求数据，将数据返回到浏览器</p></li><li><p>浏览器接收响应，读取页面内容，解析html源码，生成DOm树</p></li><li><p>解析css样式、浏览器渲染，js交互</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AJAX</title>
      <link href="/2018/05/31/AJAX/"/>
      <url>/2018/05/31/AJAX/</url>
      
        <content type="html"><![CDATA[<h4 id="AJAX是什么"><a href="#AJAX是什么" class="headerlink" title="AJAX是什么?"></a>AJAX是什么?</h4><p>异步的JavaScript和XML</p><ol><li>使用XMLHttpRequest发送请求</li><li>服务器返回XML格式的字符串</li><li>JS解析XML,并更新局部页面</li></ol><h5 id="现在已经很少用XML-都在用JSON"><a href="#现在已经很少用XML-都在用JSON" class="headerlink" title="现在已经很少用XML,都在用JSON!"></a>现在已经很少用XML,都在用JSON!</h5><h4 id="写一个简单的AJAX"><a href="#写一个简单的AJAX" class="headerlink" title="写一个简单的AJAX:"></a>写一个简单的AJAX:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> request = new XMLHttpRequest();<br>request.open(<span class="hljs-string">'GET'</span>,<span class="hljs-string">'http://localhost:8001'</span>);<br>request.onreadystatechange = () =&gt; &#123;<br>    <span class="hljs-keyword">if</span>(request.readyState ===4)&#123;<br>        console.log(<span class="hljs-string">'响应完毕'</span>);<br>        <span class="hljs-keyword">if</span>(request.status =&gt; 200 &amp;&amp; request.status &lt; 300 || request.status === 304)&#123;<br>            console.log(<span class="hljs-string">'请求成功'</span>);<br>            <span class="hljs-built_in">let</span> string  = request.responseText;<br>            <span class="hljs-built_in">let</span> objcet  = window.JSON.parse(string);<br>        &#125;<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(request.status &gt;= 400)&#123;<br>        console.log(<span class="hljs-string">'请求失败'</span>)<br>    &#125;<br>&#125;<br>request.send();<br></code></pre></td></tr></table></figure><h4 id="readyState-请求状态"><a href="#readyState-请求状态" class="headerlink" title="readyState 请求状态"></a>readyState 请求状态</h4><p>有五种状态:</p><p>0 open()方法还未被调用.<br>1 send()方法还未被调用.<br>2 send()方法已被调用,响应头和响应状态已经返回.<br>3 响应体下载中;responseText中已获取了部分数据.<br>4 整个请求过程已经完毕.</p><h4 id="request-status-返回请求的状态码"><a href="#request-status-返回请求的状态码" class="headerlink" title="request.status 返回请求的状态码"></a>request.status 返回请求的状态码</h4><h4 id="request-responseText-返回的字符串"><a href="#request-responseText-返回的字符串" class="headerlink" title="request.responseText 返回的字符串"></a>request.responseText 返回的字符串</h4><h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><h5 id="JS-VS-JSON"><a href="#JS-VS-JSON" class="headerlink" title="JS VS JSON"></a>JS VS JSON</h5><ol><li>JSON 没有undefined和funtion</li><li>JSON 字符串的首尾必须是双引号””</li></ol><p>具体对比</p><p>undefined      没有<br>null           null<br>[‘a’,’b’]      [“a”,”b”]<br>function(){}   没有<br>{name:’roxas’} {“name”:”roxas”}<br>‘roxas’        “roxas”<br>var a = {}<br>a.self  = a    搞不定(没有变量)<br>{<strong>proto</strong>}    没有原型链</p><h4 id="JS使用JSON"><a href="#JS使用JSON" class="headerlink" title="JS使用JSON"></a>JS使用JSON</h4><p>一个JSON对象</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<br>    <span class="hljs-string">"notes"</span>:&#123;<br>        <span class="hljs-string">"from"</span>:<span class="hljs-string">"roxas"</span>,<br>        <span class="hljs-string">"to"</span>:<span class="hljs-string">"养蛇"</span>,<br>        <span class="hljs-string">"title"</span>:<span class="hljs-string">"打招呼"</span>,<br>        <span class="hljs-string">"contant"</span>:<span class="hljs-string">"你好"</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>JS代码使用JSON</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> request = new XMLHttprequest();<br>request.open(<span class="hljs-string">'GET'</span>,<span class="hljs-string">'URL'</span>)  //配置request<br>request.onreadystatechange = ()=&gt;&#123;<br>    <span class="hljs-keyword">if</span>(request.readyState === 4) &#123;<br>        <span class="hljs-keyword">if</span>(request.status &gt;= 200 &amp;&amp; request.status &lt;300 || request.status === 304)&#123;<br>            <span class="hljs-built_in">let</span> string = request.responseText;<br>            // 把符合 JSON 语法的字符串转换成JS对应的值<br>            <span class="hljs-built_in">let</span> object = window.JSON.parse(string);<br>            console.log(object);<br>        &#125;esle <span class="hljs-keyword">if</span>(request.status &gt;= 400)&#123;<br>            console.log(<span class="hljs-string">'说明请求失败'</span>);<br>        &#125;<br>    &#125;<br>&#125;<br>request.send();<br></code></pre></td></tr></table></figure><p>后端代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(path===<span class="hljs-string">'url'</span>)&#123;<br>    response.statusCode = 200<br>    response.setHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/json;charset=utf-8'</span>)<br>    response.setHeader(<span class="hljs-string">'Access-Control-Allow-Origin'</span>, <span class="hljs-string">'http://localhsot:8001'</span>)<br>    response.write(`<br>    &#123;<br>    <span class="hljs-string">"notes"</span>:&#123;<br>        <span class="hljs-string">"from"</span>:<span class="hljs-string">"roxas"</span>,<br>        <span class="hljs-string">"to"</span>:<span class="hljs-string">"养蛇"</span>,<br>        <span class="hljs-string">"title"</span>:<span class="hljs-string">"打招呼"</span>,<br>        <span class="hljs-string">"contant"</span>:<span class="hljs-string">"你好"</span><br>        &#125;<br>    &#125;<br>    `)<br>    response.end()<br></code></pre></td></tr></table></figure><h4 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h4><h5 id="只有-协议-端口-域名-一模一样才允许发-AJAX-请求"><a href="#只有-协议-端口-域名-一模一样才允许发-AJAX-请求" class="headerlink" title="只有 协议+端口+域名 一模一样才允许发 AJAX 请求"></a>只有 协议+端口+域名 一模一样才允许发 AJAX 请求</h5><p>例:<br><a href="http://baidu.com" target="_blank" rel="noopener">http://baidu.com</a> 可以向 <a href="http://www.baidu.com" target="_blank" rel="noopener">http://www.baidu.com</a> 发 AJAX 请求吗 no<br><a href="http://baidu.com:80" target="_blank" rel="noopener">http://baidu.com:80</a> 可以向 <a href="http://baidu.com:81" target="_blank" rel="noopener">http://baidu.com:81</a> 发 AJAX 请求吗 no</p><p>CORS可以告诉浏览器,我俩一家的，别阻止他</p><h5 id="CORS-Cross-Origin-Resource-Sharing-跨源资源共享"><a href="#CORS-Cross-Origin-Resource-Sharing-跨源资源共享" class="headerlink" title="CORS:Cross-Origin Resource Sharing(跨源资源共享)"></a>CORS:Cross-Origin Resource Sharing(跨源资源共享)</h5><p>响应的服务器(8001)代码加入响应头:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">response.setHeader(<span class="hljs-string">'Access-Control-Allow-Origin'</span>, <span class="hljs-string">'http://localhsot:8002'</span>)<br></code></pre></td></tr></table></figure></p><p>AJXA获取请求与响应的所有信息</p><h4 id="请求"><a href="#请求" class="headerlink" title="请求:"></a>请求:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">POST / HTTP/1.1<br>HOST: localhost:8001<br>Content-Type:application/x-www-url-encoded<br><br>a=1&amp;b=2<br></code></pre></td></tr></table></figure><p>第一部分:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">request.open(<span class="hljs-string">'POST'</span>,<span class="hljs-string">'http://localhost:8001'</span>)<br></code></pre></td></tr></table></figure></p><p>第二部分:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">request.setHeader(<span class="hljs-string">'Content-Type'</span>,<span class="hljs-string">'x-www-form-urlencoded'</span>)<br></code></pre></td></tr></table></figure></p><p>第四部分:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">request.send(<span class="hljs-string">'a=1&amp;b=2'</span>)<br></code></pre></td></tr></table></figure></p><h5 id="响应"><a href="#响应" class="headerlink" title="响应:"></a>响应:</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">HTTP/1.1 200 OK<br>Content-Type: text/html<br><br>&lt;!DOCTYPE html&gt;<br>&lt;html&gt;...&lt;/html&gt;<br></code></pre></td></tr></table></figure><p>第一部分:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">request.status //200<br>request.statusText //OK<br></code></pre></td></tr></table></figure></p><p>第二部分:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">request.getResponseHeader() //获得值<br>或<br>request.getResponseHeaders() //获得<span class="hljs-built_in">hash</span><br></code></pre></td></tr></table></figure></p><p>第四部分:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">request.responseText<br></code></pre></td></tr></table></figure></p><h4 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h4><p>函数用参数是一个函数,参数名字为callback</p><p>call a function<br>call a function  back</p><p>callback</p><p>callback  === function</p><h4 id="ES6语法-解构赋值"><a href="#ES6语法-解构赋值" class="headerlink" title="ES6语法 解构赋值"></a>ES6语法 解构赋值</h4><p>ES5<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> method = options.method;<br><span class="hljs-built_in">let</span> body = options.body;<br><span class="hljs-built_in">let</span> successFn = options.successFn;<br><span class="hljs-built_in">let</span> failFn = options.failFn;<br><span class="hljs-built_in">let</span> headers = options.headers;<br></code></pre></td></tr></table></figure></p><p>ES6<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> &#123;method,body,successFn,failFn,headers&#125; = option<br></code></pre></td></tr></table></figure></p><h4 id="封装jQuery-ajax"><a href="#封装jQuery-ajax" class="headerlink" title="封装jQuery.ajax"></a>封装jQuery.ajax</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs bash">// 选择器,不用看<br>var jQuery = <span class="hljs-keyword">function</span>(nodeOrSelector)&#123;<br>    <span class="hljs-built_in">let</span> nodes = &#123;&#125;<br>    <span class="hljs-keyword">if</span>(typeof nodeOrSelector === <span class="hljs-string">'string'</span>)&#123;<br>        <span class="hljs-built_in">let</span> temp = document.querySelectorAll(nodeOrSelector);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> i = 0;i&lt;temp.length;i++)&#123;<br>            nodes[i] = temp[i]<br>        &#125;<br>        nodes.length = temp.length;<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(nodeOrSelector instanceof Node)&#123;<br>        nodes = &#123;<br>            0:nodeOrSelector,<br>            length:1<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">return</span> &#123;<br>        addClass:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;&#125;,<br>        setText:<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;&#125;<br>    &#125;<br>&#125;<br>window.jQuery = jQuery;<br>window.$ = jQuery;<br>//以下为ajxa代码<br><br>window.jQuery.ajax = <span class="hljs-keyword">function</span>(&#123;url,method,body,headers&#125;)&#123;<br>    <span class="hljs-built_in">return</span> new Promise(<span class="hljs-keyword">function</span>(resolve,reject)&#123;<br>        <span class="hljs-built_in">let</span> request = new XMLHttprequest();<br>        request.open(method,url);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">let</span> key <span class="hljs-keyword">in</span> headers)&#123;<br>            <span class="hljs-built_in">let</span> value = headers[key];<br>            request.setRequestHeader(key,value)<br>        &#125;<br>        request.onreadystatechange = ()=&gt;&#123;<br>            <span class="hljs-keyword">if</span>(request.readystates === 4)&#123;<br>                <span class="hljs-keyword">if</span>(request.status &gt;= 200 &amp;&amp; request.status &lt; 300)&#123;<br>                    resolve.call(undefined,request.responseText);<br>                &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(request.status &gt;= 400)&#123;<br>                    reject.call(undefined,request)<br>                &#125;<br>            &#125;<br>        &#125;<br>        request.send(body);<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h4><p>return new Promise (function(resolve,reject){})</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">xxx</span></span>()&#123;<br>    <span class="hljs-built_in">return</span> new Promise((f1,f2)=&gt;&#123;<br>        doSometing();<br>        setTimeout(()=&gt;&#123;<br>            //成功就调用f1,失败就调用f2<br>        &#125;,3000)<br>    &#125;)<br>&#125;<br><br>xxx().<span class="hljs-keyword">then</span>(success,fail);<br>//链式操作<br><br>xxx().<span class="hljs-keyword">then</span>(success,fail).<span class="hljs-keyword">then</span>(success,fail);<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSONP</title>
      <link href="/2018/05/30/JSONP/"/>
      <url>/2018/05/30/JSONP/</url>
      
        <content type="html"><![CDATA[<h4 id="什么是JSONP"><a href="#什么是JSONP" class="headerlink" title="什么是JSONP"></a>什么是JSONP</h4><h5 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP:"></a>JSONP:</h5><p>请求方:浏览器<br>响应方:服务器</p><ol><li>请求方创建script,src指向响应方,同时传递一个查询参数 ?callback=functionName;</li><li>响应方根据查询参数callback,构造函数functionName.call(undefined,’数据’);</li><li>浏览器接受到响应,就会执行functionName.call(undefined,’数据’);</li><li>那么请求方就知道了他要的数据</li></ol><p>按照约定:</p><ol><li>查询参数应为callback;</li><li>functionName -&gt; 随机名字</li></ol><h4 id="实现一个JOSNP"><a href="#实现一个JOSNP" class="headerlink" title="实现一个JOSNP"></a>实现一个JOSNP</h4><p>预览:<a href="https://github.com/roxas332519096/JSONP" target="_blank" rel="noopener">https://github.com/roxas332519096/JSONP</a></p><p>前端代码:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;script&gt;<br>    button.addEventListener(<span class="hljs-string">'click'</span>, (e)=&gt;&#123;<br>    <span class="hljs-built_in">let</span> script = document.createElement(<span class="hljs-string">'script'</span>) <br>    <span class="hljs-built_in">let</span> functionName = <span class="hljs-string">'frank'</span>+ parseInt(Math.random()*10000000 ,10)  // 每次请求之前搞出一个随机的函数<br>    window[functionName] = <span class="hljs-keyword">function</span>(result)&#123;<br>        <span class="hljs-keyword">if</span>(result === <span class="hljs-string">'success'</span>)&#123;<br>            amount.innerText = amount.innerText - 0 - 1<br>        &#125;<br>    &#125;<br>    script.src = <span class="hljs-string">'http://localhost:8002/pay?callback='</span> + functionName<br>    document.body.appendChild(script)<br>    script.onload = <span class="hljs-keyword">function</span>(e)&#123; <br>        e.currentTarget.remove()<br>        delete window[functionName] <br>    &#125;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></p><p>后端代码:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span>(path === <span class="hljs-string">'/'</span>)&#123;<br>    var string = fs.readFileSync(<span class="hljs-string">'./index.html'</span>,<span class="hljs-string">'utf8'</span>)<br>    var amount = fs.readFileSync(<span class="hljs-string">'./db'</span>, <span class="hljs-string">'utf8'</span>);<br>    string = string.replace(<span class="hljs-string">'&amp;&amp;&amp;amount&amp;&amp;&amp;'</span>, amount);<br>    response.setHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/html;charset=utf-8'</span>)<br>    response.write(string);<br>    response.end();<br>  &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(path === <span class="hljs-string">'/pay'</span>)&#123;<br>    var amount = fs.readFileSync(<span class="hljs-string">'./db'</span>, <span class="hljs-string">'utf8'</span>)<br>    amount -= 1<br>    fs.writeFileSync(<span class="hljs-string">'./db'</span>, amount);<br>    var callbackName = query.callback;<br>    response.setHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'application/javascript'</span>)<br>    response.statusCode = 200;<br>    response.write(`<br>        <span class="hljs-variable">$&#123;callbackName&#125;</span>.call(undefined, <span class="hljs-string">'success'</span>)<br>    `)<br>    response.end()<br>  &#125;<span class="hljs-keyword">else</span>&#123;<br>    response.statusCode = 404<br>    response.setHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/html;charset=utf-8'</span>)<br>    response.write(<span class="hljs-string">'找不到对应路径,你需要自行修改 index.html'</span>)<br>    response.end()<br>  &#125;<br></code></pre></td></tr></table></figure></p><h5 id="流程如下"><a href="#流程如下" class="headerlink" title="流程如下:"></a>流程如下:</h5><ol><li>浏览器8001点击按钮button</li><li>创建script,src指向8002/pay</li><li>创建随机名函数functionName</li><li>发送get请求,用查询参数?callback = functionName 传递函数名</li><li>服务器8002响应</li><li>当被指向pay执行以下命令</li><li>读取数据库db中的amout</li><li>amount = amount-1</li><li>将amount写入数据库</li><li>根据callback构造一个函数</li><li>调用函数functionName.call(undefined,’success’)</li><li>浏览器接收响应,根据输入参数success执行functionName函数</li><li>innerText - 1</li><li>删除script标签</li><li>假如刷新浏览器8001,重新读取修改后的数据库db,获得修改后的数据</li></ol><h4 id="原生JS的例子"><a href="#原生JS的例子" class="headerlink" title="原生JS的例子"></a>原生JS的例子</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">window.fn = <span class="hljs-keyword">function</span>(response)&#123;<br>    ///response是返回的数据<br>&#125;<br>var script = document.createElement(<span class="hljs-string">'script'</span>);<br>script.src = <span class="hljs-string">'http://api.douban.com/v2/movie/top250?callback=fn'</span>;<br>document.body.appendChild(script);<br>script.onload = <span class="hljs-keyword">function</span>(e)&#123;<br>    e.currentTarget.remove();<br>    delete window.fn;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="用jQuery实现JOSNP"><a href="#用jQuery实现JOSNP" class="headerlink" title="用jQuery实现JOSNP:"></a>用jQuery实现JOSNP:</h4><p>前端代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">$.ajax(&#123;<br>    url:<span class="hljs-string">'http://api.douban.com/v2/movie/top250'</span>,<br>    <span class="hljs-built_in">type</span>:<span class="hljs-string">'GET'</span>,<br>    data:&#123;<br>        start:0,<br>        count:20<br>    &#125;,<br>    dataType:<span class="hljs-string">'jsonp'</span><br>&#125;).<span class="hljs-keyword">done</span>(<span class="hljs-keyword">function</span>(respone)&#123;<br>    console.log(respone);<br>&#125;).fail(<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>    console.log(<span class="hljs-string">'error'</span>);<br>&#125;)<br></code></pre></td></tr></table></figure></p><h4 id="为什么JSONP不支持POST"><a href="#为什么JSONP不支持POST" class="headerlink" title="为什么JSONP不支持POST?"></a>为什么JSONP不支持POST?</h4><p>因为JSONP是通过动态创建script实现的,动态创建script只有get请求.</p>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DOM事件</title>
      <link href="/2018/05/29/DOM%E4%BA%8B%E4%BB%B6/"/>
      <url>/2018/05/29/DOM%E4%BA%8B%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h3 id="DOM-level-0"><a href="#DOM-level-0" class="headerlink" title="DOM level 0:"></a>DOM level 0:</h3><p>onclick = “要执行的代码”  //一旦用户点击,浏览器就eval(“要执行的代码”)</p><p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;script&gt;<br>    <span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">print</span></span>()&#123;console.log(<span class="hljs-string">''</span>hi)&#125;<br>&lt;/script&gt;<br>&lt;button id = X onclick = <span class="hljs-string">"print()"</span>&gt;<br></code></pre></td></tr></table></figure></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;script&gt;<br>X.onclick = <span class="hljs-built_in">print</span>  //类型为函数对象,对<br>Y.onclick = <span class="hljs-built_in">print</span>() //undefined,错<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h3 id="DOM-level-1-同DOM-level0"><a href="#DOM-level-1-同DOM-level0" class="headerlink" title="DOM level 1:同DOM level0;"></a>DOM level 1:同DOM level0;</h3><h3 id="DOM-level-2"><a href="#DOM-level-2" class="headerlink" title="DOM level 2:"></a>DOM level 2:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">X.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;&#125;) //队列,先进先出,先绑定先触发<br></code></pre></td></tr></table></figure><h4 id="与-X-onclick-function-区别"><a href="#与-X-onclick-function-区别" class="headerlink" title="与 X.onclick = function(){}区别:"></a>与 X.onclick = function(){}区别:</h4><p>这是一个属性,是唯一的,只能绑定一个onclick;<br>一次事件监听 X.one(‘click’,fn(){}) //添加后移除事件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">X.removeddEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;&#125;)<br></code></pre></td></tr></table></figure><p>祖先元素绑定事件模型:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;div id=<span class="hljs-string">"grand1"</span>&gt;<br>    爷爷<br>    &lt;div id=<span class="hljs-string">"parent"</span>&gt;<br>        爸爸<br>        &lt;div id=<span class="hljs-string">"child1"</span>&gt;儿子&lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    grand1.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">f1</span></span>()&#123;<br>        console.log(<span class="hljs-string">'爷爷'</span>)<br>    &#125;)<br>    parent1.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">f2</span></span>()&#123;<br>        console.log(<span class="hljs-string">'父亲'</span>)<br>    &#125;)<br>    child1.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">f3</span></span>()&#123;<br>        console.log(<span class="hljs-string">'儿子'</span>)<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></p><ol><li>当我点击儿子时,也相当于点击父亲和爷爷</li><li>当我点击儿子时,也相执行其绑定事件,执行f1 f2 f3;</li><li><p>X.addEventListener(‘click’,function f1(){},参数)<br>添加参数,默认是false<br>假如是false:从小到大(冒泡) f3 f2 f1 ,假如是true:从大到小(捕获) f1 f2 f3</p></li><li><p>假如同一个事件本身存在冒泡捕获,那么按照写的顺序执行<br>X.addEventListener(‘click’,function f1(){},false) //冒泡<br>X.addEventListener(‘click’,function f1(){},ture) //捕获</p></li></ol><h3 id="阻止祖先DOM事件触发"><a href="#阻止祖先DOM事件触发" class="headerlink" title="阻止祖先DOM事件触发"></a>阻止祖先DOM事件触发</h3><h4 id="点击其他地方关闭浮层"><a href="#点击其他地方关闭浮层" class="headerlink" title="点击其他地方关闭浮层"></a>点击其他地方关闭浮层</h4><h4 id="方案1"><a href="#方案1" class="headerlink" title="方案1:"></a>方案1:</h4><p>通过stopPropagation()方法阻止事件传播;<br>代码如下:</p><p>预览:<br><a href="https://roxas332519096.github.io/notes-demo/0528-点击其他地方关闭浮层方案1.html" target="_blank" rel="noopener">https://roxas332519096.github.io/notes-demo/0528-点击其他地方关闭浮层方案1.html</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;script&gt;<br>    clickMe.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-keyword">function</span>(e)&#123;<br>        popover.style.display = <span class="hljs-string">'block'</span>;<br>    &#125;)<br>    wrapper.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-keyword">function</span>(e)&#123;<br>            e.stopPropagation();<br>    &#125;)<br>    document.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-keyword">function</span>(e)&#123;<br>        popover.style.display = <span class="hljs-string">'none'</span>;<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="方案2"><a href="#方案2" class="headerlink" title="方案2:"></a>方案2:</h4><p>用jQuery的监听一次事件one()与setTimeout()</p><p>预览:<br><a href="https://roxas332519096.github.io/notes-demo/0528-点击其他地方关闭浮层方案2.html" target="_blank" rel="noopener">https://roxas332519096.github.io/notes-demo/0528-点击其他地方关闭浮层方案2.html</a></p><p>代码如下:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;script&gt;<br>    $(clickMe).on(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>        $(popover).show();<br>        setTimeout(<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            $(document).one(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>                $(popover).hide();<br>            &#125;)<br>        &#125;,0)<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="做一个Demo理解DOM事件"><a href="#做一个Demo理解DOM事件" class="headerlink" title="做一个Demo理解DOM事件:"></a>做一个Demo理解DOM事件:</h4><p>预览:<br><a href="https://roxas332519096.github.io/notes-demo/0528-理解DOM事件DEOM.html" target="_blank" rel="noopener">https://roxas332519096.github.io/notes-demo/0528-理解DOM事件DEOM.html</a></p><p>过程:</p><p>第一次点击时,先事件监听最后的参数为true,所以传播方式为捕获,从父元素到子元素传播;<br>其后,事件监听最后的参数为默认值,false,所以传播方式为冒泡,从子元素到父元素上传播;</p><p>代码如下:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;script&gt;<br>    <span class="hljs-built_in">let</span> divs = $(<span class="hljs-string">'div'</span>).get()<br>    <span class="hljs-built_in">let</span> n = 0<br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> i = 0; i &lt; divs.length; i++) &#123;<br>    divs[i].addEventListener(<span class="hljs-string">'click'</span>, () =&gt; &#123;<br>        setTimeout(() =&gt; &#123;<br>        divs[i].classList.add(<span class="hljs-string">'active'</span>)<br>        &#125;, n * 500)<br>        n += 1<br>    &#125;, <span class="hljs-literal">true</span>)<br>    &#125;<br><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> i = 0; i &lt; divs.length; i++) &#123;<br>    divs[i].addEventListener(<span class="hljs-string">'click'</span>, () =&gt; &#123;<br>        setTimeout(() =&gt; &#123;<br>        divs[i].classList.remove(<span class="hljs-string">'active'</span>)<br>        &#125;, n * 500)<br>        n += 1<br>    &#125;)<br>    &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态REM</title>
      <link href="/2018/05/27/%E5%8A%A8%E6%80%81REM/"/>
      <url>/2018/05/27/%E5%8A%A8%E6%80%81REM/</url>
      
        <content type="html"><![CDATA[<h3 id="1-什么是-REM"><a href="#1-什么是-REM" class="headerlink" title="1 什么是 REM"></a>1 什么是 REM</h3><h5 id="px"><a href="#px" class="headerlink" title="px"></a>px</h5><p>像素,网页默认font-size:16px<br>其他浏览器最小字体像素是6px;<br>chrome最小字体像素是12px;</p><h5 id="em"><a href="#em" class="headerlink" title="em"></a>em</h5><p>一个M的宽度,一个汉字的宽度.</p><h5 id="rem"><a href="#rem" class="headerlink" title="rem"></a>rem</h5><p>root em 根元素(html)的font-size大小.<br>注意是html,不是body</p><h5 id="vh"><a href="#vh" class="headerlink" title="vh"></a>vh</h5><p>viewport height 100vh:视口宽度.</p><h5 id="vm"><a href="#vm" class="headerlink" title="vm"></a>vm</h5><p>viewprot widht 100vw 视口宽度.</p><h3 id="2-REM-和-EM-的区别是什么"><a href="#2-REM-和-EM-的区别是什么" class="headerlink" title="2 REM 和 EM 的区别是什么"></a>2 REM 和 EM 的区别是什么</h3><p>EM:自己font-size大小.</p><p>REM:root em 根元素(html)的font-size大小.</p><h3 id="3-手机端方案的特点"><a href="#3-手机端方案的特点" class="headerlink" title="3 手机端方案的特点"></a>3 手机端方案的特点</h3><h4 id="如何做响应式"><a href="#如何做响应式" class="headerlink" title="如何做响应式"></a>如何做响应式</h4><p>几款常用手机分辨率大小如下:<br>iP6S  375x667<br>iP6+  414x736<br>ip5   320x568<br>Nexus 412x732</p><p>响应式<br>0~320    CSS-1<br>320~375  CSS-2<br>375~414  CSS-3</p><h4 id="1-百分比布局"><a href="#1-百分比布局" class="headerlink" title="1.百分比布局"></a>1.百分比布局</h4><p>预览:<br><a href="https://roxas332519096.github.io/notes-demo/0527-%E5%8A%A8%E6%80%81REM-%E7%99%BE%E5%88%86%E6%AF%94%E7%BC%A9%E6%94%BE.html" target="_blank" rel="noopener">https://roxas332519096.github.io/notes-demo/0527-%E5%8A%A8%E6%80%81REM-%E7%99%BE%E5%88%86%E6%AF%94%E7%BC%A9%E6%94%BE.html</a></p><p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;!DOCTYPE html&gt;<br>&lt;html lang=<span class="hljs-string">"en"</span>&gt;<br>&lt;head&gt;<br>    &lt;meta charset=<span class="hljs-string">"UTF-8"</span>&gt;<br>    &lt;meta name=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;<br>    &lt;title&gt;百分比缩放事例&lt;/title&gt;<br>    &lt;style&gt;<br>        *&#123;margin: 0;padding: 0;&#125;<br>        .child&#123;<br>            background: <span class="hljs-comment">#ddd;</span><br>            margin-top:10px;<br>            margin-bottom: 10px;<br>            text-align: center;<br>            <span class="hljs-built_in">float</span>: left;<br>            width: 40%;<br>            margin-left: 5%;<br>            margin-right: 5%;<br>        &#125;<br>        .clearfix::after&#123;<br>            content: <span class="hljs-string">''</span>;<br>            display: block;<br>            clear: both;<br>        &#125;<br>    &lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;div class=<span class="hljs-string">"parent clearfix"</span>&gt;<br>        &lt;div class=<span class="hljs-string">"child"</span>&gt;40%&lt;/div&gt;<br>        &lt;div class=<span class="hljs-string">"child"</span>&gt;40%&lt;/div&gt;<br>        &lt;div class=<span class="hljs-string">"child"</span>&gt;40%&lt;/div&gt;<br>        &lt;div class=<span class="hljs-string">"child"</span>&gt;40%&lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure></p><h5 id="缺点-高度无法决定-高度与宽度不能关联-以为你宽度是百分比"><a href="#缺点-高度无法决定-高度与宽度不能关联-以为你宽度是百分比" class="headerlink" title="缺点:高度无法决定.高度与宽度不能关联,以为你宽度是百分比."></a>缺点:高度无法决定.高度与宽度不能关联,以为你宽度是百分比.</h5><h4 id="2-整体缩放"><a href="#2-整体缩放" class="headerlink" title="2.整体缩放"></a>2.整体缩放</h4><p>REM方案:</p><h5 id="所有手机显示的界面都是一样的，只是大小不同"><a href="#所有手机显示的界面都是一样的，只是大小不同" class="headerlink" title="所有手机显示的界面都是一样的，只是大小不同."></a>所有手机显示的界面都是一样的，只是大小不同.</h5><h5 id="1-rem-html-font-size-viewport-width"><a href="#1-rem-html-font-size-viewport-width" class="headerlink" title="1 rem == html font-size == viewport width"></a>1 rem == html font-size == viewport width</h5><h3 id="4-使用-JS-动态调整-REM"><a href="#4-使用-JS-动态调整-REM" class="headerlink" title="4 使用 JS 动态调整 REM"></a>4 使用 JS 动态调整 REM</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;meta name=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;<br>&lt;script&gt;<br>    var pageWidth = window.innerWidth<br>    document.write(<span class="hljs-string">'&lt;style&gt;html&#123;font-size:'</span>+ pageWidth +<span class="hljs-string">'px;&#125;&lt;/style&gt;'</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>预览:<br><a href="https://roxas332519096.github.io/notes-demo/0527-%E5%8A%A8%E6%80%81REM-REM%E6%96%B9%E6%A1%88.html" target="_blank" rel="noopener">https://roxas332519096.github.io/notes-demo/0527-%E5%8A%A8%E6%80%81REM-REM%E6%96%B9%E6%A1%88.html</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;!DOCTYPE html&gt;<br>&lt;html lang=<span class="hljs-string">"en"</span>&gt;<br>&lt;head&gt;<br>    &lt;meta charset=<span class="hljs-string">"UTF-8"</span>&gt;<br>    &lt;title&gt;REM方案&lt;/title&gt;<br>    &lt;meta name=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;<br>     &lt;script&gt;<br>         var pageWidth = window.innerWidth;<br>         document.write(<span class="hljs-string">'&lt;style&gt;html&#123;font-size:'</span>+ pageWidth/10 +<span class="hljs-string">'px;&#125;&lt;/style&gt;'</span>)<br>     &lt;/script&gt;<br>     &lt;style&gt;<br>         *&#123;margin: 0;padding: 0;&#125;<br>            .clearfix::after&#123;<br>                content: <span class="hljs-string">''</span>;<br>                display: block;<br>                clear: both;<br>        &#125;<br>        *&#123;box-sizing: border-box;&#125;<br>        body&#123;<br>            font-size:16px;<br>        &#125;<br>        .child&#123;<br>            background: <span class="hljs-comment">#ddd;</span><br>            width: 4rem;<br>            height: 2rem;<br>            margin: 0.5rem 0.5rem;<br>            <span class="hljs-built_in">float</span>: left;<br>            text-align: center;<br>            line-height: 2rem;<br>        &#125;<br>    &lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;div class=<span class="hljs-string">"parent clearfix"</span>&gt;<br>        &lt;div class=<span class="hljs-string">"child"</span>&gt;40%&lt;/div&gt;<br>        &lt;div class=<span class="hljs-string">"child"</span>&gt;40%&lt;/div&gt;<br>        &lt;div class=<span class="hljs-string">"child"</span>&gt;40%&lt;/div&gt;<br>        &lt;div class=<span class="hljs-string">"child"</span>&gt;40%&lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><h3 id="5-REM-可以与其他单位同时存在"><a href="#5-REM-可以与其他单位同时存在" class="headerlink" title="5 REM 可以与其他单位同时存在"></a>5 REM 可以与其他单位同时存在</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">font-size: 16px;<br>border: 1px solid red;<br>width: 0.5rem;<br></code></pre></td></tr></table></figure><h3 id="6-在-SCSS-里使用-PX2REM"><a href="#6-在-SCSS-里使用-PX2REM" class="headerlink" title="6 在 SCSS 里使用 PX2REM"></a>6 在 SCSS 里使用 PX2REM</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm config <span class="hljs-built_in">set</span> registry https://registry.npm.taobao.org/ //从淘宝镜像下载<br>touch ~/.bashrc //创建一个文件决定从哪里下载<br><span class="hljs-built_in">echo</span> <span class="hljs-string">'export SASS_BINARY_SITE="https://npm.taobao.org/mirrors/node-sass"'</span> &gt;&gt; ~/.bashrc //把这句话加入之前的文件里<br><span class="hljs-built_in">source</span> ~/.bashrc <br>npm i -g node-sass<br>mkdir ~/Desktop/scss-demo<br><span class="hljs-built_in">cd</span> ~/Desktop/scss-demo<br>mkdir scss css<br>touch scss/style.scss<br>start scss/style.scss<br>node-sass -wr scss -o css //scss代表scss的目录 css代表输出目录<br></code></pre></td></tr></table></figure><p>编辑 scss 文件就会自动得到 css 文件<br>在 scss 文件里添加</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">@<span class="hljs-keyword">function</span> px( <span class="hljs-variable">$px</span> )&#123;<br>  @<span class="hljs-built_in">return</span> <span class="hljs-variable">$px</span>/<span class="hljs-variable">$designWidth</span>*10 + rem; //10代表js取REM的时候页面宽度除以的数<br>&#125;<br><br><span class="hljs-variable">$designWidth</span> : 640; // 640 是设计稿的宽度，你要根据设计稿的宽度填写。如果设计师的设计稿宽度不统一，就杀死设计师，换个新的。<br><br>.child&#123;<br>  width: px(320);<br>  height: px(160);<br>  margin: px(40) px(40);<br>  border: 1px solid red;<br>  <span class="hljs-built_in">float</span>: left;<br>  font-size: 1.2em;<br>&#125;<br></code></pre></td></tr></table></figure><p>即可实现 px 自动变 rem.</p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS实现数组去重</title>
      <link href="/2018/05/27/JS%E5%AE%9E%E7%8E%B0%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D/"/>
      <url>/2018/05/27/JS%E5%AE%9E%E7%8E%B0%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D/</url>
      
        <content type="html"><![CDATA[<h4 id="ES5"><a href="#ES5" class="headerlink" title="ES5 :"></a>ES5 :</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">var  array = [1,5,2,3,4,2,3,1,3,4];<br><span class="hljs-keyword">function</span> unique(array)&#123;<br>    <span class="hljs-built_in">let</span> arrayNew = [];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> i = 0;i &lt; array.length;i++)&#123;<br>        <span class="hljs-keyword">if</span>(arrayNew.indexOf(array[i]) === -1)&#123;<br>            arrayNew.push(array[i]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">return</span> arrayNew;<br>&#125;<br>unique(array);<br></code></pre></td></tr></table></figure><p>indexOf,查询数组是否出现某个值,并返回到其index,假如没有则返回-1.</p><h4 id="ES6"><a href="#ES6" class="headerlink" title="ES6:"></a>ES6:</h4><p>使用Set对象,可实现原数组去重.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">var array = [1,5,2,3,4,2,3,1,3,4];<br><span class="hljs-keyword">function</span> unique(arr)&#123;<br>  <span class="hljs-built_in">return</span> Array.from(new Set(arr));<br>&#125;<br>unique(array);<br></code></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP状态码</title>
      <link href="/2018/05/27/HTTP%E7%8A%B6%E6%80%81%E7%A0%81/"/>
      <url>/2018/05/27/HTTP%E7%8A%B6%E6%80%81%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h5 id="2XX-请求成功-成功处理了请求的状态码"><a href="#2XX-请求成功-成功处理了请求的状态码" class="headerlink" title="2XX:(请求成功) 成功处理了请求的状态码"></a>2XX:(请求成功) 成功处理了请求的状态码</h5><p>200:(成功) 服务器已成功处理请求.<br>201:(已接受) 请求成功并服务器创建了新的资源.<br>202:(已接受) 服务器已接受请求,但尚未处理.<br>203:(非授权信息) 服务器成功处理了请求,但返回信息可能来自另一来源.<br>204:(无内容) 服务器成功处理了请求,但没有返回任何内容.<br>205:(重置内容) 服务器成功处理了请求,重置当前表单.<br>206:(部分内容) 服务器成功处理了部分GET请求.</p><h5 id="3XX-请求被重定向-要完成请求-需要进一步操作"><a href="#3XX-请求被重定向-要完成请求-需要进一步操作" class="headerlink" title="3XX:(请求被重定向) 要完成请求,需要进一步操作."></a>3XX:(请求被重定向) 要完成请求,需要进一步操作.</h5><p>300:(多种选择) 针对请求,服务器可执行多种操作;服务器根据请求者选择一项操作,或提供操作列表供请求者选择<br>301:(永久移动) 请求网页已永久移动到新位置;服务器返回此响应(GET或HEAD请求的响应时),自动将请求者转到新位置<br>302:(临时移动) 服务器目前从新位置的网页响应请求,但请求者应继续使用原位置来进行以后的请求.<br>303:(查看其他位置) 请求者应当对不同的位置使用单独的GET请求来检索响应时;服务器返回此代码.<br>304:(未修改) 自从上次请求后,请求的网页未修改过;服务器返回此响应时,不会返回网页内容.<br>305:(使用代理) 请求者只能使用代理访问请求的网页.<br>307:(临时重定向)  服务器目前从新位置的响应请求,但请求者应继续使用原位置来进行以后的请求.</p><h5 id="4XX-请求错误"><a href="#4XX-请求错误" class="headerlink" title="4XX: (请求错误)"></a>4XX: (请求错误)</h5><p>400:(错误请求) 服务器不理解请求的语法<br>401:(未授权) 请求要求身份验证;对于需要登录的网页,服务器可能返回此响应<br>403:(禁止) 服务器拒绝请求<br>404:(未找到) 服务器找不到请求的网页.<br>405:(方法禁用) 禁用请求中的指定方法.<br>406:(不接受) 无法使用请求的内容特效响应请求的网页.<br>407:(需要代理授权) 此状态码与401(未授权)类似,但指定请求者应当授权使用代理.<br>408:(请求超时) 服务器等待请求时发生超时.<br>409:(冲突) 服务器在完成请求时发生冲突.服务器必须在响应中包含有关冲突的信息.<br>410:(已删除):请求的资源已永久删除.<br>411:(需要有效长度) 服务器不接受含义有效长度标头字段的请求<br>412:(为满足前提条件) 服务器为满足请求者在请求中设置的其中一个前提条件.<br>413:(请求实体过大) 服务器无法处理请求,因为请求实体过大,超出服务器的处理能力.<br>414:(请求的URI过长) 请求的URI过长,服务器无法处理.<br>415:(不支持的媒体类型) 请求的格式不接受请求页面的支持.<br>416:(请求范围不符合要求) 如果页面无法提供请求范围,服务器会返回此状态码.<br>417:(未满足期望值) 服务器未满足”期望”请求标头字段的要求.</p><h5 id="5XX-服务器错误"><a href="#5XX-服务器错误" class="headerlink" title="5XX:(服务器错误)"></a>5XX:(服务器错误)</h5><p>500:(服务器内部错误) 服务器遇到错误,无法完成请求.<br>501:(尚未实施) 服务器不具备完成请求的功能;如,服务器无法识别请求方法时可能会返回此代码.<br>502:(错误网关) 服务器作为网关或代理,上游服务器收到无效响应.<br>503:(服务器不可用) 服务器目前无法使用(由于超载或停机维护);通常,这只是暂时状态<br>504:(网关超时) 服务器作为网关或代理,但没有及时从上游服务器收到请求.<br>505:(HTTP版本不受支持) 服务器不支持请求中所用的HTTP协议版本.</p>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>移动端页面的做法-响应式</title>
      <link href="/2018/05/27/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%81%9A%E6%B3%95-%E5%93%8D%E5%BA%94%E5%BC%8F/"/>
      <url>/2018/05/27/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%81%9A%E6%B3%95-%E5%93%8D%E5%BA%94%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>手机端页面的做法</p><h3 id="1-学会-media-query-媒体查询"><a href="#1-学会-media-query-媒体查询" class="headerlink" title="1 学会 media query(媒体查询)"></a>1 学会 media query(媒体查询)</h3><h4 id="1-CSS-meida选择器控制"><a href="#1-CSS-meida选择器控制" class="headerlink" title="1.CSS meida选择器控制"></a>1.CSS meida选择器控制</h4><p>@media媒体查询 max-width,0-max,min-width:min-无穷;<br>当条件都满足时,优先级谁先后写谁优先<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">@media (max-width:600)&#123;<br>    body &#123;<br>        background: blue;<br>    &#125;<br>&#125;<br><br>@media (min-width:600 and max-width:800) &#123; <br>    body&#123;<br>        background: red;<br>    &#125;<br>&#125;<br><br>@media (min-width:800) &#123;<br>    body&#123;<br>        background: green;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><h4 id="2-引入CSS文件控制"><a href="#2-引入CSS文件控制" class="headerlink" title="2.引入CSS文件控制:"></a>2.引入CSS文件控制:</h4><p>当设备窗口宽度0-500px时候mobile.css文件生效.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;link rel=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"mobile.css"</span> media=<span class="hljs-string">"(max-width:500px)"</span>&gt;<br></code></pre></td></tr></table></figure></p><h3 id="2-学会要设计图（没图不做）"><a href="#2-学会要设计图（没图不做）" class="headerlink" title="2 学会要设计图（没图不做）"></a>2 学会要设计图（没图不做）</h3><h4 id="1-实在要做也行，丑可别怪我"><a href="#1-实在要做也行，丑可别怪我" class="headerlink" title="1 实在要做也行，丑可别怪我"></a>1 实在要做也行，丑可别怪我</h4><h3 id="3-学会隐藏元素"><a href="#3-学会隐藏元素" class="headerlink" title="3 学会隐藏元素"></a>3 学会隐藏元素</h3><h4 id="Mobile-first"><a href="#Mobile-first" class="headerlink" title="Mobile-first"></a>Mobile-first</h4><h4 id="Desktop-first"><a href="#Desktop-first" class="headerlink" title="Desktop-first"></a>Desktop-first</h4><p>做一下响应式导航</p><p>预览:<br><a href="https://roxas332519096.github.io/notes-demo/0527-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%81%9A%E6%B3%95-%E5%93%8D%E5%BA%94%E5%BC%8F.html" target="_blank" rel="noopener">https://roxas332519096.github.io/notes-demo/0527-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%81%9A%E6%B3%95-%E5%93%8D%E5%BA%94%E5%BC%8F.html</a></p><p>代码如下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;!DOCTYPE html&gt;<br>&lt;html lang=<span class="hljs-string">"zh-CN"</span>&gt;<br>&lt;head&gt;<br>    &lt;meta charset=<span class="hljs-string">"UTF-8"</span>&gt;<br>    &lt;meta name=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;<br>    &lt;title&gt;响应式导航&lt;/title&gt;<br>    &lt;style&gt;<br>        *&#123;margin: 0; padding: 0;&#125;<br>        ul,li&#123;list-style: none;&#125;<br>        a&#123;color: inherit;text-decoration: none;&#125;<br><br>        .logo &#123;<br>            width: 60px;<br>            height: 60px;<br>            background: grey;<br>            border-radius: 30px;<br>        &#125;<br><br>        .Clearfix::after&#123;<br>            content: <span class="hljs-string">''</span>;<br>            display: block;<br>            clear: both;<br>        &#125;<br><br>        header&#123;<br>            padding: 10px;<br>            position: relative;<br>        &#125;<br>        <br>        .nav&#123;<br>            display: none;<br>            background: grey;<br>            margin-top: 10px;<br>        &#125;<br>        <br>        .nav.active&#123;<br>            display: flex;<br>            justify-content: space-between;<br>        &#125;<br><br>        .nav2&#123;display: none;&#125;<br>        <br>        header &gt; button &#123;<br>            position: absolute;<br>            right: 20px;<br>            top: 26px;<br>        &#125;<br><br>        @media (min-width:451px) &#123;<br>          header &gt; button &#123;<br>            display: none;<br>          &#125;<br>          .nav, .nav.nav.active&#123;display: none;&#125;<br>          .nav2&#123;display: block;&#125;<br>          header &#123;<br>              display: flex;<br>              align-items: center;<br>          &#125;<br>          header .nav2 &#123;<br>              display: flex;<br>              margin-left: 20px;<br>          &#125;<br>          header .nav2&gt;li &#123;<br>              margin: 0 10px;<br>          &#125;<br>        &#125;<br>    &lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;header&gt;<br>        &lt;div class=<span class="hljs-string">"logo"</span>&gt;&lt;/div&gt;<br>        &lt;button id=<span class="hljs-string">"xx"</span>&gt;菜单&lt;/button&gt;<br>        &lt;ul id=<span class="hljs-string">"yy"</span> class=<span class="hljs-string">"nav"</span>&gt;<br>            &lt;li&gt;&lt;a href=<span class="hljs-string">""</span>&gt;导航1&lt;/a&gt;&lt;/li&gt;<br>            &lt;li&gt;&lt;a href=<span class="hljs-string">""</span>&gt;导航2&lt;/a&gt;&lt;/li&gt;<br>            &lt;li&gt;&lt;a href=<span class="hljs-string">""</span>&gt;导航3&lt;/a&gt;&lt;/li&gt;<br>            &lt;li&gt;&lt;a href=<span class="hljs-string">""</span>&gt;导航4&lt;/a&gt;&lt;/li&gt;<br>            &lt;li&gt;&lt;a href=<span class="hljs-string">""</span>&gt;导航5&lt;/a&gt;&lt;/li&gt;<br>        &lt;/ul&gt;<br>        &lt;ul class=<span class="hljs-string">"nav2"</span>&gt;<br>                &lt;li&gt;&lt;a href=<span class="hljs-string">""</span>&gt;导航1&lt;/a&gt;&lt;/li&gt;<br>                &lt;li&gt;&lt;a href=<span class="hljs-string">""</span>&gt;导航2&lt;/a&gt;&lt;/li&gt;<br>                &lt;li&gt;&lt;a href=<span class="hljs-string">""</span>&gt;导航3&lt;/a&gt;&lt;/li&gt;<br>                &lt;li&gt;&lt;a href=<span class="hljs-string">""</span>&gt;导航4&lt;/a&gt;&lt;/li&gt;<br>                &lt;li&gt;&lt;a href=<span class="hljs-string">""</span>&gt;导航5&lt;/a&gt;&lt;/li&gt;<br>            &lt;/ul&gt;<br>    &lt;/header&gt;<br>    &lt;script&gt;<br>        xx.onclick = <span class="hljs-function"><span class="hljs-title">function</span></span>()&#123;<br>            yy.classList.toggle(<span class="hljs-string">'active'</span>);<br>        &#125;<br>    &lt;/script&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure></p><h3 id="4-手机端要加一个-meta"><a href="#4-手机端要加一个-meta" class="headerlink" title="4 手机端要加一个 meta"></a>4 手机端要加一个 meta</h3><p>不允许用户缩放,宽度设备宽度,默认大小,最大比例1,最小比例1<br>快捷键meta:vp;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;meta name=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;<br></code></pre></td></tr></table></figure></p><ol><li>width  设备宽度</li><li>initial-scale  默认大小;</li><li>user-scalable  允许用户是否能缩放,no表示不允许也可以是”0”,yes表示可以;</li><li>minimum-scale  允许用户的最小缩放值;</li><li>maximum-scale  允许用户的最大缩放值;</li></ol><h3 id="5-手机端的交互方式不一样"><a href="#5-手机端的交互方式不一样" class="headerlink" title="5 手机端的交互方式不一样"></a>5 手机端的交互方式不一样</h3><h4 id="1-没有-hover"><a href="#1-没有-hover" class="headerlink" title="1 没有 hover"></a>1 没有 hover</h4><h4 id="2-有-touch-事件"><a href="#2-有-touch-事件" class="headerlink" title="2 有 touch 事件"></a>2 有 touch 事件</h4><p>记录用户开始触摸位置和结束触摸的位置,两者之差模拟滑动事件<br>jQuery vue都有</p><h4 id="3-没有-resize-窗口大小"><a href="#3-没有-resize-窗口大小" class="headerlink" title="3 没有 resize(窗口大小)"></a>3 没有 resize(窗口大小)</h4><h4 id="4-没有滚动条"><a href="#4-没有滚动条" class="headerlink" title="4 没有滚动条"></a>4 没有滚动条</h4>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自制一个简单的jQuery库</title>
      <link href="/2018/05/24/%E8%87%AA%E5%88%B6%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84jQuery%E5%BA%93/"/>
      <url>/2018/05/24/%E8%87%AA%E5%88%B6%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84jQuery%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h4 id="自制一个简单的jQuery库"><a href="#自制一个简单的jQuery库" class="headerlink" title="自制一个简单的jQuery库"></a>自制一个简单的jQuery库</h4><h4 id="1-先创建一个选择器函数"><a href="#1-先创建一个选择器函数" class="headerlink" title="1.先创建一个选择器函数"></a>1.先创建一个选择器函数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span>(nodeOrSelector)&#123;<br>    <span class="hljs-built_in">let</span> nodes = &#123;&#125;<br>    <span class="hljs-keyword">if</span>(typeof nodeOrSelector === <span class="hljs-string">'string'</span>)&#123;<br>        <span class="hljs-built_in">let</span> temp=document.querySelectorAll(nodeOrSelector);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> i = 0;i &lt; temp.length;i++)&#123;<br>            nodes[i] = temp[i];<br>        &#125;<br>        nodes.length = temp.length<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nodeOrSelector instanceof Node) &#123;<br>        nodes = &#123;<br>            0: nodeOrSelector,<br>            length: 1<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>传入参数</p><ol><li>假如参数为string类型,则为一个选择器,那么用dom的api:querySelecotrAll生成伪数组NodeList;</li><li>假如参数为Node节点,那么建立伪数组,key 0 的值为参数本身,length=1.与上面保持一致.</li></ol><h4 id="2-设置API-addClass"><a href="#2-设置API-addClass" class="headerlink" title="2.设置API:addClass"></a>2.设置API:addClass</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">return</span> &#123;<br>        addClass : <span class="hljs-keyword">function</span>(classes) &#123;<br>            <span class="hljs-keyword">if</span>(typeof classes === <span class="hljs-string">'string'</span>)&#123;<br>              <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> i = 0; i &lt; nodes.length;i++)&#123;<br>                        nodes[i].classList.add(classes)<br>                    &#125;<br>            &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(typeof classes === <span class="hljs-string">'object'</span>)&#123;<br>                classes.forEach(<br>                    (value) =&gt; &#123;<br>                        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> i = 0; i &lt; nodes.length;i++)&#123;<br>                            nodes[i].classList.add(value)<br>                        &#125;<br>                    &#125;<br>                )<br>            &#125;        <br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>建立选择器后,就可以操作nodes了,通过对函数return一个对象,可以设置方法.<br>对象的第一个key是addClass,值为一个函数,传入classes参数;</p><ol><li>假如classes的类型为stirng,那么classes是单个class.那么遍历nodes,调用DOM API的classList.add();</li><li>假如classes的类型是一个数组,那么classes可能是多个class,这是要先遍历classes,对每一项的值遍历nodes,调用classList.add();</li></ol><h4 id="3-设置API-setText"><a href="#3-设置API-setText" class="headerlink" title="3.设置API:setText"></a>3.设置API:setText</h4><p>对象的第二个key是setText,值为一个函数,传入text参数;</p><ol><li>遍历nodes,调用Dom Api的textContent = text;</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">setText : <span class="hljs-keyword">function</span>(text)&#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> i = 0; i &lt; nodes.length;i++)&#123;<br>                nodes[i].textContent = text;<br>            &#125;<br>        &#125;<br></code></pre></td></tr></table></figure><h4 id="4-完整代码"><a href="#4-完整代码" class="headerlink" title="4.完整代码"></a>4.完整代码</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs bash">window.jQuery = <span class="hljs-keyword">function</span>(nodeOrSelector)&#123;<br>    <span class="hljs-built_in">let</span> nodes = &#123;&#125;<br>    <span class="hljs-keyword">if</span>(typeof nodeOrSelector === <span class="hljs-string">'string'</span>)&#123;<br>        <span class="hljs-built_in">let</span> temp=document.querySelectorAll(nodeOrSelector);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> i = 0;i &lt; temp.length;i++)&#123;<br>            nodes[i] = temp[i];<br>        &#125;<br>        nodes.length = temp.length<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nodeOrSelector instanceof Node) &#123;<br>        nodes = &#123;<br>            0: nodeOrSelector,<br>            length: 1<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">return</span> &#123;<br>        addClass : <span class="hljs-keyword">function</span>(classes) &#123;<br>            <span class="hljs-keyword">if</span>(typeof classes === <span class="hljs-string">'string'</span>)&#123;<br>              <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> i = 0; i &lt; nodes.length;i++)&#123;<br>                        nodes[i].classList.add(classes)<br>                    &#125;<br>            &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(typeof classes === <span class="hljs-string">'object'</span>)&#123;<br>                classes.forEach(<br>                    (value) =&gt; &#123;<br>                        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> i = 0; i &lt; nodes.length;i++)&#123;<br>                            nodes[i].classList.add(value)<br>                        &#125;<br>                    &#125;<br>                )<br>            &#125;        <br>        &#125;,<br>        setText : <span class="hljs-keyword">function</span>(text)&#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> i = 0; i &lt; nodes.length;i++)&#123;<br>                nodes[i].textContent = text;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="5-运行代码"><a href="#5-运行代码" class="headerlink" title="5.运行代码"></a>5.运行代码</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">window.$ = jQuery;<br>var <span class="hljs-variable">$div</span> = $(<span class="hljs-string">'div'</span>)<br><span class="hljs-variable">$div</span>.addClass(<span class="hljs-string">'blue'</span>);<br><span class="hljs-variable">$div</span>.setText(<span class="hljs-string">'Hi'</span>);<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DOM</title>
      <link href="/2018/05/09/DOM/"/>
      <url>/2018/05/09/DOM/</url>
      
        <content type="html"><![CDATA[<h3 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h3><p>document object model<br>文档对象模型</p><h3 id="Ndoe"><a href="#Ndoe" class="headerlink" title="Ndoe"></a>Ndoe</h3><p>Document <html>标签的父元素,但根元素是HTML<br>Elment<br>Text #注意看起来是文本,其实是一个对象<br>Comment </html></p><p>页面中的节点通过,构造函数,变成对象</p><h4 id="Node接口属性"><a href="#Node接口属性" class="headerlink" title="Node接口属性"></a>Node接口属性</h4><h5 id="childNodes"><a href="#childNodes" class="headerlink" title="childNodes"></a>childNodes</h5><p>如果一个节点有父节点，那么该节点就继承了ChildNode接口。</p><h6 id="可以用以下方法"><a href="#可以用以下方法" class="headerlink" title="可以用以下方法"></a>可以用以下方法</h6><ol><li>remove()</li><li>before()</li><li>after()</li><li>replaceWith()</li></ol><h5 id="parentNode"><a href="#parentNode" class="headerlink" title="parentNode"></a>parentNode</h5><p>如果当前节点是父节点，就会继承ParentNode接口。由于只有元素节点（element）、文档节点（document）和文档片段节点（documentFragment）拥有子节点，因此只有这三类节点会继承ParentNode接口。</p><h6 id="可以用以下方法-1"><a href="#可以用以下方法-1" class="headerlink" title="可以用以下方法"></a>可以用以下方法</h6><ol><li>children</li><li>firstElementChild</li><li>lastElementChild</li><li>childElementCount</li><li>append()</li><li>prepend() //功能与5一样</li></ol><h5 id="firstChild-lastChild"><a href="#firstChild-lastChild" class="headerlink" title="firstChild,lastChild,"></a>firstChild,lastChild,</h5><h5 id="innerText-outerText"><a href="#innerText-outerText" class="headerlink" title="innerText,outerText,"></a>innerText,outerText,</h5><h5 id="textContent"><a href="#textContent" class="headerlink" title="textContent"></a>textContent</h5><p>与innerText区别:</p><ol><li>textContent获取所有元素内容包括script和style;</li><li>innerText检查css,不会返回隐藏元素的文本display:none,却性能低;</li></ol><h5 id="nextSibling-previousSibling"><a href="#nextSibling-previousSibling" class="headerlink" title="nextSibling,previousSibling,"></a>nextSibling,previousSibling,</h5><p>这个两个可能会获取到文本节点</p><h5 id="nodeName"><a href="#nodeName" class="headerlink" title="nodeName"></a>nodeName</h5><p>获取的都是大写的,只有svg是小写,</p><h5 id="nodeType"><a href="#nodeType" class="headerlink" title="nodeType"></a>nodeType</h5><p>1为标签,3为文本 document.nodeType === Node.DOCUMENT_NODE</p><p>确定节点类型可以使用nodeType属性<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">var node = document.documentElement.firstChild;<br><span class="hljs-keyword">if</span> (node.nodeType !== Node.ELEMENT_NODE) &#123;<br>  console.log(<span class="hljs-string">'该节点是元素节点'</span>);<br>&#125;<br></code></pre></td></tr></table></figure></p><h5 id="nodeValue"><a href="#nodeValue" class="headerlink" title="nodeValue"></a>nodeValue</h5><p>只有文本节点或注释才能返回值,其余为null</p><h5 id="ownerDocument"><a href="#ownerDocument" class="headerlink" title="ownerDocument"></a>ownerDocument</h5><p>获得根对象</p><h5 id="parentElement"><a href="#parentElement" class="headerlink" title="parentElement"></a>parentElement</h5><p>获得父元素节点,假如父节点不是元素则为null</p><h5 id="NodeList-与-HTMLCollection"><a href="#NodeList-与-HTMLCollection" class="headerlink" title="NodeList 与 HTMLCollection"></a>NodeList 与 HTMLCollection</h5><p>相同:返回伪数组,不能push和pop</p><p>HTMLCollection与NodeList区别:</p><ol><li>HTMLCollection实例对象的成员只能是Element节点，NodeList实例对象的成员可以包含其他节点。 </li><li>HTMLCollection实例对象都是动态集合,NodeList实例对象可能是动态集合，也可能是静态集合,目前,只有Node.childNodes是一个动态集合,其他NodeList是静态集合时反映在集合中。</li><li>HTMLCollection实例对象可以用id属性或name属性引用节点元素，NodeList只能使用数字索引引用。 </li></ol><h4 id="Node接口的方法"><a href="#Node接口的方法" class="headerlink" title="Node接口的方法"></a>Node接口的方法</h4><h5 id="appendChild"><a href="#appendChild" class="headerlink" title="appendChild()"></a>appendChild()</h5><p>创建子节点</p><h5 id="insertBefore-节点1-参考节点"><a href="#insertBefore-节点1-参考节点" class="headerlink" title="insertBefore(节点1,参考节点)"></a>insertBefore(节点1,参考节点)</h5><p>将节点1插入到参考节点之前,假如要将节点1插入到参考节点之后,要使用 insertBefore(节点1,参考节点.nextSibling),注意参考节点不能省略</p><h5 id="cloneChild"><a href="#cloneChild" class="headerlink" title="cloneChild()"></a>cloneChild()</h5><p>复制节点,但是会丧失监听属性,即addEventListener方法和on-属性</p><ol><li><p>浅拷贝 cloneChild(false) 默认就是false,只拷贝节点,不拷贝子节点</p></li><li><p>深拷贝 cloneChild(true),不仅拷贝节点,也拷贝子节点</p></li></ol><h5 id="removeChild"><a href="#removeChild" class="headerlink" title="removeChild()"></a>removeChild()</h5><p>移除节点,不在页面里,还在内存里,注意调用的是父节点</p><h5 id="replaceChild"><a href="#replaceChild" class="headerlink" title="replaceChild()"></a>replaceChild()</h5><p>替换节点,之前的节点在内存里</p><h5 id="contains"><a href="#contains" class="headerlink" title="contains()"></a>contains()</h5><p>一个节点是否是参考节点的子节点或其本身</p><h5 id="hasChildNodes"><a href="#hasChildNodes" class="headerlink" title="hasChildNodes()"></a>hasChildNodes()</h5><p>是否有子节点,返回布尔值</p><h5 id="isEqualNode"><a href="#isEqualNode" class="headerlink" title="isEqualNode()"></a>isEqualNode()</h5><p>是否相等节点,看起来一样</p><h5 id="isSameNode"><a href="#isSameNode" class="headerlink" title="isSameNode()"></a>isSameNode()</h5><p>是否相同节点,是否同一个<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">var p1 = document.createElement(<span class="hljs-string">'p'</span>);<br>var p2 = document.createElement(<span class="hljs-string">'p'</span>);<br><br>p1.isSameNode(p2) // <span class="hljs-literal">false</span><br>p1.isSameNode(p1) // <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure></p><h5 id="normalize"><a href="#normalize" class="headerlink" title="normalize()"></a>normalize()</h5><p>常规化<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">var wrapper = document.createElement(<span class="hljs-string">'div'</span>);<br><br>wrapper.appendChild(document.createTextNode(<span class="hljs-string">'Part 1 '</span>));<br>wrapper.appendChild(document.createTextNode(<span class="hljs-string">'Part 2 '</span>));<br><br>wrapper.childNodes.length // 2<br>wrapper.normalize();<br>wrapper.childNodes.length // 1<br></code></pre></td></tr></table></figure></p><h3 id="Document"><a href="#Document" class="headerlink" title="Document"></a>Document</h3><h4 id="Document接口的属性"><a href="#Document接口的属性" class="headerlink" title="Document接口的属性"></a>Document接口的属性</h4><h5 id="body"><a href="#body" class="headerlink" title="body"></a>body</h5><p>获取body元素</p><h5 id="head"><a href="#head" class="headerlink" title="head"></a>head</h5><p>获取head标签</p><h5 id="images"><a href="#images" class="headerlink" title="images"></a>images</h5><p>获取所有image标签</p><h5 id="links"><a href="#links" class="headerlink" title="links"></a>links</h5><p>获取所有a标签</p><h5 id="title"><a href="#title" class="headerlink" title="title"></a>title</h5><p>获取title标签</p><h5 id="scripts"><a href="#scripts" class="headerlink" title="scripts"></a>scripts</h5><p>获取所有script标签</p><h5 id="characterSet"><a href="#characterSet" class="headerlink" title="characterSet"></a>characterSet</h5><p>获取字符编码</p><h5 id="childElementCount"><a href="#childElementCount" class="headerlink" title="childElementCount"></a>childElementCount</h5><p>获取子元素的个数,用数字表示</p><h5 id="children"><a href="#children" class="headerlink" title="children"></a>children</h5><p>获取子节点</p><h5 id="doctype"><a href="#doctype" class="headerlink" title="doctype"></a>doctype</h5><p>获取文档类型</p><h5 id="documentElement"><a href="#documentElement" class="headerlink" title="documentElement"></a>documentElement</h5><p>获取根元素,即<html></html></p><h5 id="domain"><a href="#domain" class="headerlink" title="domain"></a>domain</h5><p>获取域名</p><h5 id="location"><a href="#location" class="headerlink" title="location"></a>location</h5><p>获取Location对象,其中包含有关文档当前位置的信息.</p><h5 id="onxxxxxxxxx"><a href="#onxxxxxxxxx" class="headerlink" title="onxxxxxxxxx"></a>onxxxxxxxxx</h5><p>一系列的事件监听</p><h5 id="origin"><a href="#origin" class="headerlink" title="origin"></a>origin</h5><p>源</p><h5 id="plugins"><a href="#plugins" class="headerlink" title="plugins"></a>plugins</h5><p>是否有flash插件</p><h5 id="readyState"><a href="#readyState" class="headerlink" title="readyState"></a>readyState</h5><p>是否下载完成</p><h5 id="referrer"><a href="#referrer" class="headerlink" title="referrer"></a>referrer</h5><p>引荐者,http发出请求时,可以用referrer拒绝别的访问</p><h5 id="hidden"><a href="#hidden" class="headerlink" title="hidden"></a>hidden</h5><p>获取隐藏标签</p><h5 id="scrollingElement"><a href="#scrollingElement" class="headerlink" title="scrollingElement"></a>scrollingElement</h5><p>获取正在滚动的元素</p><h5 id="styleSheets"><a href="#styleSheets" class="headerlink" title="styleSheets"></a>styleSheets</h5><p>获取所有css</p><h5 id="visibilityState"><a href="#visibilityState" class="headerlink" title="visibilityState"></a>visibilityState</h5><p>获取页面是否被显示</p><h4 id="Document接口的方法"><a href="#Document接口的方法" class="headerlink" title="Document接口的方法"></a>Document接口的方法</h4><h5 id="getElementById"><a href="#getElementById" class="headerlink" title="getElementById()"></a>getElementById()</h5><p>获取该id的标签</p><h5 id="getElementsByClassName"><a href="#getElementsByClassName" class="headerlink" title="getElementsByClassName()"></a>getElementsByClassName()</h5><p>获取该class的标签</p><h5 id="getElementsByName"><a href="#getElementsByName" class="headerlink" title="getElementsByName()"></a>getElementsByName()</h5><p>获取该name属性的标签</p><h5 id="getElementsByTagName"><a href="#getElementsByTagName" class="headerlink" title="getElementsByTagName()"></a>getElementsByTagName()</h5><p>获取该标签名的标签</p><h5 id="querySelector"><a href="#querySelector" class="headerlink" title="querySelector()"></a>querySelector()</h5><p>获取第一个该选择器的标签</p><h5 id="querySelectorAll"><a href="#querySelectorAll" class="headerlink" title="querySelectorAll()"></a>querySelectorAll()</h5><p>获取所有该选择器的标签,</p><p>与childNodes的区别:</p><ol><li><p>相同:都是返回伪数组</p></li><li><p>区别:<br>childNodes 是动态集合。所谓动态集合就是一个活的集合，DOM树删除或新增一个相关节点，都会立刻反映在NodeList接口之中<br>querySelectorAll方法返回的是一个静态集合。DOM内部的变化，并不会实时反映在该方法的返回结果之中。 </p></li></ol><h5 id="createElement"><a href="#createElement" class="headerlink" title="createElement()"></a>createElement()</h5><p>创建标签</p><h5 id="createTextNode"><a href="#createTextNode" class="headerlink" title="createTextNode()"></a>createTextNode()</h5><p>创建文本节点</p><h5 id="createAttribute"><a href="#createAttribute" class="headerlink" title="createAttribute()"></a>createAttribute()</h5><p>创建新属性</p><h5 id="createDocumentFragment"><a href="#createDocumentFragment" class="headerlink" title="createDocumentFragment()"></a>createDocumentFragment()</h5><p>创建一个空的文档片段对象</p><h5 id="open"><a href="#open" class="headerlink" title="open()"></a>open()</h5><p>打开</p><h5 id="close"><a href="#close" class="headerlink" title="close()"></a>close()</h5><p>关闭,当执行doucment.wrtie时,页面会自动先document.open() -&gt; docment.write -&gt; document.close() 假如close之后写用write,会重新调用open,会覆盖之前write</p><h5 id="write"><a href="#write" class="headerlink" title="write()"></a>write()</h5><p>写入文本</p><h5 id="writeln"><a href="#writeln" class="headerlink" title="writeln()"></a>writeln()</h5><p>写入一行文本</p><h5 id="execCommand"><a href="#execCommand" class="headerlink" title="execCommand()"></a>execCommand()</h5><p>执行一个命令</p><h5 id="exitFullscreen"><a href="#exitFullscreen" class="headerlink" title="exitFullscreen()"></a>exitFullscreen()</h5><p>退出全屏</p><h5 id="getSelection"><a href="#getSelection" class="headerlink" title="getSelection()"></a>getSelection()</h5><p>获取用户选择的文本</p><h5 id="hasFocus"><a href="#hasFocus" class="headerlink" title="hasFocus()"></a>hasFocus()</h5><p>用户是否在当前页面上</p><h3 id="Element"><a href="#Element" class="headerlink" title="Element"></a>Element</h3><h4 id="Element接口的属性"><a href="#Element接口的属性" class="headerlink" title="Element接口的属性"></a>Element接口的属性</h4><h5 id="元素特性相关属性"><a href="#元素特性相关属性" class="headerlink" title="元素特性相关属性"></a>元素特性相关属性</h5><h5 id="id"><a href="#id" class="headerlink" title="id"></a>id</h5><p>读写id属性</p><h5 id="tagName"><a href="#tagName" class="headerlink" title="tagName"></a>tagName</h5><p>读写标签名,与nodeName相等,值为大写</p><h5 id="dir"><a href="#dir" class="headerlink" title="dir"></a>dir</h5><p>读写元素文字当前放向,ltr为从左到右,rtl为从右到左</p><h5 id="accessKey"><a href="#accessKey" class="headerlink" title="accessKey"></a>accessKey</h5><p>读写分配给当前元素的快捷键</p><h5 id="draggable"><a href="#draggable" class="headerlink" title="draggable"></a>draggable</h5><p>元素是否能拖动,返回一个布尔值,可读写</p><h5 id="lang"><a href="#lang" class="headerlink" title="lang"></a>lang</h5><p>读写当前元素的语言</p><h5 id="title-1"><a href="#title-1" class="headerlink" title="title"></a>title</h5><p>读写HTML属性title,通常用来指定,鼠标悬浮时单出的文字提示框</p><h5 id="元素状态相关属性"><a href="#元素状态相关属性" class="headerlink" title="元素状态相关属性"></a>元素状态相关属性</h5><h5 id="hidden-1"><a href="#hidden-1" class="headerlink" title="hidden"></a>hidden</h5><p>返回布尔值,元素是否可见,可以读写,控制元素是否可见;<br>与CSS独立,CSS可见高于该属性</p><h5 id="contentEditable"><a href="#contentEditable" class="headerlink" title="contentEditable,"></a>contentEditable,</h5><p>返回字符串;<br>设置contentEditable属性，使得元素的内容可以编辑;<br>“true”可编辑;<br>“false”不能编辑;<br>“inherit”继承父元素;</p><h5 id="isContentEditable"><a href="#isContentEditable" class="headerlink" title="isContentEditable"></a>isContentEditable</h5><p>返回布尔值,元素是否可以编辑,只读</p><h5 id="className"><a href="#className" class="headerlink" title="className"></a>className</h5><p>读写元素class属性</p><h5 id="classList"><a href="#classList" class="headerlink" title="classList"></a>classList</h5><p>返回class属性值的数组</p><h6 id="可以用以下方法改变classList"><a href="#可以用以下方法改变classList" class="headerlink" title="可以用以下方法改变classList"></a>可以用以下方法改变classList</h6><ol><li>add()：增加一个 class。</li><li>remove()：移除一个 class。</li><li>contains()：检查当前元素是否包含某个 class //返回布尔值</li><li>toggle()：将某个 class 移入或移出当前元素。</li><li>item()：返回指定索引位置的 class //使用方法跟数组一样,item[0];item[1]等</li><li>toString()：将 class 的列表转为字符串。</li></ol><h5 id="innerHTML"><a href="#innerHTML" class="headerlink" title="innerHTML"></a>innerHTML</h5><p>与Node.innerText/textContent的区别:innerHTML会执行HTML标签</p><h5 id="outerHTML"><a href="#outerHTML" class="headerlink" title="outerHTML"></a>outerHTML</h5><p>返回当前元素的所有HTML代码,包括自身和子元素</p><h5 id="style"><a href="#style" class="headerlink" title="style"></a>style</h5><p>返回元素行内css</p><h5 id="children-childElementCount"><a href="#children-childElementCount" class="headerlink" title="children,childElementCount"></a>children,childElementCount</h5><p>返回子元素数组<br>返回子元素个数</p><p>与Node.childNoes区别:它只包括元素节点,不包括其他节点,计数同理;</p><h5 id="firstElementChild-lastElementChild"><a href="#firstElementChild-lastElementChild" class="headerlink" title="firstElementChild,lastElementChild"></a>firstElementChild,lastElementChild</h5><p>获取第一个子元素节点,返回最后一个子元素节点</p><h5 id="nextElementSibling-previousElementSibling"><a href="#nextElementSibling-previousElementSibling" class="headerlink" title="nextElementSibling,previousElementSibling"></a>nextElementSibling,previousElementSibling</h5><h4 id="盒子相关属性"><a href="#盒子相关属性" class="headerlink" title="盒子相关属性"></a>盒子相关属性</h4><h5 id="clientHeight-clientWidth-元素高宽减去滚动条不可见的部分"><a href="#clientHeight-clientWidth-元素高宽减去滚动条不可见的部分" class="headerlink" title="clientHeight,clientWidth (元素高宽减去滚动条不可见的部分)"></a>clientHeight,clientWidth (元素高宽减去滚动条不可见的部分)</h5><ol><li><p>Element.clientWidth;Element.clientWHeight表示元素节点的高度/宽度,只对块级元素生效,行内元素返回0;</p></li><li><p>document.documentElement的clientHeight属性，返回当前视口的高度（即浏览器窗口的高度），等同于window.innerHeight属性减去水平滚动条的高度（如果有的话）。document.body的高度则是网页的实际高度。一般来说，document.body.clientHeight大于document.documentElement.clientHeight.</p></li></ol><h5 id="clientLeft-clientTop"><a href="#clientLeft-clientTop" class="headerlink" title="clientLeft,clientTop"></a>clientLeft,clientTop</h5><ol><li><p>clientLeft属性等于元素节点左边框（left border）的宽度（单位像素），不包括左侧的padding和margin。如果没有设置左边框，或者是行内元素（display: inline），该属性返回0。该属性总是返回整数值，如果是小数，会四舍五入。</p></li><li><p>clientTop属性等于网页元素顶部边框的宽度（单位像素）</p></li></ol><h5 id="scrollHeight-scrollWidth-包括滚动条不可见的部分"><a href="#scrollHeight-scrollWidth-包括滚动条不可见的部分" class="headerlink" title="scrollHeight,scrollWidth (包括滚动条不可见的部分)"></a>scrollHeight,scrollWidth (包括滚动条不可见的部分)</h5><p>同clientHeight,clientWidth;但是包括滚动条外不可见的部分</p><h5 id="scrollLeft-scrollTop"><a href="#scrollLeft-scrollTop" class="headerlink" title="scrollLeft,scrollTop"></a>scrollLeft,scrollTop</h5><p>滚动条滚动的像素数</p><h5 id="offsetParent"><a href="#offsetParent" class="headerlink" title="offsetParent"></a>offsetParent</h5><p>返回当前最靠近的元素</p><h5 id="offsetHeight-offsetWidth"><a href="#offsetHeight-offsetWidth" class="headerlink" title="offsetHeight,offsetWidth"></a>offsetHeight,offsetWidth</h5><h5 id="offsetLeft-offsetTop"><a href="#offsetLeft-offsetTop" class="headerlink" title="offsetLeft,offsetTop"></a>offsetLeft,offsetTop</h5><h5 id="scrollIntoView"><a href="#scrollIntoView" class="headerlink" title="scrollIntoView()"></a>scrollIntoView()</h5><p>滚动当前元素</p><ol><li>true:元素顶部与当前区域的可见部分的顶部对齐</li><li>false:元素的底部与当前区域的可见部分的尾部对齐</li></ol><h5 id="getBoundingClientRect"><a href="#getBoundingClientRect" class="headerlink" title="getBoundingClientRect()"></a>getBoundingClientRect()</h5><p>返回一个对象，提供当前元素节点的大小、位置等信息，基本上就是 CSS 盒状模型的所有信息</p><p>具有以下属性:</p><pre><code>x：元素左上角相对于视口的横坐标y：元素左上角相对于视口的纵坐标height：元素高度width：元素宽度left：元素左上角相对于视口的横坐标，与x属性相等right：元素右边界相对于视口的横坐标（等于x + width）top：元素顶部相对于视口的纵坐标，与y属性相等bottom：元素底部相对于视口的纵坐标（等于y + height）</code></pre><p>由于元素相对于视口（viewport）的位置，会随着页面滚动变化，因此表示位置的四个属性值，都不是固定不变的。如果想得到绝对位置，可以将left属性加上window.scrollX，top属性加上window.scrollY.</p><p>getBoundingClientRect方法的所有属性，都把边框（border属性）算作元素的一部分。也就是说，都是从边框外缘的各个点来计算。因此，width和height包括了元素本身 + padding + border</p><h5 id="getClientRects"><a href="#getClientRects" class="headerlink" title="getClientRects()"></a>getClientRects()</h5><p>返回二维伪数组,一维里面是当前元素的所有矩形,二维数组是每个矩形的bottom、height、left、right、top和width六个属性，表示它们相对于视口的四个坐标，以及本身的高度和宽度</p><p>获取同级下一个元素节点,返回同级上一个元素节点</p><h4 id="Element接口的方法"><a href="#Element接口的方法" class="headerlink" title="Element接口的方法"></a>Element接口的方法</h4><h4 id="属性相关的操作"><a href="#属性相关的操作" class="headerlink" title="属性相关的操作"></a>属性相关的操作</h4><h5 id="attributes-这是方法"><a href="#attributes-这是方法" class="headerlink" title="attributes 这是方法"></a>attributes 这是方法</h5><p>返回元素所有的属性节点</p><h5 id="getAttribute"><a href="#getAttribute" class="headerlink" title="getAttribute()"></a>getAttribute()</h5><p>获取属性值</p><h5 id="getAttributeNames"><a href="#getAttributeNames" class="headerlink" title="getAttributeNames()"></a>getAttributeNames()</h5><p>获取该元素所有属性名,是一个数组</p><h5 id="setAttribute"><a href="#setAttribute" class="headerlink" title="setAttribute()"></a>setAttribute()</h5><p>设置当前节点属性,如存在则替换</p><h5 id="hasAttribute"><a href="#hasAttribute" class="headerlink" title="hasAttribute()"></a>hasAttribute()</h5><p>该元素是否有某属性</p><h5 id="hasAttributes"><a href="#hasAttributes" class="headerlink" title="hasAttributes()"></a>hasAttributes()</h5><p>该元素是否存在属性值</p><h5 id="removeAttribute"><a href="#removeAttribute" class="headerlink" title="removeAttribute()"></a>removeAttribute()</h5><p>移除该元素指定属性</p><h5 id="dataset-这是方法"><a href="#dataset-这是方法" class="headerlink" title="dataset  这是方法"></a>dataset  这是方法</h5><p>自定义date属性<br>格式date-xxx=”abc”;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">var article = document.getElementById(<span class="hljs-string">'foo'</span>); <br>foo.dataset.columns // data-columns=<span class="hljs-string">"3"</span> <br>foo.dataset.indexNumber // data-index-number=<span class="hljs-string">"12314"</span><br>foo.dataset.parent //data-parent=<span class="hljs-string">"cars"</span><br></code></pre></td></tr></table></figure></p><h5 id="querySelector-1"><a href="#querySelector-1" class="headerlink" title="querySelector()"></a>querySelector()</h5><p>同document</p><h5 id="querySelectorAll-1"><a href="#querySelectorAll-1" class="headerlink" title="querySelectorAll()"></a>querySelectorAll()</h5><p>同document</p><h5 id="getElementsByClassName-1"><a href="#getElementsByClassName-1" class="headerlink" title="getElementsByClassName()"></a>getElementsByClassName()</h5><p>同document</p><h5 id="getElementsByTagName-1"><a href="#getElementsByTagName-1" class="headerlink" title="getElementsByTagName()"></a>getElementsByTagName()</h5><p>同document</p><h5 id="closest"><a href="#closest" class="headerlink" title="closest()"></a>closest()</h5><p>接受一个 CSS 选择器作为参数，返回匹配该选择器的、最接近当前节点的一个祖先节点（包括当前节点本身）</p><h5 id="matches"><a href="#matches" class="headerlink" title="matches()"></a>matches()</h5><p>是否匹配CSS选择器,返回布尔值</p><h5 id="事件相关方法"><a href="#事件相关方法" class="headerlink" title="事件相关方法"></a>事件相关方法</h5><h5 id="addEventListener"><a href="#addEventListener" class="headerlink" title="addEventListener()"></a>addEventListener()</h5><p>添加事件的回调函数</p><h5 id="removeEventListener"><a href="#removeEventListener" class="headerlink" title="removeEventListener()"></a>removeEventListener()</h5><p>移除事件监听函数</p><h5 id="dispatchEvent"><a href="#dispatchEvent" class="headerlink" title="dispatchEvent()"></a>dispatchEvent()</h5><p>触发事件</p><h5 id="insertAdjacentElement-position-element"><a href="#insertAdjacentElement-position-element" class="headerlink" title="insertAdjacentElement(position, element)"></a>insertAdjacentElement(position, element)</h5><p>在指定位置插入元素,成功返回true,失败返回false</p><p>position表示插入位置,其取值为</p><pre><code>beforebegin：当前元素之前afterbegin：当前元素内部的第一个子节点前面;beforeend：当前元素内部的最后一个子节点后面afterend：当前元素之后</code></pre><p>element表示标签名</p><p>##### </p><h5 id="insertAdjacentHTML-position-text-insertAdjacentText-position-text"><a href="#insertAdjacentHTML-position-text-insertAdjacentText-position-text" class="headerlink" title="insertAdjacentHTML(position, text),insertAdjacentText(position, text)"></a>insertAdjacentHTML(position, text),insertAdjacentText(position, text)</h5><p>在指定位置插入HTML字符串/插入字符串</p><p>position, text的值同上;</p><h5 id="remove"><a href="#remove" class="headerlink" title="remove()"></a>remove()</h5><p>移除元素</p><h5 id="focus-blur"><a href="#focus-blur" class="headerlink" title="focus(),blur()"></a>focus(),blur()</h5><p>focus()将当前页面的焦点，转移到指定元素上</p><p>blur()将焦点移除</p><p>document.activeElement属性可以得到当前获得焦点的元素</p><h5 id="click"><a href="#click" class="headerlink" title="click()"></a>click()</h5><p>模拟一次鼠标点击,相当于触发click事件</p>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS几种居中</title>
      <link href="/2018/05/07/CSS%E5%87%A0%E7%A7%8D%E5%B1%85%E4%B8%AD%E6%96%B9%E5%BC%8F/"/>
      <url>/2018/05/07/CSS%E5%87%A0%E7%A7%8D%E5%B1%85%E4%B8%AD%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h3 id="几种居中布局"><a href="#几种居中布局" class="headerlink" title="几种居中布局"></a>几种居中布局</h3><p>网页预览:<br><a href="https://roxas332519096.github.io/center-in-css-demo/%E5%87%A0%E7%A7%8D%E5%B1%85%E4%B8%AD%E5%B8%83%E5%B1%80.html" target="_blank" rel="noopener">https://roxas332519096.github.io/center-in-css-demo/%E5%87%A0%E7%A7%8D%E5%B1%85%E4%B8%AD%E5%B8%83%E5%B1%80.html</a></p><p>源码:<br><a href="https://github.com/roxas332519096/center-in-css-demo/blob/master/%E5%87%A0%E7%A7%8D%E5%B1%85%E4%B8%AD%E5%B8%83%E5%B1%80.html" target="_blank" rel="noopener">https://github.com/roxas332519096/center-in-css-demo/blob/master/%E5%87%A0%E7%A7%8D%E5%B1%85%E4%B8%AD%E5%B8%83%E5%B1%80.html</a></p><h4 id="水平居中"><a href="#水平居中" class="headerlink" title="水平居中"></a>水平居中</h4><h5 id="内联元素"><a href="#内联元素" class="headerlink" title="内联元素"></a>内联元素</h5><p>子元素是内联元素或文本等,在父元素上设置text-align:center;</p><p>代码:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">.inline-horizontally&#123;<br>    text-align: center;<br>&#125;<br><br>&lt;div class=<span class="hljs-string">"inline-horizontally"</span>&gt;<br>    &lt;span&gt;这是一个内联文本&lt;/span&gt;<br>    &lt;nav&gt;<br>        &lt;a href=<span class="hljs-string">"#"</span>&gt;1&lt;/a&gt;<br>        &lt;a href=<span class="hljs-string">"#"</span>&gt;2&lt;/a&gt;<br>        &lt;a href=<span class="hljs-string">"#"</span>&gt;3&lt;/a&gt;<br>        &lt;a href=<span class="hljs-string">"#"</span>&gt;4&lt;/a&gt;<br>        &lt;a href=<span class="hljs-string">"#"</span>&gt;5&lt;/a&gt;<br>    &lt;/nav&gt;<br>&lt;/div&gt;<br></code></pre></td></tr></table></figure></p><h5 id="块状元素"><a href="#块状元素" class="headerlink" title="块状元素"></a>块状元素</h5><h5 id="拥有固定宽度的块状元素"><a href="#拥有固定宽度的块状元素" class="headerlink" title="拥有固定宽度的块状元素"></a>拥有固定宽度的块状元素</h5><p>块状元素拥有固定宽度,可将左右边距设置成auto.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">.block-horizontally&#123;<br>    width: 50%;<br>    margin-left: auto;<br>    margin-right: auto;<br>&#125;<br><br>&lt;div class=<span class="hljs-string">"block-horizontally"</span>&gt;<br>    这是一个拥有固定宽度的块状元素<br>&lt;/div&gt;<br></code></pre></td></tr></table></figure><h5 id="多个没宽度的块状元素居中"><a href="#多个没宽度的块状元素居中" class="headerlink" title="多个没宽度的块状元素居中"></a>多个没宽度的块状元素居中</h5><p>多个块状元素没有固定,子元素设置成inline-block,父元素text-algin:center.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">.block-horizontally-moreThanOne-inline-block&#123;<br>    text-align: center;<br>&#125;<br>.block-horizontally-moreThanOne-inline-block &gt; div &#123;<br>    display: inline-block;<br>&#125;<br><br> &lt;div class=<span class="hljs-string">"block-horizontally-moreThanOne-inline-block"</span>&gt;<br>    &lt;div&gt;One&lt;/div&gt;<br>    &lt;div&gt;Two&lt;/div&gt;<br>    &lt;div&gt;Three&lt;/div&gt;<br>&lt;/div&gt;<br></code></pre></td></tr></table></figure><h5 id="多个没宽度的块状元素居中-flex"><a href="#多个没宽度的块状元素居中-flex" class="headerlink" title="多个没宽度的块状元素居中,flex"></a>多个没宽度的块状元素居中,flex</h5><p>父元素设置成flex,justify-content: center.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">.block-horizontally-moreThanOne-flex&#123;<br>    display: flex;<br>    justify-content: center;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="垂直居中"><a href="#垂直居中" class="headerlink" title="垂直居中"></a>垂直居中</h4><h5 id="单行内联元素垂直居中"><a href="#单行内联元素垂直居中" class="headerlink" title="单行内联元素垂直居中"></a>单行内联元素垂直居中</h5><p>设置上下padding设置成一样</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">.inline-signle-padding&#123;<br>    padding-top:50px;<br>    padding-bottom:50px;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="单行内联元素垂直居中-1"><a href="#单行内联元素垂直居中-1" class="headerlink" title="单行内联元素垂直居中"></a>单行内联元素垂直居中</h5><p>用line-height = height</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"> .inline-signle-line-heght&#123;<br>    height: 100px;<br>    line-height: 100px;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="多行内联元素用flex-垂直左右居中"><a href="#多行内联元素用flex-垂直左右居中" class="headerlink" title="多行内联元素用flex,垂直左右居中"></a>多行内联元素用flex,垂直左右居中</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">.inline-multiple-flex&#123;<br>    display: flex;<br>    justify-content: center;<br>    flex-direction: column;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="块状元素已知高度"><a href="#块状元素已知高度" class="headerlink" title="块状元素已知高度"></a>块状元素已知高度</h5><p>用定位,子元素top 50%</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">.block-height-postion&#123;<br>    position: relative;<br>    height: 200px;<br>&#125;<br>.block-height-postion div&#123;<br>    position: absolute;<br>    top:50%;<br>    height: 100px;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="块状元素高度未知"><a href="#块状元素高度未知" class="headerlink" title="块状元素高度未知"></a>块状元素高度未知</h5><p>用定位+子元素transform:translateY(-50%)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">.block-unknowheight-postion-transform-translateY&#123;<br>    position: relative;<br>    height: 200px;<br>&#125;<br>.block-unknowheight-postion-transform-translateY div&#123;<br>    position: absolute;<br>    top:50%;<br>    transform: translateY(-50%);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML基础</title>
      <link href="/2018/05/07/HTML%E5%9F%BA%E7%A1%80/"/>
      <url>/2018/05/07/HTML%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h4 id="1-什么是HTML"><a href="#1-什么是HTML" class="headerlink" title="1.什么是HTML?"></a>1.什么是HTML?</h4><p>全称：HyperText Markup Language（超文本标记语言）。</p><h4 id="2-空标签"><a href="#2-空标签" class="headerlink" title="2.空标签"></a>2.空标签</h4><p>空标签即不能包含子元素的标签。</p><p>如：input;img;meta;link;hr;br;col;colgroup;frame;base;等。</p><h4 id="3-可替换标签"><a href="#3-可替换标签" class="headerlink" title="3.可替换标签"></a>3.可替换标签</h4><p>CSS 里，可替换元素（replaced element）的展现不是由CSS来控制的。这些元素是一类外观渲染独立于CSS的 外部对象。</p><p>如：img;object;video;textarea;input</p><p>audio;canvas有时候也是。</p><h4 id="4-a"><a href="#4-a" class="headerlink" title="4.a"></a>4.a</h4><p>超链接，方法为get</p><h5 id="常用的可选属性如下："><a href="#常用的可选属性如下：" class="headerlink" title="常用的可选属性如下："></a>常用的可选属性如下：</h5><h5 id="href-锚（必须属性）"><a href="#href-锚（必须属性）" class="headerlink" title="href 锚（必须属性）"></a>href 锚（必须属性）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;a href=<span class="hljs-string">"url"</span>&gt;&lt;/a&gt; url可是绝对路径，可相对路径<br>&lt;a href=<span class="hljs-string">"#top"</span>&gt;&lt;/a&gt; 返回页面顶部<br>&lt;a href=<span class="hljs-string">"#"</span>&gt; &lt;/a&gt;刷新页面<br>&lt;a href=<span class="hljs-string">"//"</span>&gt;&lt;/a&gt; 无协议,使用当前文件协议<br>&lt;a href=<span class="hljs-string">"javascripit:;"</span>&gt;&lt;/a&gt;伪js协议<br></code></pre></td></tr></table></figure><h5 id="target"><a href="#target" class="headerlink" title="target"></a>target</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;a href=<span class="hljs-string">"#"</span> target=<span class="hljs-string">"aaa"</span>&gt; 在aaa窗口打开<br>&lt;a href=<span class="hljs-string">"#"</span>  target=<span class="hljs-string">"_self"</span>&gt;&lt;/a&gt; 当前页面加载<br>&lt;a href=<span class="hljs-string">"#"</span> target=<span class="hljs-string">"_blank"</span>&gt;&lt;/a&gt; 新窗口加载<br>&lt;a href=<span class="hljs-string">"#"</span> target=<span class="hljs-string">"_parent"</span>&gt;&lt;/a&gt; 父页面加载<br>&lt;a href=<span class="hljs-string">"#"</span> target=<span class="hljs-string">"_top"</span>&gt;&lt;/a&gt; 顶级页面加载，如祖父级，父级<br></code></pre></td></tr></table></figure><h5 id="download-下载"><a href="#download-下载" class="headerlink" title="download 下载"></a>download 下载</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;a href=<span class="hljs-string">"xxx.com"</span> download&gt;<br></code></pre></td></tr></table></figure><h4 id="5-ifame"><a href="#5-ifame" class="headerlink" title="5.ifame"></a>5.ifame</h4><p>镶嵌页面<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;iframe src=<span class="hljs-string">"xxx.com"</span> name=<span class="hljs-string">"xxx"</span>&gt;&lt;iframe&gt;<br></code></pre></td></tr></table></figure></p><h4 id="6-form"><a href="#6-form" class="headerlink" title="6.form"></a>6.form</h4><p>表单</p><h5 id="常用属性："><a href="#常用属性：" class="headerlink" title="常用属性："></a>常用属性：</h5><h5 id="action："><a href="#action：" class="headerlink" title="action："></a>action：</h5><p>提交到哪儿 （必须）</p><ol><li>属性值为URL</li><li>#时是提交到本页面</li></ol><h5 id="methoh"><a href="#methoh" class="headerlink" title="methoh:"></a>methoh:</h5><p>方法(必须)</p><ol><li>get URI中以？作为分隔符，发送给服务器（会暴露）</li><li>post：发送内容出现在http第四部分。</li></ol><h5 id="target-1"><a href="#target-1" class="headerlink" title="target:"></a>target:</h5><p>同a标签的target</p><h4 id="7-input"><a href="#7-input" class="headerlink" title="7.input"></a>7.input</h4><h5 id="type属性："><a href="#type属性：" class="headerlink" title="type属性："></a>type属性：</h5><h5 id="text-输入文本"><a href="#text-输入文本" class="headerlink" title="text:输入文本"></a>text:输入文本</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"text"</span>&gt;<br>&lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"text"</span>  placeholder=<span class="hljs-string">"abcd"</span>&gt; <span class="hljs-comment">#默认输入abcd</span><br></code></pre></td></tr></table></figure><h5 id="textarea："><a href="#textarea：" class="headerlink" title="textarea："></a>textarea：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;textarea&gt;ABCD&lt;/textarea&gt;<br></code></pre></td></tr></table></figure><h5 id="password：输入密码"><a href="#password：输入密码" class="headerlink" title="password：输入密码"></a>password：输入密码</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"password"</span>&gt;<br></code></pre></td></tr></table></figure><h5 id="checkbox-多选"><a href="#checkbox-多选" class="headerlink" title="checkbox:多选"></a>checkbox:多选</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"checkbox"</span> name=<span class="hljs-string">"g1"</span> value=<span class="hljs-string">"1"</span> checked&gt; <span class="hljs-comment">#默认选1</span><br>&lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"checkbox"</span> name=<span class="hljs-string">"g1"</span> value=<span class="hljs-string">"2"</span>&gt;<br></code></pre></td></tr></table></figure><h5 id="radio：单选"><a href="#radio：单选" class="headerlink" title="radio：单选"></a>radio：单选</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"radio"</span> name=<span class="hljs-string">"g2"</span> value=<span class="hljs-string">"1"</span> checked&gt; <span class="hljs-comment">#默认选1</span><br>&lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"radio"</span> name=<span class="hljs-string">"g2"</span> value=<span class="hljs-string">"2"</span>&gt;<br></code></pre></td></tr></table></figure><h5 id="下拉选项"><a href="#下拉选项" class="headerlink" title="下拉选项"></a>下拉选项</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;select name=<span class="hljs-string">"select"</span> multiple&gt;可多选<br>    &lt;option value=<span class="hljs-string">"2"</span>&gt;1&lt;/option&gt;<br>    &lt;option value=<span class="hljs-string">"2"</span> selected&gt;2&lt;/option&gt;  <span class="hljs-comment">#默认选2</span><br>    &lt;option value=<span class="hljs-string">"3"</span> disabled&gt;3&lt;/option&gt; <span class="hljs-comment">#不能选3</span><br>&lt;/select&gt;<br></code></pre></td></tr></table></figure><h5 id="button："><a href="#button：" class="headerlink" title="button："></a>button：</h5><p>当没有submit时才会变成提交按钮<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;input <span class="hljs-built_in">type</span>=“button” value=“button”&gt;<br>&lt;button&gt;button&lt;/button&gt;<br></code></pre></td></tr></table></figure></p><h5 id="sumbit："><a href="#sumbit：" class="headerlink" title="sumbit："></a>sumbit：</h5><p>提交按钮<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"sumbit"</span> value=<span class="hljs-string">"button"</span>&gt;<br></code></pre></td></tr></table></figure></p><h5 id="img："><a href="#img：" class="headerlink" title="img："></a>img：</h5><p>图片提交按钮，必须使用sirc属性以及alt代替文本</p><h5 id="color"><a href="#color" class="headerlink" title="color:"></a>color:</h5><p>选择颜色</p><h5 id="date："><a href="#date：" class="headerlink" title="date："></a>date：</h5><p>选择日期(年月日，不包括时间)</p><h5 id="datetime："><a href="#datetime：" class="headerlink" title="datetime："></a>datetime：</h5><p>基于UTC时区的日期时间输入空间</p><h5 id="email"><a href="#email" class="headerlink" title="email:"></a>email:</h5><p>输入email</p><h5 id="tel"><a href="#tel" class="headerlink" title="tel:"></a>tel:</h5><p>电话</p><h5 id="file："><a href="#file：" class="headerlink" title="file："></a>file：</h5><p>上传文件（accept属性控制类型）<br>属性 accept:<br>控制file的类型，形式如下accept=”.jpg,png,doc”  点-格式-逗号</p><h5 id="range"><a href="#range" class="headerlink" title="range:"></a>range:</h5><p>用于输入不精确值空间</p><h5 id="reset"><a href="#reset" class="headerlink" title="reset:"></a>reset:</h5><p>将表达所有内容设置为缺省值的按钮</p><h5 id="search："><a href="#search：" class="headerlink" title="search："></a>search：</h5><p>搜索，换行会自动移除</p><h5 id="其他属性"><a href="#其他属性" class="headerlink" title="其他属性:"></a>其他属性:</h5><h5 id="name"><a href="#name" class="headerlink" title="name:"></a>name:</h5><p>控件名称，用于提交到服务器，后端会识别</p><h5 id="max："><a href="#max：" class="headerlink" title="max："></a>max：</h5><p>最大值</p><h5 id="mix："><a href="#mix：" class="headerlink" title="mix："></a>mix：</h5><p>最小值</p><h5 id="maxlength"><a href="#maxlength" class="headerlink" title="maxlength:"></a>maxlength:</h5><p>最大长度</p><h5 id="disabled："><a href="#disabled：" class="headerlink" title="disabled："></a>disabled：</h5><p>不可选</p><h5 id="laber"><a href="#laber" class="headerlink" title="laber"></a>laber</h5><p>关联input：</p><p>1.for属性关联input的name属性<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;laber <span class="hljs-keyword">for</span>=<span class="hljs-string">"xxx"</span>&gt;XXX&lt;laber&gt;&lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"text"</span> name=<span class="hljs-string">"xxx"</span>&gt;<br></code></pre></td></tr></table></figure></p><p>2.包裹inputype<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;laber&gt;&lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"text"</span>&gt;&lt;/laber&gt;<br></code></pre></td></tr></table></figure></p><h4 id="8-table"><a href="#8-table" class="headerlink" title="8.table"></a>8.table</h4><p>表格</p><h5 id="例"><a href="#例" class="headerlink" title="例:"></a>例:</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;table&gt;<br>    &lt;colgroup&gt;<br>    &lt;col width=100&gt;/colgroup&gt;<br>    &lt;thead&gt;<br>        &lt;tr&gt;<br>            &lt;th&gt;Head&lt;1/th&gt;<br>            &lt;th&gt;Head2&lt;/th&gt;<br>        &lt;/tr&gt;<br>    &lt;/thead&gt;<br>    &lt;tbody&gt;<br>        &lt;tr&gt;<br>            &lt;td&gt;1&lt;/td&gt;<br>            &lt;td&gt;2&lt;/td&gt;<br>        &lt;/tr&gt;<br>    &lt;/tobdy&gt;<br>    &lt;tfoot&gt;<br>        &lt;tr&gt;<br>            &lt;td&gt;Foot1&lt;/td&gt;<br>            &lt;td&gt;Foot2&lt;/td&gt;<br>        &lt;/tr&gt;<br>    &lt;/tfoot&gt;<br>&lt;/table&gt;<br></code></pre></td></tr></table></figure><h4 id="9-head"><a href="#9-head" class="headerlink" title="9.head"></a>9.head</h4><h5 id="head标签包含以下标签："><a href="#head标签包含以下标签：" class="headerlink" title="head标签包含以下标签："></a>head标签包含以下标签：</h5><h5 id="meta："><a href="#meta：" class="headerlink" title="meta："></a>meta：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;meta charset=<span class="hljs-string">"utf-8"</span>&gt;<br></code></pre></td></tr></table></figure><h5 id="titile："><a href="#titile：" class="headerlink" title="titile："></a>titile：</h5><p>窗口的标题。</p><h5 id="base：指定一个文档包含所有相对URL的基本URL，只能有一个。"><a href="#base：指定一个文档包含所有相对URL的基本URL，只能有一个。" class="headerlink" title="base：指定一个文档包含所有相对URL的基本URL，只能有一个。"></a>base：指定一个文档包含所有相对URL的基本URL，只能有一个。</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;base href=<span class="hljs-string">"http;//xxx.com"</span>&gt;<br>&lt;base target=<span class="hljs-string">"_blank"</span> href=<span class="hljs-string">"http://xxx.com"</span>&gt;<br></code></pre></td></tr></table></figure><h4 id="link："><a href="#link：" class="headerlink" title="link："></a>link：</h4><p>引入css<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;link href=<span class="hljs-string">"xxx.css"</span> rel=<span class="hljs-string">"stylesheet"</span> title=<span class="hljs-string">"xxx"</span>&gt;<br></code></pre></td></tr></table></figure></p><h5 id="style："><a href="#style：" class="headerlink" title="style："></a>style：</h5><p>使用css<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;style <span class="hljs-built_in">type</span>=<span class="hljs-string">"text/css"</span>&gt;<br>    h1&#123;color:red&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure></p><h5 id="script：使用js"><a href="#script：使用js" class="headerlink" title="script：使用js"></a>script：使用js</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;script <span class="hljs-built_in">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;document.write(<span class="hljs-string">"Hi"</span>)&lt;/script&gt;<br></code></pre></td></tr></table></figure><h5 id="noscript："><a href="#noscript：" class="headerlink" title="noscript："></a>noscript：</h5><p>当浏览器不能允许js时允许。</p>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简单server建设</title>
      <link href="/2018/05/07/%E7%AE%80%E5%8D%95server%E5%BB%BA%E8%AE%BE/"/>
      <url>/2018/05/07/%E7%AE%80%E5%8D%95server%E5%BB%BA%E8%AE%BE/</url>
      
        <content type="html"><![CDATA[<h4 id="1-TCP协议"><a href="#1-TCP协议" class="headerlink" title="1.TCP协议"></a>1.TCP协议</h4><p>全称：传输控制协议（Transmission Control Protocol）</p><p>TCP与UDP：TCP可靠（可知是否成功），面向链接（建立链接），比UDP较慢。UDP不可靠，不面向链接，比TCP快。</p><h5 id="TCP的三次握手："><a href="#TCP的三次握手：" class="headerlink" title="TCP的三次握手："></a>TCP的三次握手：</h5><ol><li>客户端：我要连接你了,可以吗</li><li>服务端：嗯，我准备好了,连接我吧</li><li>客户端：那我连接你咯.</li><li>开始后面步骤</li></ol><h4 id="2-IP协议"><a href="#2-IP协议" class="headerlink" title="2.IP协议"></a>2.IP协议</h4><h5 id="全称：网络协议（Internet-Protocol）"><a href="#全称：网络协议（Internet-Protocol）" class="headerlink" title="全称：网络协议（Internet Protocol）"></a>全称：网络协议（Internet Protocol）</h5><ol><li><p>内网不能直接访问外网，需要经过路由器（网关）</p></li><li><p>外网设备可以互相访问</p></li><li><p>外网不能访问内网，需要经过路由器（网关）</p></li></ol><h5 id="路由器："><a href="#路由器：" class="headerlink" title="路由器："></a>路由器：</h5><p>既有外网ip 也有内网ip 分配内网ip</p><p>127.0.0.1/localhost  设备自己 host文件默认下127.0.0.1 localhost 表示localhost指向127.0.0.1</p><p>0.0.0.0 不表示任何设备</p><h4 id="3-端口-Port"><a href="#3-端口-Port" class="headerlink" title="3.端口(Port)"></a>3.端口(Port)</h4><p>不仅要指定ip，还必须指定端口</p><p>服务器一个端口提供一个服务</p><h5 id="例如："><a href="#例如：" class="headerlink" title="例如："></a>例如：</h5><p>HTTP 80<br>HTTPS 443<br>FTP 21</p><p>一共2^16-1=65535个端口</p><p>0-1023（2^10-1）端口留给系统用，只有管理员权限才能使用</p><p>如果端口正在提供服务（占用），只能先停掉该端口服务，才能再使用</p><p>访问<a href="http://www.qq.com" target="_blank" rel="noopener">http://www.qq.com</a> 没有写端口，是因为浏览器自动补全</p><p>实际是<a href="http://www.qq.com:80" target="_blank" rel="noopener">http://www.qq.com:80</a></p><h4 id="4-简单node-js-server"><a href="#4-简单node-js-server" class="headerlink" title="4.简单node.js server"></a>4.简单node.js server</h4><p><a href="https://github.com/roxas332519096/nodejs_server/blob/master/server.js" target="_blank" rel="noopener">代码请点击</a></p><h5 id="使用："><a href="#使用：" class="headerlink" title="使用："></a>使用：</h5><ol><li>git bash输入node server 端口（不能是0-1023）。</li><li>别动，然后打开新的git bash窗口。</li><li>输入curl <a href="http://localhost:端口/xxx或者curl" target="_blank" rel="noopener">http://localhost:端口/xxx或者curl</a> <a href="http://127.0.0.1:端口/xxx" target="_blank" rel="noopener">http://127.0.0.1:端口/xxx</a></li><li>使用curl -s -v – “<a href="http://localhost:端口/xxx&quot;可以查看完整的请求和响应" target="_blank" rel="noopener">http://localhost:端口/xxx&quot;可以查看完整的请求和响应</a></li><li>也就可以在浏览器输入<a href="http://localhost:端口/xxx或http://127.0.0.1:端口/xxx" target="_blank" rel="noopener">http://localhost:端口/xxx或http://127.0.0.1:端口/xxx</a></li><li>按ctrl+c退出server</li></ol><h5 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h5><ol><li><p>响应的后缀没有意义，文件内容是由HTTP头部的Content-Type保证的。</p></li><li><p>HTTP路径不是文件路径；/xxx.html不一定对应xxx.html文件</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>http基础知识</title>
      <link href="/2018/05/07/http%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
      <url>/2018/05/07/http%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<h4 id="1-何为HTTP"><a href="#1-何为HTTP" class="headerlink" title="1.何为HTTP?"></a>1.何为HTTP?</h4><p>HTTP全称为HyperText Transfer Protocol（超文本传输协议.是服务器（服务端）与浏览器（客户端）之间的协议。<br>作用是指导浏览器和服务器如何沟通。</p><h4 id="2-何为URI"><a href="#2-何为URI" class="headerlink" title="2.何为URI?"></a>2.何为URI?</h4><h5 id="URI"><a href="#URI" class="headerlink" title="URI"></a>URI</h5><p>统一资源标识符（Uniform Resource Identifier).<br>URI包括URN与URL两种.</p><h5 id="URN"><a href="#URN" class="headerlink" title="URN"></a>URN</h5><p>统一资源名称 (Uniform Resource Name).<br>例如一本书,SBN: 9787115275790 就是一个 URN，通过 URN 你可以确定一个「唯一的」资源.<br>URN也是独一无二的.</p><h5 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h5><p>统一资源定位符 (Uniform Resource Locator).<br>也就是我们常说的网址,通过 URL 你可以确定一个「唯一的」地址（网址）。</p><p>例如:<a href="https://www.baidu.com/s?wd=hello&amp;rsv_spt=1#5" target="_blank" rel="noopener">https://www.baidu.com/s?wd=hello&amp;rsv_spt=1#5</a> 就是一个 URL<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">https://           协议<br>www.baidu.com      域名<br>/s                 路径<br>wd=hello&amp;rsv_spt=1 查询参数<br>井号5              锚点<br></code></pre></td></tr></table></figure></p><h4 id="3-何为DNS"><a href="#3-何为DNS" class="headerlink" title="3.何为DNS?"></a>3.何为DNS?</h4><p>DNS（Domain Name System，域名系统），，万维网上作为域名和IP地址相互映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。过域名，最终得到该域名对应的IP地址的过程叫做域名解析（或主机名解析）。DNS协议运行在UDP协议之上，使用端口号53。</p><p>其作用是输入域名,输出IP.</p><h4 id="4-git-curl-命令"><a href="#4-git-curl-命令" class="headerlink" title="4.git curl 命令"></a>4.git curl 命令</h4><p>curl 是一个利用URL规则在命令行下工作的文件传输工具。</p><p>语法:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ crulp [option] -- [url]<br></code></pre></td></tr></table></figure><p>例:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl --<span class="hljs-string">"https://www.baidu.com"</span><br></code></pre></td></tr></table></figure><h4 id="5-HTTP-请求"><a href="#5-HTTP-请求" class="headerlink" title="5.HTTP 请求"></a>5.HTTP 请求</h4><h5 id="格式"><a href="#格式" class="headerlink" title="格式:"></a>格式:</h5><p>1 动词 路径 协议/版本<br>2 Key1: value1<br>2 Key2: value2<br>2 Key3: value3<br>3（回车）<br>4 要上传的数据</p><p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">POST / HTTP/1.1         //动词：POST 路径 / 协议/版本：HTTP/1.1<br>Host: www.baidu.com     //Key1:value1<br>User-Agent: curl/7.54.0 //key2:value2<br>Accept: */*            //Key3:value3             <br>Frank: xxx             //key4:value4<br>Content-Length: 10     //key5:value5<br>Content-Type: application/x-www-form-urlencoded //key6:value6<br>（回车）<br>1234567890             //要上传的数据<br></code></pre></td></tr></table></figure></p><h5 id="使用Chrome开发者工具查看HTTP请求内容"><a href="#使用Chrome开发者工具查看HTTP请求内容" class="headerlink" title="使用Chrome开发者工具查看HTTP请求内容"></a>使用Chrome开发者工具查看HTTP请求内容</h5><p>1.打开 Network<br>2.地址栏输入网址<br>3.在 Network 点击，查看 request，点击「view source」<br>4.点击「view source」<br>5.如果有请求的第四部分，那么在 FormData 或 Payload 里面可以看到</p><h4 id="5-HTTP-响应"><a href="#5-HTTP-响应" class="headerlink" title="5.HTTP 响应"></a>5.HTTP 响应</h4><h5 id="格式-1"><a href="#格式-1" class="headerlink" title="格式:"></a>格式:</h5><p>1 协议/版本号 状态码 状态解释<br>2 Key1: value1<br>2 Key2: value<br>3 （回车）<br>4 要下载的内容</p><p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">HTTP/1.1 302 Found  //协议/版本号：HTTP/1.1 状态码：302 状态解释：OK<br>Connection: Keep-Alive //Key1: value1<br>Content-Length: 17931 //Key2: value2<br>Content-Type: text/html //Key3: value3<br>Date: Tue, 10 Oct 2017 09:19:47 GMT //Key4: value4<br>Etag: <span class="hljs-string">"54d9749e-460b"</span> //Key5: value5<br>Server: bfe/1.0.8.18 //Key6: value6<br>（回车）<br>&lt;html&gt;.....(省略)...&lt;/html&gt;<br></code></pre></td></tr></table></figure></p><h5 id="使用Chrome开发者工具查看HTTP响应内容"><a href="#使用Chrome开发者工具查看HTTP响应内容" class="headerlink" title="使用Chrome开发者工具查看HTTP响应内容"></a>使用Chrome开发者工具查看HTTP响应内容</h5><p>1.打开 Network<br>2.输入网址<br>3.选中第一个响应<br>4.查看 Response Headers，点击「view source」<br>5.查看 Response 或者 Preview，你会看到响应的第 4 部分</p><h4 id="6-状态码"><a href="#6-状态码" class="headerlink" title="6.状态码"></a>6.状态码</h4><p>1XX 信息<br>2XX 成功<br>3XX 重定向<br>4XX 客户端错误<br>5XX 服务器错误</p><h4 id="7-一个页面从输入-URL-到页面加载显示完成，这个过程中都发生了什么？"><a href="#7-一个页面从输入-URL-到页面加载显示完成，这个过程中都发生了什么？" class="headerlink" title="7.一个页面从输入 URL 到页面加载显示完成，这个过程中都发生了什么？"></a>7.一个页面从输入 URL 到页面加载显示完成，这个过程中都发生了什么？</h4><ol><li><p>浏览器地址栏输入url</p></li><li><p>浏览器会先查看浏览器缓存–系统缓存–路由缓存，如有存在缓存，就直接显示。如果没有，接着第三步</p></li><li><p>域名解析（DNS）获取相应的ip</p></li><li><p>浏览器向服务器发起tcp连接，与浏览器建立tcp三次握手</p></li><li><p>握手成功，浏览器向服务器发送http请求，请求数据包</p></li><li><p>服务器请求数据，将数据返回到浏览器</p></li><li><p>浏览器接收响应，读取页面内容，解析html源码，生成DOm树</p></li><li><p>解析css样式、浏览器渲染，js交互</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git简单命令</title>
      <link href="/2018/04/14/Git%E7%AE%80%E5%8D%95%E5%91%BD%E4%BB%A4/"/>
      <url>/2018/04/14/Git%E7%AE%80%E5%8D%95%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h4 id="1-更新文件到Github相关操作"><a href="#1-更新文件到Github相关操作" class="headerlink" title="1.更新文件到Github相关操作"></a>1.更新文件到Github相关操作</h4><h5 id="1-1初始化仓库"><a href="#1-1初始化仓库" class="headerlink" title="1.1初始化仓库"></a>1.1初始化仓库</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git init<br></code></pre></td></tr></table></figure><h5 id="1-2将添加文件放到缓存区"><a href="#1-2将添加文件放到缓存区" class="headerlink" title="1.2将添加文件放到缓存区"></a>1.2将添加文件放到缓存区</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git add 文件路径<br></code></pre></td></tr></table></figure><p>查看缓存区文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git status<br></code></pre></td></tr></table></figure></p><h5 id="1-3提交到git仓库"><a href="#1-3提交到git仓库" class="headerlink" title="1.3提交到git仓库"></a>1.3提交到git仓库</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git commit -m “提交信息”<br></code></pre></td></tr></table></figure><h5 id="1-4-PULL"><a href="#1-4-PULL" class="headerlink" title="1.4 PULL"></a>1.4 PULL</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git pull<br></code></pre></td></tr></table></figure><h5 id="1-5-PUSH"><a href="#1-5-PUSH" class="headerlink" title="1.5 PUSH"></a>1.5 PUSH</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pash">git push<br></code></pre></td></tr></table></figure><h4 id="2-对文件操作"><a href="#2-对文件操作" class="headerlink" title="2.对文件操作"></a>2.对文件操作</h4><p>进入文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span><br></code></pre></td></tr></table></figure><p>查看当前目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">pwd</span><br></code></pre></td></tr></table></figure><p>新建文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mkdir 文件夹Name<br></code></pre></td></tr></table></figure><p>新建文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">touch 文件Name.后缀<br></code></pre></td></tr></table></figure><p>修改文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">"hi"</span> &gt; 1.txt<br><span class="hljs-built_in">echo</span> <span class="hljs-string">"hi"</span> &gt;&gt; 1.txt<br><span class="hljs-built_in">echo</span> <span class="hljs-string">"hi"</span> &gt;! 1.txt<br></code></pre></td></tr></table></figure></p><p>复制文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cp -r<br></code></pre></td></tr></table></figure><p>删除文件/文件夹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rm -rf<br></code></pre></td></tr></table></figure></p><p>移动文件/重命名<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">mv 旧名字 新名字<br>mv 源路径 目标路径<br></code></pre></td></tr></table></figure></p><p>查看目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">git ls<br>git ls -a<br>git ls -l<br>git ls -al<br></code></pre></td></tr></table></figure><p>链接文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git cat -file 路径<br></code></pre></td></tr></table></figure><h4 id="3-查询git命令的网址"><a href="#3-查询git命令的网址" class="headerlink" title="3.查询git命令的网址"></a>3.查询git命令的网址</h4><p><a href="explainshell.com">explainshell.com</a></p><p>输入框输入所需命令，即可查阅命令的用途与包含的参数</p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HEXO博客相关操作</title>
      <link href="/2018/04/14/HEXO%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/"/>
      <url>/2018/04/14/HEXO%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h2 id="1-发布新的博客"><a href="#1-发布新的博客" class="headerlink" title="1.发布新的博客"></a>1.发布新的博客</h2><p>git bash 输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">"标题"</span><br>$ start C:\Users\Administrator\desktop\myBlog\<span class="hljs-built_in">source</span>\_posts\标题.md<br>$ hexo generate<br>$ hexo deploy<br></code></pre></td></tr></table></figure><h2 id="2-更改博客主题"><a href="#2-更改博客主题" class="headerlink" title="2.更改博客主题"></a>2.更改博客主题</h2><p><a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="noopener">主题合集</a></p><h3 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h3><p>假如找的是<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">https://github.com/iissnan/hexo-theme-next</a><br>输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> themes<br>git <span class="hljs-built_in">clone</span> git@github.com:iissnan/hexo-theme-next.git<br><span class="hljs-built_in">cd</span> ..<br></code></pre></td></tr></table></figure></p><p>_config.yml 的第 75 行改为 theme: hexo-theme-next，保存<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo generate<br>hexo deploy<br></code></pre></td></tr></table></figure></p><h2 id="3-布局相关操作"><a href="#3-布局相关操作" class="headerlink" title="3.布局相关操作"></a>3.布局相关操作</h2><h4 id="3-1引入代码块"><a href="#3-1引入代码块" class="headerlink" title="3.1引入代码块"></a>3.1引入代码块</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;% codeblock [title] [lang:language] [url] [link text] %&#125;<br>Hello World<br>&#123;% endcodeblock %&#125;<br></code></pre></td></tr></table></figure><h5 id="或"><a href="#或" class="headerlink" title="或:"></a>或:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ">`` ` bash   \\去掉中间空格<br>Hello World<br>`` `        \\去掉中间空格<br></code></pre></td></tr></table></figure><h4 id="3-2图片"><a href="#3-2图片" class="headerlink" title="3.2图片"></a>3.2图片</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;% img [class names] /path/to/image [width] [height] [title text [alt text]] %&#125;<br></code></pre></td></tr></table></figure><h4 id="3-3链接"><a href="#3-3链接" class="headerlink" title="3.3链接"></a>3.3链接</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;% link text url [external] [title] %&#125;<br></code></pre></td></tr></table></figure><h5 id="或-1"><a href="#或-1" class="headerlink" title="或:"></a>或:</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">[title](link)<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 库 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>categories</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
