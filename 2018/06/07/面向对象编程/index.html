<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><meta name="theme-color" content="#2d4356"><meta name="baidu-site-verification"><title>面向对象编程 | RoxasDengBlog</title><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.png"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script></head><link rel="stylesheet" type="text/css" href="/plugins/highlight/atom-one-dark.min.css"><script type="text/javascript" src="/plugins/highlight/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();
</script><script type="text/javascript" src="/js/ready.js" async></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><body class="night"><div class="mobile-head" id="mobile-head"><div class="navbar-icon"><span></span><span></span><span></span></div><div class="navbar-title"><a href="/">LITREILY</a></div><div class="navbar-search"><!--= show a circle here--></div></div><div class="h-wrapper" id="menu"><nav class="h-head box"><div class="m-hdimg"><a class="hdimg img" href="/"><img class="nofancybox" src="/img/profile.jpg" width="128" height="128"></a><h1 class="ttl"><a href="/">RoxasDengBlog</a></h1></div><p class="m-desc">心之所向，无惧无悔,<br>愿求仁得仁，复无怨怼！</p><div class="m-nav"><ul><li><span class="dot">●</span><a href="/archives/">归档</a></li><li><span class="dot">●</span><a href="/categories/">分类</a></li><li><span class="dot">●</span><a href="/tags/">标签</a></li><li><span class="dot">●</span><a href="/about/">关于</a></li><li><span class="dot">●</span><a href="/atom.xml">RSS</a></li><li class="m-sch"><form class="form" id="j-formsch" method="get"><input class="txt" type="text" id="local-search-input" name="q" value="搜索" onfocus="if(this.value=='搜索'){this.value='';}" onblur="if(this.value==''){this.value='搜索';}"><input type="text" style="display:none;"></form></li></ul><div id="local-search-result"></div></div></nav></div><div id="back2Top"><a class="fa fa-arrow-up" title="Back to top" href="#"></a></div><div class="box" id="container"><div class="l-wrapper"><div class="l-content box"><div class="l-post l-post-art"><article class="p-art"><div class="p-header box"><h1 class="p-title">面向对象编程</h1><div class="p-info"><span class="p-date"><i class="fa fa-calendar"></i><a href="/2018/06/07/面向对象编程/">2018-06-07</a></span><span class="p-category"><i class="fa fa-folder"></i><a href="/categories/JS/">JS</a></span><span class="p-view" id="busuanzi_container_page_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span></span></div></div><div class="p-content"><h3 id="面向对象编程"><a href="#面向对象编程" class="headerlink" title="面向对象编程"></a>面向对象编程</h3><p>Object  - Oriented</p>
<p>OOP </p>
<p>以对象为面向的编程</p>
<h4 id="请背诵"><a href="#请背诵" class="headerlink" title="请背诵:"></a>请背诵:</h4><h5 id="Class-类"><a href="#Class-类" class="headerlink" title="Class 类"></a>Class 类</h5><p>定义对象的特征。它是对象的属性和方法的模板定义.</p>
<h5 id="Object-对象"><a href="#Object-对象" class="headerlink" title="Object 对象"></a>Object 对象</h5><p>类的一个实例。</p>
<h5 id="Property-属性"><a href="#Property-属性" class="headerlink" title="Property 属性"></a>Property 属性</h5><p>对象的特征，比如颜色。</p>
<h5 id="Method-方法"><a href="#Method-方法" class="headerlink" title="Method 方法"></a>Method 方法</h5><p>对象的能力，比如行走。</p>
<h5 id="Constructor-构造函数"><a href="#Constructor-构造函数" class="headerlink" title="Constructor 构造函数"></a>Constructor 构造函数</h5><p>对象初始化的瞬间, 被调用的方法. 通常它的名字与包含它的类一致.</p>
<h5 id="Inheritance-继承"><a href="#Inheritance-继承" class="headerlink" title="Inheritance 继承"></a>Inheritance 继承</h5><p>一个类可以继承另一个类的特征。</p>
<h5 id="Encapsulation-封装"><a href="#Encapsulation-封装" class="headerlink" title="Encapsulation 封装"></a>Encapsulation 封装</h5><p>一种把数据和相关的方法绑定在一起使用的方法.</p>
<h5 id="Abstraction-抽象"><a href="#Abstraction-抽象" class="headerlink" title="Abstraction 抽象"></a>Abstraction 抽象</h5><p>结合复杂的继承，方法，属性的对象能够模拟现实的模型。</p>
<h5 id="Polymorphism-多态"><a href="#Polymorphism-多态" class="headerlink" title="Polymorphism 多态"></a>Polymorphism 多态</h5><p>多意为‘许多’，态意为‘形态’。不同类可以定义相同的方法或属性。</p>
<h4 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间:"></a>命名空间:</h4><pre><code class="bash">var a = a || {};
</code></pre>
<p>对于<br>a || b<br>c &amp;&amp; d</p>
<p>值基本不可能是true/fasle</p>
<p>&amp;&amp; 找第一个fasle值<br>例如</p>
<pre><code class="bash">1 &amp;&amp; 0 &amp;&amp; 1
</code></pre>
<p>返回0</p>
<pre><code class="bash">1 &amp;&amp; 0 &amp;&amp; console.log(2)
返回0,并且console.log不执行
</code></pre>
<p>|| 找第一个true值<br>例如</p>
<pre><code class="bash">var a = b || {}
返回{}
</code></pre>
<h4 id="类Class"><a href="#类Class" class="headerlink" title="类Class"></a>类Class</h4><p>造一个模板</p>
<h5 id="View"><a href="#View" class="headerlink" title="View"></a>View</h5><p>封装view</p>
<pre><code class="bash">window.View = function(selector){
    return document.querySelector(selector)
}
</code></pre>
<p>引用View</p>
<pre><code class="bash">var view = View(&#39;#leaveMessages&#39;);
</code></pre>
<h5 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h5><p>封装Model</p>
<pre><code class="bash">    window.Model = function(options){
        let resourceName = options.resourceName;
        return {
            init:function(){
                var APP_ID = &#39;6lvWkua1rf93YuTrlvBN8GVR-gzGzoHsz&#39;;
                var APP_KEY = &#39;uPlBTdzbkh8JANXfgEN8j0Lv&#39;;
                AV.init({
                appId: APP_ID,
                appKey: APP_KEY})
            },
            fetch:function(){
                var query = new AV.Query(resourceName);
                return query.find();
            },
            save:function(username,content){
                var Messages = AV.Object.extend(resourceName);
                var messages = new Messages();
                return messages.save(object)
            }
        }
    }
</code></pre>
<p>调用Model</p>
<pre><code class="bash">var model = Model({resourceName:&#39;Messages&#39;});
 model.init();
 model.fetch();
 model.save({&#39;username&#39;: username,&#39;content&#39;:content});
</code></pre>
<h5 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h5><p>封装Controller</p>
<pre><code class="bash">window.Controller = function(options){
    var init = options.init;
    let object = {
        view: null,
        model: null,
        init: function(view,model){
            this.view = view;
            this.model = model;
            this.model.init();
            init.call(this,view,model);
            options.bindEvents.call(this);
        },
    }
    for (let key in options){
        if(key !== &#39;init&#39;){
            object[key] = options[key]
        }
    }
}
</code></pre>
<p>调用Controller</p>
<pre><code class="bash">var controller = Controller({
        init: function(view,controller){
            this.messageList = view.querySelector(&#39;#messageList&#39;);
            this.form = view.querySelector(&#39;form&#39;);
            this.loadMessages();
        },
        loadMessages: function(){
            this.model.fetch().then(
                (messages) =&gt; {
                    let array = messages.map((item) =&gt; item.attributes);
                    array.forEach((item) =&gt; {
                        let li = document.createElement(&#39;li&#39;);
                        li.innerText = `${item.username} : ${item.content}`;
                        this.messageList.appendChild(li);
                    })
                }
            )
        },
        bindEvents: function(){
            this.form.addEventListener(&#39;submit&#39;,(e) =&gt; {
                e.preventDefault();
                this.saveMessage();
            })
        },
        saveMessage: function(){
            let myForm = this.form;
            let content = myForm.querySelector(&#39;input[name=content]&#39;).value;
            let username = myForm.querySelector(&#39;input[name=username]&#39;).value;
            if(content !== &#39;&#39; &amp;&amp; username !== &#39;&#39;){
                this.model.save(username,content).then(function(object){
                    let li = document.createElement(&#39;li&#39;);
                    li.innerText = `${object.attributes.username} : ${object.attributes.content}`;
                    let messagesList = document.querySelector(&#39;#messageList&#39;);
                    messagesList.appendChild(li);
                    myForm.querySelector(&#39;input[name=content]&#39;).value = &#39;&#39;;
                })
          }else  {
              alert(&#39;请输入用户名或者留言内容&#39;);
          }
        }
    }
);
</code></pre>
<h4 id="如何寻找this"><a href="#如何寻找this" class="headerlink" title="如何寻找this?"></a>如何寻找this?</h4><ol>
<li><p>controller === object</p>
</li>
<li><p>controller.init(view, model)<br>controller.init.call(controller, view, model)<br>那么 controller.init 里面的 this 当然 TM 是 controller<br>也就是这个1里面的object<br>controller.init 里面的 this 就是 object<br>object.init 里面的 this 就是 object</p>
</li>
</ol>
<ol start="3">
<li>initB.call(this)<br>initB 里面的 this === call 后面的this<br>call 后面 this === 第二条里的 this<br>第二条里面的 this === object<br>=&gt; initB 里面的 this 就是 object</li>
</ol>
<h4 id="复习this"><a href="#复习this" class="headerlink" title="复习this"></a>复习this</h4><pre><code class="bash">function X(){
    return object = {
        name:&#39;object&#39;,
        f1(x){
            x.f2();
        },
        f2(){
            console.log(this); //A
        }
    }
}

var options = {
    name:&#39;options&#39;,
    f1(){},
    f2(){
        console.log(this); //B
    }
}

var x = X();
x.f1(options);
</code></pre>
<p>B options</p>
<p>why?</p>
<p>x=X(),那么X().f1(options)<br>X()return object,那么object.f1(options)<br>object里的f1那么就是f1(x){x.f2()}<br>x是options,那么就是f1(options){options.f2()};<br>f2是console.log(this),this是options,打印options</p>
<pre><code class="bash">function X(){
    return object = {
        name:&#39;object&#39;,
        f1(x){
            x.f2.call(this);
        },
        f2(){
            console.log(this); //C 
        }
    }
}

var options = {
    name:&#39;options&#39;,
    f1(){},
    f2(){
        console.log(this);  //D
    }
}

var x = X();
x.f1(options);
</code></pre>
<p>D object</p>
<p>why?</p>
<p>x.f2.call(this) this === object<br>x.f2 === options.console.log(this)<br>this === object</p>
<pre><code class="bash">function X(){
    return object = {
        name:&#39;object&#39;,
        options:null,
        f1(x){
            this.options = x;
            this.f2();
        },
        f2(){
            this.options.f2.call(this);
        }
    }
}

var options = {
    name:&#39;options&#39;,
    f1(){},
    f2(){
        console.log(this);  //this === ?
    }
}

var x = X();
x.f1(options);
</code></pre>
<p>this === object;</p>
<p>why?</p>
<p>this = object;<br>object.options = x;//object.options = options;<br>this.f2() === object.f2() === object.options.f2.call(this);</p>
<h4 id="new"><a href="#new" class="headerlink" title="new"></a>new</h4><p>var object = new Object();</p>
<p>自有属性 空</p>
<p>oject.<strong>proto</strong> === Object.prototype;</p>
<p>var array = new Array(‘a’,’b’,’c’);</p>
<p>自有属性 0:’a’,1:’b’,2:’c’,length:3</p>
<p>array.<strong>proto</strong> === Array.prototype;<br>Array.prototype.<strong>proto</strong> === Object.prototype;</p>
<p>Array is a function!<br>Array.<strong>proto</strong> === function.prototype;</p>
<p>构造一个new</p>
<pre><code class="bash">function Human(options){
   this.name = options.name;
   this.city = options.city;
}

Human.prototype.species = &#39;Human&#39;;
Human.prototype.walk = function(){};
Human.prototype.useTools = function(){};
</code></pre>
<p>调用</p>
<pre><code class="bash">var human = new Human({name:&#39;Frank&#39;, city: &#39;Hangzhou&#39;})
var human2 = new Human({name:&#39;Jack&#39;, city: &#39;Hangzhou&#39;})
</code></pre>
<p>其中</p>
<pre><code class="bash">human.__proto__.constructor === Human //true
</code></pre>
</div><div class="p-copyright"><blockquote><div class="p-copyright-author"><span class="p-copyright-key">本文作者：</span><span class="p-copytight-value"><a href="mailto:litreily@163.com">Roxas Deng</a></span></div><div class="p-copyright-link"><span class="p-copyright-key">本文链接：</span><span class="p-copytight-value"><a href="/2018/06/07/面向对象编程/">http://yoursite.com/2018/06/07/面向对象编程/</a></span></div><div class="p-copyright-note"><span class="p-copyright-key">版权声明：</span><span class="p-copytight-value">本博客所有文章除特殊声明外，均采用<a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/"> CC BY-NC 4.0 </a>许可协议。转载请注明出处 <a href="http://yoursite.com">Roxas Deng的博客</a>！</span></div></blockquote></div></article><div class="p-info box"><span class="p-tags"><i class="fa fa-tag"></i><a href="/tags/JS/">JS</a></span></div><aside id="toc"><div class="toc-title">目录</div><nav><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#面向对象编程"><span class="toc-number">1.</span> <span class="toc-text">面向对象编程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#请背诵"><span class="toc-number">1.1.</span> <span class="toc-text">请背诵:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Class-类"><span class="toc-number">1.1.1.</span> <span class="toc-text">Class 类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Object-对象"><span class="toc-number">1.1.2.</span> <span class="toc-text">Object 对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Property-属性"><span class="toc-number">1.1.3.</span> <span class="toc-text">Property 属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Method-方法"><span class="toc-number">1.1.4.</span> <span class="toc-text">Method 方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Constructor-构造函数"><span class="toc-number">1.1.5.</span> <span class="toc-text">Constructor 构造函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Inheritance-继承"><span class="toc-number">1.1.6.</span> <span class="toc-text">Inheritance 继承</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Encapsulation-封装"><span class="toc-number">1.1.7.</span> <span class="toc-text">Encapsulation 封装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Abstraction-抽象"><span class="toc-number">1.1.8.</span> <span class="toc-text">Abstraction 抽象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Polymorphism-多态"><span class="toc-number">1.1.9.</span> <span class="toc-text">Polymorphism 多态</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命名空间"><span class="toc-number">1.2.</span> <span class="toc-text">命名空间:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#类Class"><span class="toc-number">1.3.</span> <span class="toc-text">类Class</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#View"><span class="toc-number">1.3.1.</span> <span class="toc-text">View</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Model"><span class="toc-number">1.3.2.</span> <span class="toc-text">Model</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Controller"><span class="toc-number">1.3.3.</span> <span class="toc-text">Controller</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#如何寻找this"><span class="toc-number">1.4.</span> <span class="toc-text">如何寻找this?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#复习this"><span class="toc-number">1.5.</span> <span class="toc-text">复习this</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#new"><span class="toc-number">1.6.</span> <span class="toc-text">new</span></a></li></ol></li></ol></nav></aside></div><section class="p-ext"><div class="l-pager l-pager-dtl box"><a class="prev" href="/2018/06/09/异步同步与回调/">&lt; 异步同步与回调</a><a class="next" href="/2018/06/06/MVC与Leancloud数据库使用/">MVC与Leancloud数据库使用 &gt;</a></div></section><footer><p>Copyright © 2016 - 2023 <a href="/." rel="nofollow">RoxasDengBlog</a> | <strong><a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></strong><br><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span></span> <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span></span> | Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a>Theme with<a rel="nofollow" target="_blank" href="https://github.com/litreily/snark-hexo"> snark.</a></p></footer></div></div></div><script type="text/javascript" src="/js/search.js"></script><script type="text/javascript" src="/js/top.js"></script><script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
    search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script></body></html>