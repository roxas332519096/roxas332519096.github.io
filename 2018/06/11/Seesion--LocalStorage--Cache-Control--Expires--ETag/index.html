<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><meta name="theme-color" content="#2d4356"><meta name="baidu-site-verification"><title>Session/LocalStorage/Cache-Control/Expires/ETag | RoxasDengBlog</title><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.png"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script></head><link rel="stylesheet" type="text/css" href="/plugins/highlight/atom-one-dark.min.css"><script type="text/javascript" src="/plugins/highlight/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();
</script><script type="text/javascript" src="/js/ready.js" async></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><body class="night"><div class="mobile-head" id="mobile-head"><div class="navbar-icon"><span></span><span></span><span></span></div><div class="navbar-title"><a href="/">LITREILY</a></div><div class="navbar-search"><!--= show a circle here--></div></div><div class="h-wrapper" id="menu"><nav class="h-head box"><div class="m-hdimg"><a class="hdimg img" href="/"><img class="nofancybox" src="/img/profile.jpg" width="128" height="128"></a><h1 class="ttl"><a href="/">RoxasDengBlog</a></h1></div><p class="m-desc">心之所向，无惧无悔,<br>愿求仁得仁，复无怨怼！</p><div class="m-nav"><ul><li><span class="dot">●</span><a href="/archives/">归档</a></li><li><span class="dot">●</span><a href="/categories/">分类</a></li><li><span class="dot">●</span><a href="/tags/">标签</a></li><li><span class="dot">●</span><a href="/about/">关于</a></li><li><span class="dot">●</span><a href="/atom.xml">RSS</a></li><li class="m-sch"><form class="form" id="j-formsch" method="get"><input class="txt" type="text" id="local-search-input" name="q" value="搜索" onfocus="if(this.value=='搜索'){this.value='';}" onblur="if(this.value==''){this.value='搜索';}"><input type="text" style="display:none;"></form></li></ul><div id="local-search-result"></div></div></nav></div><div id="back2Top"><a class="fa fa-arrow-up" title="Back to top" href="#"></a></div><div class="box" id="container"><div class="l-wrapper"><div class="l-content box"><div class="l-post l-post-art"><article class="p-art"><div class="p-header box"><h1 class="p-title">Session/LocalStorage/Cache-Control/Expires/ETag</h1><div class="p-info"><span class="p-date"><i class="fa fa-calendar"></i><a href="/2018/06/11/Seesion--LocalStorage--Cache-Control--Expires--ETag/">2018-06-11</a></span><span class="p-category"><i class="fa fa-folder"></i><a href="/categories/HTTP/">HTTP</a></span><span class="p-view" id="busuanzi_container_page_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span></span></div></div><div class="p-content"><h4 id="Session-与-Cookie-的关系与区别"><a href="#Session-与-Cookie-的关系与区别" class="headerlink" title="Session 与 Cookie 的关系与区别"></a>Session 与 Cookie 的关系与区别</h4><p>关系:</p>
<p>Session 基于 Cookie 实现的.</p>
<p>区别:</p>
<p>Cookie 保存在客户端，每次都随请求发送给 Server.<br>Session 保存在 Server 的内存里，其 Session ID 是通过 Cookie 发送给客户端的.</p>
<h4 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h4><ol>
<li>服务器通过 Set-Cookie 头给客户端一串字符串;</li>
<li>客户端每次访问相同域名的网页时,必须带上这段字符串;</li>
<li>客户端要在一段时间内保存这个Cookie.</li>
<li>Cookie最大存储量4K.</li>
<li>Cookie默认在用户关闭页面后就失效,后台代码可以任意设置 Cookeie 的过期时间.</li>
</ol>
<h4 id="什么是Seesion"><a href="#什么是Seesion" class="headerlink" title="什么是Seesion?"></a>什么是Seesion?</h4><ol>
<li>服务器将SessionID(随机数)通过Cookie发给客户端;</li>
<li>客户端访问服务器时,服务器读取SessionID;</li>
<li>服务器有一块内存(哈希表)保存了所有Session</li>
<li>通过SessionID我们可以得到用户的隐私信息,如id,email;</li>
<li>这块内存(哈希表)就是服务器上的所有session.</li>
</ol>
<h4 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h4><h5 id="什么是localStorage"><a href="#什么是localStorage" class="headerlink" title="什么是localStorage?"></a>什么是localStorage?</h5><p>持久化存储</p>
<p>HTML5里的API<br>window.localStorage</p>
<h5 id="方法"><a href="#方法" class="headerlink" title="方法:"></a>方法:</h5><ol>
<li>localStorage.setItem();</li>
<li>localStorage.getItem();</li>
<li>localStorage.removeItem();</li>
</ol>
<h5 id="特点"><a href="#特点" class="headerlink" title="特点:"></a>特点:</h5><ol>
<li>localStorage 跟 HTTP 无关;</li>
<li>HTTP不会带上 localStorage 的值;</li>
<li>只有相同域名的页面才能互相读取 localStorage(没有同源那么严格);</li>
<li>每个域名localStorage 最大存储量为5 MB 左右 (每个浏览器不一样);</li>
<li>常用场景: 记录有没有提示过用户 (没有用的信息,不能记录密码);</li>
<li>localStorage 永久有效,除非用户清除缓存.</li>
</ol>
<h6 id="LocalStorage与Cookie的区别"><a href="#LocalStorage与Cookie的区别" class="headerlink" title="LocalStorage与Cookie的区别."></a>LocalStorage与Cookie的区别.</h6><p>Cookie在客户端每次发送请求跟服务器响应都会带上,通过服务器设置过期时间,最大4KB.<br>LocalStorage跟HTTP无关,请求时不会带上它的值,它永久有效.最大5MB.</p>
<h5 id="SessionStorage-会话存储"><a href="#SessionStorage-会话存储" class="headerlink" title="SessionStorage(会话存储)"></a>SessionStorage(会话存储)</h5><ol>
<li>SessionStorage 跟 HTTP 无关;</li>
<li>HTTP不会带上 SessionStorage 的值;</li>
<li>只有相同域名的页面才能互相读取 SessionStorage(没有同源那么严格);</li>
<li>每个域名lSessionStorage 最大存储量为5 MB 左右 (每个浏览器不一样);</li>
<li>SessionStorage 在用户关闭页面(会话结束)后失效.</li>
</ol>
<h5 id="SessionStorage与LocalStorage区别"><a href="#SessionStorage与LocalStorage区别" class="headerlink" title="SessionStorage与LocalStorage区别"></a>SessionStorage与LocalStorage区别</h5><p>LocalStorage永久有效,SessionStorage页面关闭后失效.</p>
<h4 id="HTTP-缓存-Cache"><a href="#HTTP-缓存-Cache" class="headerlink" title="HTTP 缓存(Cache)"></a>HTTP 缓存(Cache)</h4><h5 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h5><p>用来区分对应缓存机制的支持情况,在请求头和响应头都支持这个属性.</p>
<p>假如在缓存有效期内,对于同样的URL,浏览器不会对服务器发出HTTP请求,而是从内存中获取数据.</p>
<p>时间是经过多久时间后过期.</p>
<h5 id="更新缓存"><a href="#更新缓存" class="headerlink" title="更新缓存"></a>更新缓存</h5><p>可以做入口改动,利用URL的查询参数更新缓存.<br>比如:<br>在HTML文件里改对应文件的URL.<link rel="stylesheet" href="css/style.css?v2">,</p>
<h5 id="为什么首页不能设置Cache-Control"><a href="#为什么首页不能设置Cache-Control" class="headerlink" title="为什么首页不能设置Cache-Control"></a>为什么首页不能设置Cache-Control</h5><p>因为用户不能从服务器中获取最新网页.</p>
<h5 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h5><p>如果设置Cache-Control那么Expires会被忽略.</p>
<p>时间是一个时间点,即几分几秒过期,时间指的是本地时间,不靠谱.</p>
<h5 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h5><p>一个摘要算法</p>
<p>Bash里 输入md5 文件名即转成MD5.</p>
<p>如果内容差异越小,那么MD5值越大.</p>
<h5 id="ETag"><a href="#ETag" class="headerlink" title="ETag"></a>ETag</h5><p>服务器返回一个ETag,内容是MD5给浏览器,浏览器下次发送请求时,请求时带上请求头if-none-match,那么内容不需要下载,服务器返回状态码304,304返回的第四部分是空的.</p>
<h5 id="Cache-Control和ETag"><a href="#Cache-Control和ETag" class="headerlink" title="Cache-Control和ETag"></a>Cache-Control和ETag</h5><p>Cache-Control是未过期不发送请求,ETag是发送请求假如不匹配,但是不返回内容,即响应体是空的.</p>
</div><div class="p-copyright"><blockquote><div class="p-copyright-author"><span class="p-copyright-key">本文作者：</span><span class="p-copytight-value"><a href="mailto:litreily@163.com">Roxas Deng</a></span></div><div class="p-copyright-link"><span class="p-copyright-key">本文链接：</span><span class="p-copytight-value"><a href="/2018/06/11/Seesion--LocalStorage--Cache-Control--Expires--ETag/">http://yoursite.com/2018/06/11/Seesion--LocalStorage--Cache-Control--Expires--ETag/</a></span></div><div class="p-copyright-note"><span class="p-copyright-key">版权声明：</span><span class="p-copytight-value">本博客所有文章除特殊声明外，均采用<a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/"> CC BY-NC 4.0 </a>许可协议。转载请注明出处 <a href="http://yoursite.com">Roxas Deng的博客</a>！</span></div></blockquote></div></article><div class="p-info box"><span class="p-tags"><i class="fa fa-tag"></i><a href="/tags/HTTP/">HTTP</a></span></div><aside id="toc"><div class="toc-title">目录</div><nav><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#Session-与-Cookie-的关系与区别"><span class="toc-number">1.</span> <span class="toc-text">Session 与 Cookie 的关系与区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cookie"><span class="toc-number">2.</span> <span class="toc-text">Cookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是Seesion"><span class="toc-number">3.</span> <span class="toc-text">什么是Seesion?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#localStorage"><span class="toc-number">4.</span> <span class="toc-text">localStorage</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#什么是localStorage"><span class="toc-number">4.1.</span> <span class="toc-text">什么是localStorage?</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#方法"><span class="toc-number">4.2.</span> <span class="toc-text">方法:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#特点"><span class="toc-number">4.3.</span> <span class="toc-text">特点:</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#LocalStorage与Cookie的区别"><span class="toc-number">4.3.1.</span> <span class="toc-text">LocalStorage与Cookie的区别.</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SessionStorage-会话存储"><span class="toc-number">4.4.</span> <span class="toc-text">SessionStorage(会话存储)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SessionStorage与LocalStorage区别"><span class="toc-number">4.5.</span> <span class="toc-text">SessionStorage与LocalStorage区别</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP-缓存-Cache"><span class="toc-number">5.</span> <span class="toc-text">HTTP 缓存(Cache)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Cache-Control"><span class="toc-number">5.1.</span> <span class="toc-text">Cache-Control</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#更新缓存"><span class="toc-number">5.2.</span> <span class="toc-text">更新缓存</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#为什么首页不能设置Cache-Control"><span class="toc-number">5.3.</span> <span class="toc-text">为什么首页不能设置Cache-Control</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Expires"><span class="toc-number">5.4.</span> <span class="toc-text">Expires</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MD5"><span class="toc-number">5.5.</span> <span class="toc-text">MD5</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ETag"><span class="toc-number">5.6.</span> <span class="toc-text">ETag</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Cache-Control和ETag"><span class="toc-number">5.7.</span> <span class="toc-text">Cache-Control和ETag</span></a></li></ol></li></ol></nav></aside></div><section class="p-ext"><div class="l-pager l-pager-dtl box"><a class="prev" href="/2018/06/13/sass/">&lt; sass</a><a class="next" href="/2018/06/10/Cookie-注册与登陆/">Cookie-注册与登陆 &gt;</a></div></section><footer><p>Copyright © 2016 - 2023 <a href="/." rel="nofollow">RoxasDengBlog</a> | <strong><a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></strong><br><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span></span> <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span></span> | Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a>Theme with<a rel="nofollow" target="_blank" href="https://github.com/litreily/snark-hexo"> snark.</a></p></footer></div></div></div><script type="text/javascript" src="/js/search.js"></script><script type="text/javascript" src="/js/top.js"></script><script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
    search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script></body></html>